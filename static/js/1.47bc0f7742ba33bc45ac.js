webpackJsonp([1],{"7AY+":function(t,e){},"8Pyb":function(t,e){},"9OOw":function(t,e,s){"use strict";var i=s("lHQJ"),o={name:"ActionForm",data:function(){return{newPost:{content:"",title:"",tag:[]}}},props:{user:Object},methods:{submitPost:function(){var t=this.newPost,e=this.user;this.newPost.title&&(this.$store.dispatch(i.f,{newPost:t,user:e}),this.newPost={content:"",title:""})},onPaste:function(t){return console.log(this.user),console.log(t),!0}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.user.name?s("div",{staticClass:"card mb-3 shadow"},[s("div",{staticClass:"card-hearder"}),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("Title: ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPost.title,expression:"newPost.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",autocomplete:"off"},domProps:{value:t.newPost.title},on:{input:function(e){e.target.composing||t.$set(t.newPost,"title",e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"comment"}},[t._v("Content:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPost.content,expression:"newPost.content"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:t.newPost.content},on:{paste:t.onPaste,input:function(e){e.target.composing||t.$set(t.newPost,"content",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn float-right mt-3",class:{disabled:!t.newPost.title},on:{click:t.submitPost}},[t._v("Post")])])])]):t._e()},staticRenderFns:[]};var a=s("VU/8")(o,n,!1,function(t){s("8Pyb")},"data-v-25b9e84a",null);e.a=a.exports},LoF5:function(t,e,s){"use strict";var i=s("Dd8w"),o=s.n(i),n=s("NYxO"),a=s("yp89"),r=s("lHQJ"),l=s("/o5o"),c={name:"PostView",data:function(){return{isMobile:!!a.e.any(),timeout:null}},props:{userInfo:Object},computed:o()({},Object(n.c)({post:function(t){return t.postView.postList},unsub:function(t){return t.postView.unsub},limit:function(t){return t.postView.limit},hideList:function(t){return t.auth.userInfo.hideList}})),watch:{post:function(t){console.log(111111111),this.$forceUpdate()},userInfo:function(){this.$forceUpdate()}},beforeCreate:function(){this.$store.dispatch(r.h,{date:Date.now(),operator:"<",limit:10})},methods:{isBlocked:function(t){return!this.userInfo.blockedUser||!this.userInfo.blockedUser.filter(function(e){return e==t}).length},trimTitle:function(t){return t.replace(/[^A-Z0-9]+/gi,"_").substr(0,30)},isHide:function(t){return!t||t.indexOf(this.userInfo._id)},likePost:function(t,e){this.userInfo.email?this.$store.dispatch(r.t,{id:t.id,user:this.userInfo._id}):this.$router.push("/login"),console.log(this.post)},hidePost:function(t){console.log(this.userInfo.hideList),this.$store.dispatch(r.r,{id:t,userId:this.userInfo._id}),this.$forceUpdate()},undoHide:function(t){console.log(t),this.$store.dispatch(r.C,{id:t,userId:this.userInfo._id})},hideAll:function(t){this.$store.dispatch(r.b,{id:this.userInfo.id,userId:t.userId})},show:function(t,e){t.target.classList.contains("other-function")||(history.pushState(null,"","#/posts/"+e._id+"/"+this.trimTitle(e.title)),this.$modal.show(l.a,{i:e,isMobile:a.e},{height:"auto",width:this.isMobile?"100%":"80%",style:{"z-index":9e3},scrollable:!0},{closed:this.hide}))},hide:function(){this.$modal.hide("view-post"),history.pushState(null,"","/")},cvDate:a.b,checkLiked:function(t){return t.like.indexOf(this.userInfo._id)>=0},sharePost:function(t){var e="https://4x2939pp80.codesandbox.io/%23/posts/"+t._id+"/"+this.trimTitle(t.title),s="https://4x2939pp80.codesandbox.io/#/posts/"+t._id+"/"+this.trimTitle(t.title),i=$.get("https://dct.glitch.me/sht/new/"+e,function(t,e){return i=t.short_url,document.getElementById("sharedLink").value=i,i});this.$modal.show("dialog",{title:"Share post",text:'<div class="input-group">\n\t\t\t\t\t\t\t\t\t<input type="text" value="'+i+'" id="sharedLink" class="form-control" readonly>\n\t\t\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-secondary" onclick="(function(){\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'sharedLink\').select();\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'alert\').classList.remove(\'text-hide\');\n\t\t\t\t\t\t\t\t\t\t\tdocument.execCommand(\'copy\');\n\t\t\t\t\t\t\t\t\t\t})(); return false;"><i class="fas fa-copy"></i></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="alert alert-success my-1 p-1 text-center text-hide" id="alert">\n\t\t\t\t\t\t\t\t\tLink has been copied to clipboard\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t',buttons:[{title:"Copy link",handler:this.copyLink},{title:'<a id="shareTwitter" target="_blank" href="http://twitter.com/share?url='+e+'"><i class="fab fa-twitter fa-2x"></i></a>',handler:function(){document.getElementById("shareTwitter").click()}},{title:'<a id="shareFacebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u='+s+'"><i class="fab fa-facebook fa-2x"></i></a>',handler:function(){document.getElementById("shareFacebook").click()}},{title:"Close"}]})},copyLink:function(){clearTimeout(this.timeout);var t=document.getElementById("sharedLink"),e=document.getElementById("alert");""!=t.value&&(t.select(),e.classList.remove("text-hide"),this.timeout=setTimeout(function(){e.classList.add("text-hide")},5e3),document.execCommand("copy"),document.getSelection().removeAllRanges())},prev:function(){this.unsub(),this.limit-10<0?this.limit=10:this.limit=this.limit-10,this.$store.dispatch(r.h,{date:this.post[0].createdDate,operator:">",limit:this.limit})},next:function(){this.unsub(),this.$store.dispatch(r.h,{date:this.post[this.post.length-1].createdDate,operator:"<",limit:this.limit+10})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"post-view"}},[t._l(t.post,function(e,i){return t.isBlocked(e.userId)?s("div",{key:e[i],staticClass:"card shadow-sm post-view",class:{"mb-2":!t.isMobile}},[t.isHide(e.hideList)?s("div",{staticClass:"card-body",attrs:{id:e._id},on:{click:function(s){t.show(s,e)}}},[s("div",{staticClass:"dropdown float-right"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e.userId!=t.userInfo._id?s("a",{staticClass:"dropdown-item other-function small",attrs:{href:"javascript:void(0)"},on:{click:function(s){s.stopPropagation(),t.hidePost(e.id)}}},[t._v("Hide")]):t._e(),t._v(" "),e.userId!=t.userInfo._id?s("a",{staticClass:"dropdown-item other-function small",attrs:{href:"javascript:void(0)"},on:{click:function(s){s.stopPropagation(),t.hideAll(e)}}},[t._v("Hide all from "+t._s(e.owner))]):t._e(),t._v(" "),s("div",{staticClass:"dropdown-divider"}),t._v(" "),e.userId==t.userInfo._id?s("a",{staticClass:"dropdown-item other-function small",attrs:{href:"javascript:void(0)"}},[t._v("Delete")]):t._e(),t._v(" "),s("a",{staticClass:"dropdown-item other-function small",attrs:{href:"#/posts/"+e._id+"/"+t.trimTitle(e.title)}},[t._v("Open")])])]),t._v(" "),s("small",[t._v("Posted by ")]),s("small",{staticClass:"text-primary"},[t._v(t._s(e.owner))]),s("span",{staticClass:"badge badge-light"},[s("small",[t._v(t._s(t.cvDate(e.createdDate)))])]),t._v(" "),s("h5",{staticClass:"card-title"},[s("a",{attrs:{href:"#/posts/"+e._id+"/"+t.trimTitle(e.title),onclick:"return false;"}},[t._v(t._s(i)+" "+t._s(e.title)+" "+t._s(t.isBlocked(e.userId)))])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"btn-group btn-group-sm"},[s("button",{staticClass:"btn btn-light",attrs:{type:"button"}},[s("i",{staticClass:"fas fa-comment"}),t._v("\n\t\t\t\t\t"+t._s(e.comment.length>0?e.comment.length:"")+"\n\t\t\t\t\t"+t._s(e.comment.length>1?"Comments":"Comment")+"\n\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){s.stopPropagation(),t.likePost(e,i)}}},[s("i",{staticClass:"fas fa-thumbs-up",class:{"text-primary":t.checkLiked(e)}}),t._v("\n\t\t\t\t\t"+t._s(e.like.length>0?e.like.length:"")+" Like\n\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){s.stopPropagation(),t.sharePost(e)}}},[s("i",{staticClass:"fas fa-share"}),t._v(" Share\n\t\t\t\t")])])]):s("div",{staticClass:"card-body p-0",attrs:{"data-toggle":"collapse","data-target":"#"+e._id+"hide"}},[s("a",{staticClass:"card-body d-block",attrs:{href:"javascript:void(0)"}},[t._v("\n\t\t\t\t"+t._s(e.title.substr(0,50))+" ...\n\t\t\t\t"),s("i",{staticClass:"fas fa-chevron-down float-right py-1"})]),t._v(" "),s("div",{staticClass:"collapse list-group list-group-flush",attrs:{id:e._id+"hide"}},[s("a",{staticClass:"list-group-item list-group-item-action small",attrs:{href:"javascript:void(0)"},on:{click:function(s){s.stopPropagation(),t.hideAll(e)}}},[t._v("Hide all from "+t._s(e.owner))]),t._v(" "),s("a",{staticClass:"list-group-item list-group-item-action small",attrs:{href:"javascript:void(0)"},on:{click:function(s){s.stopPropagation(),t.undoHide(e.id)}}},[t._v("Undo hide")]),t._v(" "),s("a",{staticClass:"list-group-item list-group-item-action small",attrs:{href:"#/posts/"+e._id+"/"+t.trimTitle(e.title)}},[t._v("\n\t\t\t\t\tOpen")])])])]):t._e()}),t._v(" "),s("modal",{attrs:{name:"view-post"}}),t._v(" "),s("v-dialog")],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"close",attrs:{"data-toggle":"dropdown",href:"javascript:void(0)"}},[e("i",{staticClass:"fas fa-ellipsis-h fa-sm other-function"})])}]};var u=s("VU/8")(c,d,!1,function(t){s("NbnT")},"data-v-d584dc82",null);e.a=u.exports},NbnT:function(t,e){},US8T:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),o=s.n(i),n=s("9OOw"),a=s("LoF5"),r={name:"PageContent",components:{ActionForm:n.a,PostView:a.a},props:{userInfo:Object}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-content col-md-8 py-3 px-0"},[e("ActionForm",{attrs:{user:this.userInfo}}),this._v(" "),e("PostView",{attrs:{userInfo:this.userInfo}})],1)},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("7AY+")},null,null).exports,d=s("a1CX"),u=s("yp89"),h=s("NYxO"),p={name:"MainPage",components:{PageContent:c,SideMenu:d.a},data:function(){return{isMobile:!!u.e.any()}},computed:o()({},Object(h.c)({userInfo:function(t){return t.auth.userInfo}}))},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pt-3",class:{container:!this.isMobile},attrs:{id:"main-page"}},[e("div",{class:{row:!this.isMobile}},[e("PageContent",{attrs:{userInfo:this.userInfo}}),this._v(" "),e("SideMenu")],1)])},staticRenderFns:[]};var m=s("VU/8")(p,f,!1,function(t){s("Y/QE")},null,null);e.default=m.exports},"Y/QE":function(t,e){}});
//# sourceMappingURL=1.47bc0f7742ba33bc45ac.js.map