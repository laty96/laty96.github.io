webpackJsonp([6],{"+Da/":function(t,e){},"/5ZX":function(t,e){},"/o5o":function(t,e,n){"use strict";var s=n("woOf"),i=n.n(s),o=n("Dd8w"),a=n.n(o),r=n("NYxO"),c=n("m9Bh"),l=n("lHQJ"),u=n("yp89"),d={name:"modal",components:{Reply:c.a},props:{i:Object,isMobile:null},data:function(){return{newComment:{content:""},sortType:2,commentList:[],isReplied:!0,isLiked:!1}},computed:a()({},Object(r.c)({comment:function(t){return t.postComment.comment},userInfo:function(t){return t.auth.userInfo}}),{sortTypeValue:function(){return 1==this.sortType?"Best":2==this.sortType?"New":3==this.sortType?"Old":void 0}}),watch:{comment:function(t){if(this.commentList=i()({},this.commentList,this.comment),this.commentList.comment)if(1==this.sortType){var e=Object(u.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==this.sortType){var n=Object(u.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=n}else if(3==this.sortType){var s=Object(u.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=s}this.$forceUpdate()}},methods:{cvDate:u.b,force:function(){this.$forceUpdate(),console.log(this.comment),console.log(this.commentList)},next:function(){this.$nextTick()},postComment:function(){var t=this;if(this.newComment.content){var e={id:this.i.id,content:this.newComment.content,createdTime:Date.now(),owner:this.userInfo.name,ownerId:this.userInfo._id,postOwnerId:this.i.userId,postId:this.i.id,userImg:this.userInfo.imgURL};this.$store.dispatch(l.w,e),this.newComment.content="",window.setTimeout(function(){t.commentList=t.comment},1e3)}},sortComment:function(t){if(this.sortType=t,1==t){var e=Object(u.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==t){var n=Object(u.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=n}else if(3==t){var s=Object(u.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=s}},likePost:function(t){this.userInfo.email?(this.isLiked=!this.isLiked,this.$store.dispatch(l.t,{id:t.id,user:this.userInfo._id}),this.$forceUpdate()):this.$router.push("/login")},likeComment:function(t){}},created:function(){this.$store.dispatch(l.g,this.i.id)},mounted:function(){console.log(this.i.like.indexOf(this.userInfo._id)),this.isLiked=this.i.like.indexOf(this.userInfo._id)>=0,document.title=this.i.title,document.getElementsByTagName("body")[0].style.overflow="hidden"},destroyed:function(){document.title="Noname",document.getElementsByTagName("body")[0].style.overflow=""}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("button",{staticClass:"close float-right ml-3",on:{click:function(e){t.$emit("close")}}},[n("i",{staticClass:"fas fa-times"})]),t._v(" "),n("h5",{staticClass:"card-title"},[t._v(t._s(t.i.title)+" \n\t\t\t\t")]),t._v(" "),n("small",[t._v("Posted by ")]),n("small",{staticClass:"text-primary"},[t._v(t._s(t.i.owner))]),n("span",{staticClass:"badge badge-light text-secondary"},[t._v(t._s(t.cvDate(t.i.createdDate)))])]),t._v(" "),n("div",{staticClass:"card-body",class:{"p-1":t.isMobile}},[n("div",{staticClass:"card-text",class:{"p-2":t.isMobile}},[t._v(t._s(t.i.content)+" \n        ")]),t._v(" "),n("hr"),t._v(" "),t.userInfo.name?n("div",{staticClass:"form-group p-2"},[n("label",{attrs:{for:"comment-input"}},[t._v("Comment as "),n("small",[t._v(t._s(t.userInfo.name))])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"form-control",attrs:{id:"comment-input",rows:"4"},domProps:{value:t.newComment.content},on:{input:function(e){e.target.composing||t.$set(t.newComment,"content",e.target.value)}}}),t._v(" "),n("button",{staticClass:"form-control btn btn-secondary my-2",class:{disabled:!t.newComment.content},on:{click:t.postComment}},[t._v("Comment")])]):t._e(),t._v(" "),n("div",{},[n("div",{staticClass:"d-flex dropdown custom-control-inline"},[n("button",{staticClass:"btn  btn-sm btn-light dropdown-toggle mr-auto mx-2",attrs:{type:"button","data-toggle":"dropdown"}},[n("code",[t._v("Sort by:")]),t._v(" "),n("span",{staticClass:"badge badge-secondary p-1"},[t._v(" "+t._s(t.sortTypeValue))])]),t._v(" "),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",class:{active:1==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(1)}}},[t._v("Best")]),t._v(" "),n("a",{staticClass:"dropdown-item",class:{active:2==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(2)}}},[t._v("New")]),t._v(" "),n("a",{staticClass:"dropdown-item",class:{active:3==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(3)}}},[t._v("Old")])]),t._v(" "),n("div",{staticClass:"btn-group btn-group-sm"},[n("button",{staticClass:"btn btn-light shadow-sm",class:{"text-primary":t.isLiked},attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.likePost(t.i)}}},[n("i",{staticClass:"fas fa-thumbs-up"}),t._v(" Like")])])])]),t._v(" "),n("hr"),t._v(" "),t._l(t.commentList.comment,function(e,s){return n("div",{key:e.commentID},[n("dl",{staticClass:"border-secondary border-left pl-1 ml-2"},[n("dt",[t.commentList.reply&&t.commentList.reply[e.commentID]?n("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),n("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),n("dd",[t._v(t._s(e.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:s}}),t._v(" "),t._l(t.commentList.reply?t.commentList.reply[e.commentID]:[],function(s,i){return t.commentList.reply.length?t._e():n("dl",{key:s.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+e.commentID}},[n("dt",[t.commentList.reply[s.commentID]&&t.commentList.reply[s.commentID]?n("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+s.commentID}}):t._e(),t._v(" "),n("small",{staticClass:"text-primary"},[t._v(" "+t._s(s.owner))])]),t._v(" "),n("dd",[t._v(t._s(s.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(s.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:s,commentID:s.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[s.commentID],function(e,i){return n("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+s.commentID}},[n("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?n("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),n("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),n("dd",[t._v(t._s(e.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parent2CmtID:s.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(s,i){return n("dl",{key:s.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+e.commentID}},[n("dt",[t.commentList.reply[s.commentID]&&t.commentList.reply[s.commentID]?n("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+s.commentID}}):t._e(),t._v(" "),n("small",{staticClass:"text-primary"},[t._v(" "+t._s(s.owner))])]),t._v(" "),n("dd",[t._v(t._s(s.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(s.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:s,commentID:s.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[s.commentID],function(e,i){return n("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+s.commentID}},[n("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?n("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),n("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),n("dd",[t._v(t._s(e.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parent2CmtID:s.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(s,i){return n("dl",{key:s.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+e.commentID}},[n("dt",[n("small",{staticClass:"text-primary"},[t._v(" "+t._s(s.owner))])]),t._v(" "),n("dd",[s.mentioned?n("div",{domProps:{innerHTML:t._s(s.mentioned)}}):t._e(),t._v("   "+t._s(s.content)),n("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),n("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:s,commentID:s.commentID,user:t.userInfo,postId:t.i.id,index:i}})],1)})],2)})],2)})],2)})],2)}),t._v(" "),n("hr")],2)])})],2)])])},staticRenderFns:[]};var h=n("VU/8")(d,m,!1,function(t){n("MCoa")},null,null);e.a=h.exports},E3rV:function(t,e){},MCoa:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i=n("bOdI"),o=n.n(i),a=n("Dd8w"),r=n.n(a),c=n("lHQJ"),l=n("yp89"),u=n("NYxO"),d=n("/o5o"),m={name:"Navbar",components:{SideMenu:n("a1CX").a},data:function(){return{black:!1,isMobile:!!l.e.any(),title:document.title,count:0}},watch:{notify:function(){this.notify.length&&(document.title="("+this.notify.length+")"+this.title)},chatList:function(){var t=this;console.log(this.chatList),console.log(12321312);var e=0;this.chatList.forEach(function(n){if(n.isNotified!=t.userInfo.name&&1==n.hasNew){e++;var s=new Audio("https://facebook.design/public/sounds/Notification%201.mp3");s.preload="auto",setTimeout(function(){s.play()},250)}}),this.count=e,(0!=e||0!=this.notify.length)&&(document.title="("+(e+this.notify.length)+") "+this.title)}},computed:r()({},Object(u.c)({unsub:function(t){return t.postView.unsubPost},post:function(t){return t.postView.post},userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},chatList:function(t){return t.chat.chatList},pendingRequests:function(t){return t.auth.pendingRequests},friendNotify:function(t){return t.auth.friendNotify}})),methods:{cvDate:function(t){return Object(l.c)(t)},calendarTime:function(t){return Object(l.a)(t)},getMember:function(t){return 0==t.indexOf(this.userInfo.email)?1:0},shortenMessage:function(t){if(t.length>0)return t[t.length-1].message.length>20?t[t.length-1].message.substr(0,20)+"...":t[t.length-1].message},getChatOwner:function(t){if(t.length>0)return t[t.length-1].owner==this.userInfo.name?"You:":t[t.length-1].owner+":"},signOut:function(){this.$store.dispatch(c.y,this.userInfo)},getType:function(t){return 1==t?"mentioned you.":2==t?"replied your comment.":3==t?"comment in your post.":void 0},readChat:function(t){console.log(t),this.$store.dispatch(c.c,t.membersId[0])},notiRead:function(){document.getElementById("notify").addEventListener("scroll",this.scrollA);var t=this;setTimeout(function(){t.$store.dispatch(c.v,t.userInfo._id)},1e4)},declineRequest:function(t){this.$store.dispatch("DECLINE_REQUEST",{u:{_id:t.requester},userInfo:{_id:this.userInfo._id}})},acceptRequest:function(t){this.$store.dispatch("ACCEPT_REQUEST",t)},getFriendPost:function(){},show:function(t){var e=this;this.$store.dispatch(c.n,t),setTimeout(function(){e.$modal.show(d.a,{i:e.post,isMobile:l.e.any()},{height:"auto",width:l.e.any()?"100%":"80%",style:{"z-index":9e3},scrollable:!0},{closed:e.hide},{"before-open":e.$forceUpdate(),"before-close":e.unsub()})},200)},hide:function(){this.$modal.hide("view-post")},scrollA:function(){var t=document.getElementById("notify");if(Math.floor(t.offsetHeight+t.scrollTop)==t.scrollHeight){var e=this.userInfo;e.limit=this.inactiveNotify.length+10,this.$store.dispatch(c.m,e)}}},mounted:function(){},destroyed:function(){document.getElementById("notify").removeEventListener("scroll",this.scrollA)}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"shadow-sm navbar navbar-expand-lg navbar-light bg-light fixed-top"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Home")]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[t.getUserStatus?t._e():n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1)]),t._v(" "),n("ul",{staticClass:"navbar-nav"},[t.getUserStatus?n("li",{staticClass:"nav-item notify-dropdown"},[n("div",{staticClass:"dropdown"},[n("a",{staticClass:"nav-link",class:{"text-primary":t.pendingRequests.length},attrs:{href:"#","data-toggle":"dropdown"}},[n("i",{staticClass:"fa-user-friends fas"}),t.pendingRequests.length>0?n("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.pendingRequests.length))]):t._e()]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[n("ul",{staticClass:"list-group list-group-flush",attrs:{id:"pendingRequests"}},[n("h5",{staticClass:"dropdown-header"},[t._v("Friend requests")]),t._v(" "),t._l(t.pendingRequests,function(e){return n("li",{key:e.id,staticClass:"dropdown-item list-group-item",staticStyle:{cursor:"pointer"}},[n("img",{staticClass:"px-1",staticStyle:{height:"2em"},attrs:{src:e.requesterImg,alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.requesterName)+" \n\t\t\t\t\t\t\t\t\t\t"),n("div",{staticClass:"btn-group btn-group-sm"},[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(n){t.acceptRequest(e)}}},[t._v("Accept")]),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(n){t.declineRequest(e)}}},[t._v("Decline")])])])})],2)])])]):t._e()]),t._v(" "),n("ul",{staticClass:"navbar-nav"},[t.getUserStatus?n("li",{staticClass:"nav-item notify-dropdown"},[n("div",{staticClass:"dropdown",on:{click:function(e){t.notiRead()}}},[n("a",{staticClass:"nav-link",class:{"text-primary":t.notify.length},attrs:{href:"#","data-toggle":"dropdown"}},[n("i",{staticClass:"fa-bell",class:[t.notify.length?"fas":"far"]}),t.notify.length>0?n("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.notify.length))]):t._e()]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[n("ul",{staticClass:"list-group list-group-flush",attrs:{id:"notify"}},[t.notify.length>0?n("h5",{staticClass:"dropdown-header"},[t._v("New")]):t._e(),t._v(" "),t._l(t.friendNotify,function(e){return n("li",{key:e.id,staticClass:"dropdown-item list-group-item",staticStyle:{cursor:"pointer"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+" rejected your friend request.\n\t\t\t\t\t\t\t\t\t")])}),t._v(" "),t._l(t.notify,function(e){return n("li",{key:e.id,staticClass:"dropdown-item list-group-item",staticStyle:{cursor:"pointer"},on:{click:function(n){t.show(e.postId)}}},[n("img",{staticClass:"px-1",staticStyle:{height:"2em"},attrs:{src:e.userImg,alt:""}}),t._v(" "),n("a",{staticClass:"text-primary"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),n("small",{staticClass:"bg-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])}),t._v(" "),n("h5",{staticClass:"dropdown-header"},[t._v("Old")]),t._v(" "),t._l(t.inactiveNotify,function(e){return n("li",{key:e.id,staticClass:"dropdown-item list-group-item",on:{click:function(n){t.show(e.postId)}}},[n("img",{staticClass:"px-1",staticStyle:{height:"2em"},attrs:{src:e.userImg,alt:""}}),t._v(" "),n("a",{staticClass:"text-primary"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),n("small",{staticClass:"bg-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])})],2)])])]):t._e(),t._v(" "),t.getUserStatus?n("li",{staticClass:"nav-item notify-dropdown"},[n("div",{staticClass:"dropdown"},[n("a",{staticClass:"nav-link",attrs:{href:"#","data-toggle":"dropdown"}},[n("i",{staticClass:"fa-comment",class:[t.count?"fas":"far"]}),t.count?n("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.count?t.count:""))]):t._e()]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[n("ul",{staticClass:"list-group list-group-flush",attrs:{id:"notifyChat"}},t._l(t.chatList,function(e){return e.membersName&&e.content.length?n("li",{key:e.id,staticClass:"dropdown-item list-group-item py-1 rounded px-2",class:{"bg-light":e.isNotified!=t.userInfo.name&&e.hasNew},staticStyle:{cursor:"pointer"},on:{click:function(n){t.readChat(e)}}},[n("img",{staticClass:"px-1 float-left rounded-circle",staticStyle:{height:"3em"},attrs:{src:e.membersImg[t.getMember(e.membersEmail)]}}),t._v(" "),n("a",[n("a",[t._v(t._s(e.membersName[t.getMember(e.membersEmail)]))]),t._v(" "),n("p",{staticClass:"small mb-0 text-secondary d-flex justify-content-between",staticStyle:{"max-width":"500px","overflow-x":"hidden"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t "+t._s(t.getChatOwner(e.content))+" "+t._s(t.shortenMessage(e.content))+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),n("small",{staticClass:"bg-light"},[t._v(t._s(t.calendarTime(e.time)))])])])]):t._e()}))])])]):t._e(),t._v(" "),t.getUserStatus?n("li",{staticClass:"nav-item dropdown"},[n("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.getUsername)+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-left"},[n("router-link",{staticClass:"dropdown-item",attrs:{to:"/profile"}},[t._v("Profile")]),t._v(" "),t.getUserStatus?n("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Sign out")]):t._e()],1)]):t._e()])])],1),t._v(" "),n("modal",{attrs:{name:"view-post"}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg-light"},[e("div",{staticClass:"p-5 m-5"})])}]};var p,g=(p={name:"Home",components:{Navbar:n("VU/8")(m,h,!1,function(t){n("X5Tk")},"data-v-59cbb8dc",null).exports,Footer:n("VU/8")({name:"Footer"},f,!1,function(t){n("/5ZX")},null,null).exports,Login:n("xJsL").default},data:function(){return{lastFetch:0,isHome:this.$route.path}},computed:Object(u.c)({post:function(t){return t.postView.postList},userInfo:function(t){return t.auth.userInfo},unsub:function(t){return t.postView.unsub},limit:function(t){return t.postView.limit}}),mounted:function(){this.$store.dispatch(c.u)},watch:{$route:function(){"/"!=this.$route.path&&window.removeEventListener("scroll",this.scrollA)}},methods:{scrollA:function(t){var e=Date.now(),n=this.post[this.post.length-1].createdDate;Math.ceil(document.documentElement.scrollTop+window.innerHeight)==document.documentElement.offsetHeight&&e-this.lastFetch>500&&(this.lastFetch=e,this.unsub(),this.$store.dispatch(c.h,{date:n,operator:"<",limit:+this.limit+10}),this.$forceUpdate())},removeUser:function(t){this.$store.dispatch(c.y,this.userInfo)}}},o()(p,"mounted",function(){window.addEventListener("scroll",this.scrollA),window.addEventListener("unload",this.removeUser)}),o()(p,"destroyed",function(){}),p),v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{on:{scroll:this.scrollA}},[e("Navbar"),this._v(" "),e("div",{staticClass:"router-view mt-5"},[e("router-view")],1),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e("Login")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var _={name:"App",components:{Home:n("VU/8")(g,v,!1,function(t){n("+Da/")},null,null).exports}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Home")],1)},staticRenderFns:[]};var I=n("VU/8")(_,y,!1,function(t){n("TQ8u")},null,null).exports,w=n("woOf"),C=n.n(w),b=n("kxiW"),E=n.n(b),j={apiKey:"AIzaSyA8bHknVwSCSa6rQrOTVA9E_tC08hQqn_Y",authDomain:"test-93c66.firebaseapp.com",databaseURL:"https://test-93c66.firebaseio.com",projectId:"test-93c66",storageBucket:"test-93c66.appspot.com",messagingSenderId:"615923476965"},x=E.a.initializeApp(j).firestore(),D=E.a.firestore,L=E.a.storage().ref();D().settings({timestampsInSnapshots:!0});var T=n("Zrlr"),k=n.n(T),S=function t(e){k()(this,t),this.id=Object(l.f)(),this.name=e.name,this.email=e.email,this.postIDs=[],this.createdTime=Date.now(),this.personal={},this.friends=[],this.imgURL=e.imgURL,this.status=e.status,this.hideList=[],this.blockedUser=[]};var P,U,N,R={saveProfileImage:function(t,e,n,s){t.collection("users").doc(e).set(o()({},s,n),{merge:!0})},blockUser:function(t,e,n){t.collection(e).doc(n.id).update({blockedUser:D.FieldValue.arrayUnion(n.userId)})},undoHidePost:function(t,e,n,s){t.collection(e).doc(n).update({hideList:D.FieldValue.arrayRemove(s)})},hidePost:function(t,e,n,s){t.collection(e).doc(n).update({hideList:D.FieldValue.arrayUnion(s)})},searchQuery:function(t,e,n,s,i,o,a){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"id",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"asc";i.collection(t).where(e,n,s).orderBy(r,c).onSnapshot(function(t){var e=[];t.forEach(function(t){var n=t.data();n._id=t.data().id,n.id=t.id,e.push(n)}),o(e,t)})},fetchPosts:function(t,e,n,s,i,o,a,r,c,l,u,d){if(r||(r="desc"),d);else var m=n.collection(t).orderBy(e,"desc").limit(u).onSnapshot(function(t){t.docChanges().forEach(function(t){if("modified"===t.type){var e=t.doc.data();e._id=e.id,e.id=t.doc.id,i(e,t.oldIndex)}"removed"===t.type&&o(t.oldIndex)});var e=[];t.forEach(function(t){var n=t.data();n._id=n.id,n.id=t.id,e.push(n)}),s(e,m,u)})},deletePost:function(t,e,n,s,i,o){i.collection(t).where(e,n,s).get().then(function(t){t.forEach(function(t){t.ref.delete()})}).catch(function(t){return o(t)})},createPost:function(t,e,n,s,i){n.collection(t).add(C()({},e)).then(function(t){s(t)}).catch(function(t){return i(t)})},addUser:function(t,e,n,s){var i=new S(e);t.collection("users").add(C()({},i)).then(function(e){n(e),function(t,e){t.collection("notify").doc(e).set({notify:[]},{merge:!0})}(t,i.id)}).catch(function(t){return s(t)})},postComment:function(t,e,n,s,i,o){var a=C()({},s);e.collection(t).doc(n).update({comment:D.FieldValue.arrayUnion(a),time:D.FieldValue.serverTimestamp()}).then(function(t){return i(t)}).catch(function(t){return o(t)})},likePost:function(t,e,n,s,i,o){var a=!1;e.collection(t).doc(n).get().then(function(r){r.data().like.forEach(function(t){t==s&&(a=!0)}),a?e.collection(t).doc(n).update({like:D.FieldValue.arrayRemove(s)}).then(function(t){i(t)}).catch(function(t){return o(t)}):e.collection(t).doc(n).update({like:D.FieldValue.arrayUnion(s)}).then(function(t){i(t)}).catch(function(t){return o(t)})})},getPostComment:function(t,e,n,s,i){e.collection(t).doc(n).onSnapshot(function(t){var e=t.data();e.comment.length?s(e):s("")})},userOffline:function(t,e,n){t.collection("users").where("email","==",e).get().then(function(e){var s=e.docs[0].id;t.collection("users").doc(s).update({status:!1}),n()})},userOnline:function(t,e){t.collection("users").where("email","==",e).get().then(function(e){if(e.docs.length){var n=e.docs[0].id;t.collection("users").doc(n).update({status:!0,lastLogedIn:Date.now()})}})},getUserList:function(t,e,n,s){t.collection("users").onSnapshot(function(t){var s=[];t.forEach(function(t){var n=t.data();n._id=n.id,n.id=t.id,e.email!=n.email&&s.push(n)}),n(s,e)})},createConversation:function(t,e,n,s){t.collection("chat").where("membersId","array-contains",e.membersId[0]).get().then(function(i){i.empty&&t.collection("chat").add(C()({},e)).then(function(t){n(t)}).catch(function(t){return s(t)})})},sendMessage:function(t,e,n,s,i){t.collection("chat").doc(e).update({content:D.FieldValue.arrayUnion(C()({},n))}).then(function(t){return s(t)}).catch(function(t){return i})},getConversation:function(t,e,n,s){var i=t.collection("chat").where("membersId","array-contains",e).limit(1).onSnapshot(function(t){t.docChanges().forEach(function(t){if("modified"===t.type){var e=t.doc.data();e.id=t.doc.id,s(e,t.oldIndex)}});var e=[];t.forEach(function(t){var n=t.data();n.id=t.id,e.push(n)}),n(e,i)})},replyComment:function(t,e,n,s,i){var a=C()({},i),r="reply."+s;console.log(a),t.collection(e).doc(n).update(o()({},r,D.FieldValue.arrayUnion(a)))},likeComment:function(t,e,n,s,i,o,a){var r={};r["reply."+o+"."+a+".like"]=i,console.log(r),t.collection(e).doc(n).set(r,{merge:!0})},addFriend:function(t,e,n){console.log(n),t.collection(e).doc(n.userInfo.id).update({friends:D.FieldValue.arrayUnion(n.u.email)})},unFriend:function(t,e,n){console.log(n),t.collection(e).doc(n.userInfo.id).update({friends:D.FieldValue.arrayRemove(n.u.id)}),t.collection(e).doc(n.u.id).update({friends:D.FieldValue.arrayRemove(n.userInfo.id)})},notifyUser:function(t,e){t.collection("notify").add(C()({},e)).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})},getActiveNoti:function(t,e,n,s){t.collection("notify").where("ownerId","==",e).where("isActive","==",!0).orderBy("createdTime","desc").onSnapshot(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),n(e)})},getInactiveNoti:function(t,e,n,s){t.collection("notify").where("ownerId","==",e).where("isActive","==",!1).orderBy("createdTime","desc").limit(s).onSnapshot(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),n(e)})},notifyRead:function(t,e){t.collection("notify").where("ownerId","==",e).where("isActive","==",!0).get().then(function(e){e.forEach(function(e){t.collection("notify").doc(e.id).update({isActive:!1})})})},getPost:function(t,e,n,s){if("_"!=n[0])var i=t.collection(e).doc(n).onSnapshot(function(t){var e=t.data();e.id=t.id,s(e,i)});else var o=t.collection(e).where("id","==",n).onSnapshot(function(t){var e=t.docs[0].data();e.id=t.docs[0].id,s(e,o)})},getUserLikedPost:function(t,e,n,s,i){t.collection(e).where("like","array-contains",n).onSnapshot(function(t){var e=[];t.forEach(function(t){var n=t.data();n.id=t.id,e.push(n)}),s(e)})},getUserPost:function(t,e,n,s,i){t.collection(e).where("userId","==",n).onSnapshot(function(t){var e=[];t.forEach(function(t){var n=t.data();n.id=t.id,e.push(n)}),s(e)})},notifyChat:function(t,e,n){t.collection("chat").doc(e).update({isNotified:n,hasNew:!0,time:Date.now()})},notifyChatRead:function(t,e){t.collection("chat").where("membersId","array-contains",e).get().then(function(e){t.collection("chat").doc(e.docs[0].id).update({hasNew:!1,time:Date.now()})})},getChatList:function(t,e,n){t.collection("chat").where("owner","array-contains",e).orderBy("time","desc").onSnapshot(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),n(e)})},getFriendPost:function(t,e,n,s){n.forEach(function(e){console.log(e),t.collection("POSTS").where("ownerEmail","==",e).get().then(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),s(e)})}),console.log([])},acceptFriendRequest:function(t,e){t.collection("requests").doc(e.requester+e.target).delete(),t.collection("users").doc(e.requesterId).update({friends:D.FieldValue.arrayUnion(e.targetId)}),t.collection("users").doc(e.targetId).update({friends:D.FieldValue.arrayUnion(e.requesterId)})}},O="POSTS",F={postList:[],unsub:Object,limit:null,post:{},unsubPost:Function},$={post:function(){return F.postList}},A=(P={},o()(P,"setStatePost",function(t,e){t.postList=e.n,t.unsub=e.u,t.limit=e.l}),o()(P,"modStatePost",function(t,e){C()(t.postList[e.index],e.mod)}),o()(P,"delStatePost",function(t,e){t.postList.splice(e,1)}),o()(P,"setPost",function(t,e){t.post=e.doc,t.unsubPost=e.unsub}),P),M=(U={},o()(U,c.h,function(t,e){e.date||(e.date=Date.now()),R.fetchPosts(O,"createdDate",x,function(e,n,s){t.commit("setStatePost",{n:e,u:n,l:s})},function(e,n){t.commit("modStatePost",{mod:e,index:n})},function(t){},function(t){},"asc",e.date,e.operator,e.limit,e.name)}),o()(U,c.n,function(t,e){R.getPost(x,O,e,function(e,n){t.commit("setPost",{doc:e,unsub:n})})}),o()(U,c.r,function(t,e){R.hidePost(x,"POSTS",e.id,e.userId)}),o()(U,c.C,function(t,e){R.undoHidePost(x,"POSTS",e.id,e.userId)}),o()(U,c.b,function(t,e){R.blockUser(x,"users",e)}),o()(U,c.t,function(t,e){R.likePost(O,x,e.id,e.user,function(t){return console.log(t)},function(t){return console.log(t)})}),U),q={state:F,getters:$,mutations:A,actions:M,plugins:{}},H=function t(e){k()(this,t),this.id=Object(l.f)(),this.createdDate=Date.now(),this.owner=e.owner,this.ownerEmail=e.ownerEmail,this.userId=e.userId,this.title=e.title,this.content=e.content,this.comment=[],this.like=[],this.img=e.img||[],this.tag=e.tag||[],this.flair=e.flair||[],this.reply=null},z={state:{},getters:{},mutations:{},actions:o()({},c.f,function(t,e){var n={content:e.newPost.content.toString().trim(),title:e.newPost.title.toString().trim(),owner:e.user.name,ownerEmail:e.user.email,userId:e.user._id},s=new H(n);R.createPost(O,s,x,function(t){console.log(t)},function(t){return console.log(t)})}),plugins:{}},B=function t(e){k()(this,t),this.commentID=Object(l.f)(),this.owner=e.owner,this.ownerId=e.ownerId,this.createdTime=Date.now(),this.like=[],this.content=e.content,this.reply=[],e.mentioned&&(this.mentioned=e.mentioned),this.floor=e.floor?e.floor:0},V=function t(e){k()(this,t),this.id=Object(l.f)(),this.createdTime=Date.now(),this.user=e.user,this.userId=e.userId,this.userImg=e.userImg,this.ownerId=e.ownerId,1==e.type&&(this.content="mentioned you."),2==e.type&&(this.content="replied your comment."),3==e.type&&(this.content="comment in your post."),this.isActive=!0,this.type=e.type,this.postId=e.postId,this.parentCmtID=e.parentCmtID,this.commentID=e.commentID},G={comment:[],order:{}},Q={comment:function(){return G.comment}},W=o()({},"setModalComment",function(t,e){t.comment=e;var n={};e&&(e.comment.forEach(function(t,e){n[t.commentID]=e}),t.order=n)}),X=(N={},o()(N,c.w,function(t,e){var n=new B(e);if(R.postComment(O,x,e.id,n,function(){console.log("update success")},function(t){return console.log(t)}),console.log(e),e.ownerId!=e.postOwnerId){var s=new V({user:e.owner,userId:e.ownerId,type:3,ownerId:e.postOwnerId,postId:e.postId,parentCmtID:"",commentID:"",userImg:e.userImg});console.log(s),R.notifyUser(x,s)}}),o()(N,c.z,function(t,e){var n={};if(4==e.floor){var s='<a class="text-primary">@'+e.owner+"</a>";n=new B({owner:e.user,ownerId:e.userId,content:e.reply,floor:e.floor,mentioned:s}),R.replyComment(x,O,e.postId,e.parentCmtID,n)}else n=new B({owner:e.user,ownerId:e.userId,content:e.reply,floor:e.floor+1}),R.replyComment(x,O,e.postId,e.commentID,n);if(console.log(e),e.userId!=e.parentCmtOwnerId){var i=new V({user:e.user,userId:e.userId,type:2,ownerId:e.parentCmtOwnerId,postId:e.postId,parentCmtID:e.parentCmtID,commentID:e.commentID,userImg:e.userImg});console.log(i),R.notifyUser(x,i)}}),o()(N,c.s,function(t,e){console.log(e),R.likeComment(x,O,e.id,e.commentID,e.email,e.parentCmtID,e.index)}),o()(N,c.g,function(t,e){console.log(e),R.getPostComment(O,x,e,function(e){t.commit("setModalComment",e),console.log(e)},function(t){return console.log(t)})}),N),J={state:G,getters:Q,mutations:W,actions:X,plugins:{}},K=n("/ocq");s.a.use(K.a);var Y,Z,tt,et,nt,st=new K.a({routes:[{name:"home",path:"/",component:function(){return n.e(1).then(n.bind(null,"US8T"))}},{name:"login",path:"/login",component:function(){return new Promise(function(t){t()}).then(n.bind(null,"xJsL"))},beforeEnter:function(t,e,n){var s=gt.getters.userInfo.name;console.log(s),s?n("/"):n()}},{name:"friends-post",path:"/friends-posts/:name",component:function(){return n.e(0).then(n.bind(null,"Xr8F"))},props:!0},{name:"userProfile",path:"/user/:userId/:type",component:function(){return n.e(2).then(n.bind(null,"0JZW"))},props:!0},{name:"post",path:"/posts/:postId/:title",component:function(){return n.e(4).then(n.bind(null,"6wEh"))}},{name:"profile",path:"/profile",component:function(){return n.e(3).then(n.bind(null,"o9cx"))},beforeEnter:function(t,e,n){var s=gt.getters.userInfo.name;console.log(s),s?n():n("/")}}]}),it={state:{user:"",userInfo:{name:"",email:"",status:"",imgURL:""},userList:[],notify:[],inactiveNoti:[],isPending:!1,pendingRequests:[]},getters:{isSigned:function(){return JSON.parse(localStorage.getItem("signed"))},userInfo:function(t){return t.userInfo},getUserList:function(t){return t.userList},isPending:function(t){return t.isPending}},mutations:(Y={},o()(Y,"setUser",function(t,e){e.status=!0,t.userInfo=e}),o()(Y,"unsetUser",function(t){t.userInfo={}}),o()(Y,"setUserList",function(t,e){t.userList=e}),o()(Y,"setNotify",function(t,e){t.notify=e||[],e.forEach(function(t){var n=t.user+" "+t.content;Object(l.d)({body:n,icon:e.imgURL},"Notice")})}),o()(Y,"setInactiveNotify",function(t,e){t.inactiveNoti=e||[]}),o()(Y,"setPendingStatus",function(t,e){t.userList.forEach(function(n,s){n._id==e.target&&(t.userList[s].isPending=!0)}),console.log(t.userList)}),o()(Y,"setRequestStatus",function(t,e){t.userList.forEach(function(n,s){n._id==e.requester&&(t.userList[s].isRequest=!0)})}),o()(Y,"unsetPendingStatus",function(t,e){t.userList.forEach(function(n,s){n._id==e.u._id&&(t.userList[s].isPending=!1)}),console.log(t.userList)}),o()(Y,"unsetRequestStatus",function(t,e){t.userList.forEach(function(n,s){n._id==e.userInfo._id&&(t.userList[s].isRequest=!1)}),console.log(t.userList)}),o()(Y,"setPendingRequest",function(t,e){t.pendingRequests=e}),Y),actions:(Z={},o()(Z,c.G,function(t,e){var n=!1;localStorage.setItem("signed",!0),R.searchQuery("users","email","==",e.email,x,function(s){s.length?(t.commit("setUser",s[0]),t.dispatch(c.j,s[0]),t.dispatch(c.m,s[0]),t.dispatch(c.k,s[0]),t.dispatch("GET_PENDING_REQUEST",s[0]._id)):R.addUser(x,e,function(e){var s=e;s.id=e.id,t.commit("setUser",s),n=!0},function(t){return console.log("err: "+t)})},function(t){return console.log(t)},"name"),0==n&&t.dispatch(c.I,e),t.dispatch(c.p,e),"/login"==st.currentRoute.path&&st.push("/")}),o()(Z,c.H,function(t){console.log(this.isSigned),gapi.auth2.getAuthInstance().signOut().then(function(){window.location="/",console.log("User signed out."),localStorage.setItem("signed",!1)})}),o()(Z,c.y,function(t,e){R.userOffline(x,e.email,function(){t.dispatch(c.H)})}),o()(Z,c.I,function(t,e){R.userOnline(x,e.email)}),o()(Z,c.p,function(t,e){R.getUserList(x,e,function(e){t.commit("setUserList",e)},function(t){return console.log(t)})}),o()(Z,c.u,function(t){gapi.signin2.render("my-signin2",{scope:"profile email",width:240,height:50,longtitle:!0,theme:"dark",onsuccess:function(e){var n=e.getBasicProfile(),s={name:n.getName(),imgURL:n.getImageUrl(),email:n.getEmail(),status:!0};t.dispatch(c.G,s)},onfailure:function(t){console.log(t)}})}),o()(Z,c.a,function(t,e){R.addFriend(x,"users",e,function(t){})}),o()(Z,c.D,function(t,e){R.unFriend(x,"users",e,function(t){})}),o()(Z,c.i,function(t,e){x.collection("requests").doc(e.userInfo._id+e.u._id).set({requesterName:e.userInfo.name,requesterImg:e.userInfo.imgURL,requester:e.userInfo._id,requesterId:e.userInfo.id,targetId:e.u.id,target:e.u._id,pending:!0}),t.dispatch("GET_PENDING_STATUS",e)}),o()(Z,"CANCEL_REQUEST",function(t,e){x.collection("requests").doc(e.userInfo._id+e.u._id).delete(),t.commit("unsetPendingStatus",e)}),o()(Z,"DECLINE_REQUEST",function(t,e){x.collection("requests").doc(e.u._id+e.userInfo._id).delete(),t.commit("unsetRequestStatus",e)}),o()(Z,"ACCEPT_REQUEST",function(t,e){R.acceptFriendRequest(x,e)}),o()(Z,"GET_PENDING_STATUS",function(t,e){x.collection("requests").doc(e.userInfo._id+e.u._id).onSnapshot(function(e){void 0!=e.data()&&t.commit("setPendingStatus",e.data())}),x.collection("requests").doc(e.u._id+e.userInfo._id).onSnapshot(function(e){void 0!=e.data()&&t.commit("setRequestStatus",e.data())})}),o()(Z,"GET_PENDING_REQUEST",function(t,e){x.collection("requests").where("target","==",e).onSnapshot(function(e){console.log(e);var n=[];e.forEach(function(t){n.push(t.data())}),t.commit("setPendingRequest",n)})}),o()(Z,c.j,function(t,e){console.log(e),R.getActiveNoti(x,e._id,function(e){t.commit("setNotify",e)},function(t){return console.log(t)})}),o()(Z,c.m,function(t,e){R.getInactiveNoti(x,e._id,function(e){t.commit("setInactiveNotify",e)},e.limit||10)}),o()(Z,c.v,function(t,e){R.notifyRead(x,e)}),Z),plugins:{}},ot=n("mvHQ"),at=n.n(ot),rt=function t(e){k()(this,t),this.groupId=Object(l.f)(),this.owner=e.members,this.createdTime=Date.now(),this.content=[],this.membersId=[e.members[0]+e.members[1],e.members[1]+e.members[0]],this.membersName=e.membersName,this.membersEmail=e.membersEmail,this.membersImg=e.membersImg},ct=function t(e){k()(this,t),this.owner=e.owner,this.createdTime=Date.now(),this.message=e.message,this.img=e.img||[],this.userImg=e.userImg,this.ownerId=e.ownerId},lt={conversations:[],unsub:[],chat1:{},chat2:{},chat3:{},chat4:{},chatList:[],images:{}},ut={getConver:function(){return lt.conversations}},dt={setChat:function(t,e){var n=null;void 0!=t.conversations[0]?(t.conversations.forEach(function(t,s){t.id==e.doc[0].id&&(n=s)}),null!==n?(s.a.set(t.conversations,n,e.doc[0]),t.unsub[n]=e.unsub):(t.conversations.push(e.doc[0]),t.unsub.push(e.unsub))):(t.conversations.push(e.doc[0]),t.unsub.push(e.unsub)),console.log(t.conversations)},addChat:function(t,e){},closeChat:function(t,e){t.conversations.splice(e,1),t.unsub.splice(e,1)},setChatList:function(t,e){console.log(e.doc),at()(t.chatList)!=at()(e.doc)&&(e.doc.forEach(function(t){if(!document.hasFocus()&&t.hasNew&&t.ownerId!=e._id){var n=t.isNotified+": "+t.content[t.content.length-1].message;Object(l.d)({body:n,icon:t.content[t.content.length-1].userImg},t.isNotified+" send you a message")}}),t.chatList=e.doc)},swapChatroom:function(t,e){var n=t.conversations[t.conversations.length-e.limit];s.a.set(t.conversations,t.conversations.length-1,t.conversations[e.i]),s.a.set(t.conversations,e.i,n);var i=t.unsub[t.unsub.length-e.limit];s.a.set(t.unsub,t.unsub.length-1,t.unsub[e.i]),s.a.set(t.unsub,e.i,i)},setUploadImage:function(t,e){t.images[e.id].push(e.url),console.log(t.images)},removeUploadImage:function(t,e){1==e.amount&&t.images[e.id].splice(e.index,1),0==e.amount&&t.images[e.id].splice(0,t.images[e.id].length)},setImageHolder:function(t,e){console.log(!t.images[e]),t.images[e]||s.a.set(t.images,e,[])}},mt=(tt={},o()(tt,c.e,function(t,e){console.log(e);var n=new rt({members:[e.u.id,e.userInfo.id],membersName:[e.u.name,e.userInfo.name],membersEmail:[e.u.email,e.userInfo.email],membersImg:[e.u.imgURL,e.userInfo.imgURL]});R.createConversation(x,n,function(n){console.log(n),t.dispatch(c.l,e.userInfo.id+e.u.id)},function(t){return console.log(t)})}),o()(tt,c.l,function(t,e){R.getConversation(x,e,function(e,n){console.log(e),t.commit("setChat",{doc:e,unsub:n})},function(t,e){console.log(t,e)})}),o()(tt,c.A,function(t,e){console.log("mes",e);var n=new ct(e);R.sendMessage(x,e._id,n,function(e){t.state.this.$forceUpdate()}),R.notifyChat(x,e._id,n.owner)}),o()(tt,c.k,function(t,e){R.getChatList(x,e.id,function(n){console.log(n),t.commit("setChatList",{doc:n,id:e._id})})}),o()(tt,c.d,function(t,e){t.commit("closeChat",e)}),o()(tt,c.c,function(t,e){R.notifyChatRead(x,e)}),o()(tt,c.B,function(t,e){t.commit("swapChatroom",e)}),o()(tt,c.F,function(t,e){t.commit("setImageHolder",e.id);var n=L.child(e.path).put(e.file);n.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+e+"% done"),t.state){case E.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case E.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){n.snapshot.ref.getDownloadURL().then(function(n){t.commit("setUploadImage",{url:n,id:e.id})})})}),o()(tt,c.x,function(t,e){1==e.amount&&L.child(e.path).delete().then(function(){t.commit("removeUploadImage",{amount:1,index:e.index,id:e.id})}).catch(function(t){return console.log(t)});0==e.amount&&t.commit("removeUploadImage",{amount:0,id:e.id})}),tt),ht={state:lt,getters:ut,mutations:dt,actions:mt,plugins:{}},ft={state:{post:[],likedPost:[]},getters:{},mutations:(et={},o()(et,"setUserPost",function(t,e){t.post=e}),o()(et,"setUserLikedPost",function(t,e){t.post=e}),et),actions:(nt={},o()(nt,c.q,function(t,e){R.getUserPost(x,O,e,function(e){t.commit("setUserPost",e)},function(t){return console.log(t)})}),o()(nt,c.o,function(t,e){R.getUserLikedPost(x,O,e,function(e){t.commit("setUserLikedPost",e)},function(t){return console.log(t)})}),nt),plugins:{}},pt={state:{},getters:{},mutations:{},actions:o()({},c.E,function(t,e){var n=L.child(e.path).put(e.file);n.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+e+"% done"),t.state){case E.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case E.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){n.snapshot.ref.getDownloadURL().then(function(t){console.log("File available at",t),R.saveProfileImage(x,e.userId,t,e.type)})})}),plugins:{}};s.a.use(u.a);var gt=new u.a.Store({modules:{postView:q,newPost:z,postComment:J,auth:it,chat:ht,userProfile:ft,profile:pt}}),vt=n("rifk"),_t=n.n(vt),yt=n("KMaP");s.a.directive("emoji",{bind:function(t,e){var n=/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D]|\s)/g,s=e.value,i=s.match(/:\w{2,}:/g),o=s.match(/(:\w+:|<[/\\]?3|[\\\D|*$][-^]?[:;=]|[:;=B8][-^]?[3DOPp@$*\\)(/|])(?=\s|[!.?]|$)/g),a=s.match(/:\W{1,}/g);null!=i&&i.forEach(function(t){yt.emojiIndex.search(t.substr(1,t.length-2)).map(function(e){s=s.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),null!=o&&o.forEach(function(t){yt.emojiIndex.search(t.trim()).map(function(e){s=s.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),null!=a&&a.forEach(function(t){yt.emojiIndex.search(t.trim()).map(function(e){s=s.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),function(t){return t.replace(new RegExp(n,"g"),"")}(s).length&&t.classList.add("message"),t.innerHTML=twemoji.parse(s,{folder:"svg",ext:".svg"})},update:function(t,e){t.getAttribute("contenteditable")&&console.log(e)}}),s.a.directive("post",{inserted:function(t){var e=t.innerText;x.collection("POSTS").where("id","==",e.trim()).get().then(function(e){console.log(e.docs[0].data());var n=e.docs[0].data();t.innerText=n.title})}}),s.a.directive("user",{inserted:function(t){var e=t.innerText;x.collection("users").where("id","==",e.trim()).get().then(function(e){console.log(e.docs[0].data());var n=e.docs[0].data();t.innerText=n.name+' <small class="text-muted">'+n.email+"</small>"})}}),s.a.filter("Emoji",function(t,e){if(!t)return"";var n=t.match(/:\w{2,}:/g),s=t.match(/(:\w+:|<[/\\]?3|[\\\D|*$][-^]?[:;=]|[:;=B8][-^]?[3DOPp@$*\\)(/|])(?=\s|[!.?]|$)/g);return null!=n&&n.forEach(function(e){yt.emojiIndex.search(e.substr(1,e.length-2)).map(function(n){t=t.replace(e,n.native)})}),null!=s&&s.forEach(function(e){yt.emojiIndex.search(e.trim()).map(function(n){t=t.replace(e,n.native)})}),t}),s.a.use(_t.a,{dynamic:!0,injectModalsContainer:!0,dialog:!0}),s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:I},router:st,store:gt,template:"<App/>"})},TQ8u:function(t,e){},X5Tk:function(t,e){},a1CX:function(t,e,n){"use strict";var s=n("Dd8w"),i=n.n(s),o=n("PJh5"),a=n.n(o),r=n("NYxO"),c=n("KMaP"),l=n("lHQJ"),u=n("yp89"),d={name:"ChatForm",components:{Picker:c.Picker},props:{user:Object,index:Number,limit:Function},data:function(){return{chat:[],minimize:!1,isMobile:!!u.e.any(),isFocus:!0,notify:0,message:"",emojiPicker:!1,emojiRegex:/:[^\s]*(?:::[^:\s]*)*[^:\s]/g,emojiRegex2:/:\w{2,}:/g,matchesEmoji:[],emo:"",images:[],canSendMessage:!0,hasImage:!1,paths:[],style:{right:u.e.any()?0:252*(this.index>=this.limit()?this.index-this.limit():this.index)+200+"px",bottom:u.e.any()?33*(this.index>=this.limit()?this.index-this.limit():this.index)+"px":"",width:u.e.any()?"100%":"","z-index":2e3-this.index}}},computed:i()({},Object(r.b)({userInfo:"userInfo",getConver:"getConver"})),watch:{getConver:function(t){var e=this;$('[data-toggle="tooltip"]').tooltip(),console.log(t),null!=this.getConver&&this.scrollChat();var n=0;this.getConver[this.index].content.slice().reverse().every(function(t){return!(t.ownerId==e.userInfo._id||!e.getConver[e.index].hasNew)&&(n++,!0)}),this.getConver[this.index].hasNew&&(this.notify=n)},message:function(t){""==t&&(this.matchesEmoji=[])},matchesEmoji:function(){this.scrollChat()},paths:function(){this.scrollChat()}},methods:{cvDate:function(t){return a()(t).calendar()},onCLick:function(t){this.unsub(),this.$emit("closeChat",t),this.$store.dispatch("CLOSE_CHAT",t)},minimizeChat:function(t){this.minimize=!this.minimize},selectEmoji:function(t){document.getElementById("chatInput").innerText+=t.colons,this.emojiPicker=!1,document.getElementById("chatInput").focus()},searchEmoji:function(t){if(this.message=document.getElementById("chatInput").innerText,this.message.length>2&&32==t.keyCode||13==t.keyCode){this.emo=this.message.match(this.emojiRegex);var e=this.emo?this.emo[this.emo.length-1].substr(1):"";e.length>1&&(this.matchesEmoji=c.emojiIndex.search(e).map(function(t){return t}),this.replaceEmoji())}},replaceEmoji:function(t){var e=document.getElementById("chatInput");if(t){this.message=e.innerHTML;var n=twemoji.parse(twemoji.convert.fromCodePoint(t.unified));e.innerHTML=this.message.replace(this.emo,n+'<div style="display: none">'+t.colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}else if(this.matchesEmoji.length){this.message=e.innerHTML;var s=twemoji.parse(twemoji.convert.fromCodePoint(this.matchesEmoji[0].unified));e.innerHTML=this.message.replace(this.emo,s+'<div style="display: none">'+this.matchesEmoji[0].colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}},pasteImage:function(t){var e=this,n=this.getConver[this.index].id;if(this.files=t.clipboardData.files,this.files.length){if(this.images.length>8)return;this.canSendMessage=!1,this.hasImage=!0;var s=this.getConver[this.index].groupId+"/"+Date.now()+this.userInfo._id+".png";this.paths.push(s),this.$store.dispatch(l.F,{file:this.files[0],path:s,id:this.getConver[this.index].id});var i=setInterval(function(){e.images=e.$store.state.chat.images[n],e.images.length&&(clearInterval(i),e.canSendMessage=!0),console.log(e.images)},200)}t.preventDefault();var o=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,o)},removeImage:function(t){this.images.splice(t,1),this.$store.dispatch(l.x,{amount:1,index:t,path:this.paths[t],id:this.getConver[this.index].groupId}),this.paths.splice(t,1),0==this.images.length&&(this.hasImage=!1)},show:function(t,e){this.$modal.show({template:'<div><div><img id="imageShow" src="'+t+'" style="width: 100%"/><button class="close" @click="$emit(\'close\')" style="position: absolute;right: 20px;top: 10px;">&times;</button></div>\n\t\t\t\t\t\t\t\t\t\t\t<div style="background-color: transparent;" class="d-flex justify-content-center mt-2">\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-for="image in images" :style="{backgroundImage: \'url(\'+image+\')\'}" @click="showImage(image)" :class="{active: active == image}" id="thumbnailImage" class="border border-dark"></div></div></div>',props:{images:Array},data:function(){return{active:t}},methods:{showImage:function(t){document.getElementById("imageShow").src!=t&&(document.getElementById("imageShow").src=t),this.active=t}},mounted:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},destroyed:function(){document.getElementsByTagName("body")[0].style.overflow=""}},{images:e},{width:"70%",height:"auto",style:{"z-index":9e3}},{closed:this.hide})},hide:function(){this.$modal.hide("view-post")},sendMessage:function(t){var e=this;if(this.emo&&this.searchEmoji(t),this.message=document.getElementById("chatInput").textContent.trim(),this.message||this.images.length&&this.canSendMessage){var n={membersId:this.userInfo.id+this.user.id,message:this.message,owner:this.userInfo.name,ownerId:this.userInfo._id,_id:this.getConver[this.index].id,userImg:this.userInfo.imgURL,img:this.images};this.$store.dispatch(l.A,n),document.getElementById("chatInput").innerHTML="",this.images=[],this.paths=[],this.hasImage=!1,setTimeout(function(){e.$forceUpdate(),e.scrollChat()},100),this.paths.length&&this.$store.dispatch(l.x,{amount:0,id:this.getConver[this.index].id})}else alert("Cant send messsage")},scrollChat:function(){var t=this;window.setTimeout(function(){var e=document.getElementById(t.user._id);e.scrollTop=e.scrollHeight},50)},setCaret:function(){var t=document.getElementById("chatInput"),e=document.createRange(),n=window.getSelection();e.setStart(t.childNodes[t.childNodes.length-1],t.childNodes[t.childNodes.length-1].length),e.collapse(!0),n.removeAllRanges(),n.addRange(e),t.focus()}},mounted:function(){var t=this;this.$store.dispatch(l.l,this.userInfo.id+this.user.id),setTimeout(function(){t.unsub=t.$store.state.chat.unsub[t.index],$('[data-toggle="tooltip"]').tooltip(),t.$forceUpdate()},500),this.setCaret(),document.addEventListener("click",function(e){var n=document.getElementById("chatbox"+t.index),s=e.target;do{if(s==n)return void(t.isFocus=!0);s=s.parentNode}while(s);t.isFocus=!1})}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-box",style:t.style,attrs:{id:"chatbox"+t.index}},[n("div",{},[n("div",{staticClass:"card shadow",staticStyle:{"max-height":"375px"}},[n("div",{staticClass:"card-header py-1 my-0 btn",class:t.isFocus?"bg-primary":"bg-light",on:{click:function(e){t.minimizeChat(t.index)}}},[n("i",{staticClass:"fas fa-circle fa-xs",class:{"text-success":t.user.status}}),t._v(" "),n("a",{class:t.isFocus?"text-white":"text-secondary"},[t._v("\n\t\t\t\t\t"+t._s(t.user.name.length>20?t.user.name.substr(0,20)+"...":t.user.name))]),t._v(" "),t.notify>0?n("small",{staticClass:"notify-count bg-danger text-white"},[t._v("\n\t\t\t\t\t"+t._s(t.notify))]):t._e(),t._v(" "),n("button",{staticClass:"close float-right",on:{click:function(e){e.stopPropagation(),t.onCLick(t.index)}}},[t._v("\n\t\t\t\t\t×\n\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"card-body",class:{minimize:t.minimize},staticStyle:{"overflow-y":"scroll"},style:{height:t.paths.length?"150px":"300px"},attrs:{id:t.user._id}},t._l(t.getConver[t.index].content,function(e){return n("div",{key:e.createdTime,staticClass:"chat-wrapper d-flex",staticStyle:{margin:"2px",width:"100%"}},[n("span",{staticClass:"py-1 px-2 small",class:[e.owner!=t.user.name?"my-chat bg-primary text-white float-right text-left ml-auto":"other-chat bg-secondary text-white mr-auto",t.user._id],staticStyle:{"max-width":"70%"},attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.cvDate(e.createdTime)}},[n("div",{directives:[{name:"emoji",rawName:"v-emoji:message",value:e.message,expression:"m.message",arg:"message"}]}),t._v(" "),e.img?n("div",{staticClass:"image-holder d-flex justify-content-around flex-wrap"},t._l(e.img,function(s,i){return n("div",{key:i,staticClass:"image-message border border-white m-1",style:{backgroundImage:"url("+s+")",cursor:"pointer"},on:{click:function(n){t.show(s,e.img)}}})})):t._e()])])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.emojiPicker,expression:"emojiPicker"}],staticClass:"emoji-picker"},[n("Picker",{style:{position:"absolute",bottom:"37px",left:"80px",width:"283px",zIndex:300},attrs:{set:"twitter",native:!1,emojiTooltip:!0,showPreview:!1},on:{select:function(e){t.selectEmoji(e)}}})],1),t._v(" "),n("div",{staticClass:"d-flex flex-column"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.matchesEmoji.length<0,expression:"matchesEmoji.length < 0"}],staticClass:"emoji-suggest bg-light border-top",staticStyle:{"overflow-y":"scroll"}},[n("ul",{staticClass:"list-inline p-2"},t._l(t.matchesEmoji,function(e){return n("li",{directives:[{name:"emoji",rawName:"v-emoji:emoji",value:e.colons,expression:"emoji.colons",arg:"emoji"}],key:e.colons,staticClass:"list-inline-item message pl-1 m-auto",staticStyle:{height:"2em"},attrs:{title:e.colons},on:{click:function(n){t.replaceEmoji(e)}}})}))]),t._v(" "),t.hasImage?n("div",{staticClass:"emoji-suggest bg-light border-top d-flex flex-wrap"},t._l(t.paths,function(e,s){return n("div",{key:s,staticClass:"uploaded-image",style:{backgroundImage:"url("+t.images[s]+")",cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.show(t.images[s])}}},[t.images[s]?n("button",{staticClass:"close bg-white",staticStyle:{width:"17px",height:"17px","line-height":"20px"},on:{click:function(e){e.stopPropagation(),t.removeImage(s)}}},[t._v("\n\t\t\t\t\t\t\t×\n\t\t\t\t\t\t")]):n("div",{staticClass:"m-auto",staticStyle:{"text-align":"center",width:"50%",height:"100%"}},[n("i",{staticClass:"m-auto fas fa-lg fa-spinner fa-spin",staticStyle:{"line-height":"60px"}})])])})):t._e(),t._v(" "),n("div",{staticClass:"border rounded-0 border-muted pr-4 message",class:{minimize:t.minimize},staticStyle:{height:"auto","overflow-y":"auto","max-height":"125px"},attrs:{contenteditable:"true",id:"chatInput"},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void t.sendMessage(e):null},function(e){t.searchEmoji(e)}],paste:function(e){t.pasteImage(e)}}}),t._v(" "),n("div",[n("a",{staticClass:"emoji-btn ml-auto",class:{minimize:t.minimize},on:{click:function(e){t.emojiPicker=!t.emojiPicker}}})])])])]),t._v(" "),n("modal",{attrs:{name:"view-post",reset:!0,adaptive:!0,delay:100}})],1)},staticRenderFns:[]};var h={name:"SideMenu",components:{ChatForm:n("VU/8")(d,m,!1,function(t){n("oFuh")},null,null).exports},data:function(){return{userList:[],userIdList:[],isLoading:!0,isMobile:!!u.e.any(),limit:function(){return window.innerWidth>720&&window.innerWidth<970?2:window.innerWidth>970&&window.innerWidth<1220?3:window.innerWidth>=1220?4:1}}},computed:i()({},Object(r.b)(["getUserList","userInfo","isPending"])),watch:{isPending:function(t){console.log(t)},getUserList:function(){var t=this;this.getUserList.forEach(function(e){t.$store.dispatch("GET_PENDING_STATUS",{u:e,userInfo:t.userInfo})}),console.log(this.getUserList)}},methods:{cvDate:function(t){return Object(u.c)(t,!0)},openChat:function(t){if(this.userList.filter(function(e){return e.id==t.id}).length){for(var e=this.limit(),n=0;n<this.userList.length-e;n++)if(this.userList[n].id==t.id){var s=this.userList[this.userList.length-e];this.$set(this.userList,this.userList.length-1,t),this.$set(this.userList,n,s),this.$store.dispatch(l.B,{i:n,limit:e});break}}else this.userList.push(t);console.log(this.userList)},addFriend:function(t){this.$store.dispatch("FRIEND_REQUEST",{u:t,userInfo:this.userInfo})},unFriend:function(t){this.$store.dispatch(l.D,{u:t,userInfo:this.userInfo})},cancelRequest:function(t){var e=this;this.$store.dispatch("CANCEL_REQUEST",{u:t,userInfo:this.userInfo}),setTimeout(function(){e.$forceUpdate()},500)},declineRequest:function(t){this.$store.dispatch("DECLINE_REQUEST",{u:t,userInfo:this.userInfo})},removeChat:function(t){this.userList.splice(t,1)},getPending:function(t){var e=this;this.$store.dispatch(l.e,{u:t,userInfo:this.userInfo}),this.isLoading=!0,this.$store.dispatch("GET_PENDING_STATUS",{u:t,userInfo:this.userInfo}),setTimeout(function(){e.isLoading=!1},500)}},mounted:function(){Object(u.h)(document.getElementById("app"),function(t){"left"==t&&(document.getElementById("userMenu").style.right=0),"right"==t&&(document.getElementById("userMenu").style.right="-200px")})}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo.email?n("div",{staticClass:"user-menu bg-light",style:{right:t.isMobile?"-200px":0},attrs:{id:"userMenu"}},[n("div",{},[n("div",{staticClass:"card shadow-sm",staticStyle:{"{position":"fixed",width:"20vw}"}},[n("div",{staticClass:"card-content"},[n("ul",{staticClass:"list-group list-group-flush"},t._l(t.getUserList,function(e){return n("li",{key:e.email,staticClass:"list-group-item dropdown dropleft"},[n("div",{attrs:{"data-toggle":"dropdown"},on:{click:function(n){t.getPending(e)}}},[n("img",{staticClass:"rounded-circle",staticStyle:{height:"2em"},attrs:{src:e.imgURL}}),t._v(" "),n("i",{staticClass:"fas fa-circle fa-xs border-white border rounded-circle",class:{"text-success":e.status},staticStyle:{transform:"translate(-100%, 90%)"}}),t._v(" "),n("a",{staticClass:"card-link",attrs:{href:"#"}},[t._v(" "+t._s(e.name)+" ")]),t._v(" "),n("small",[t._v(t._s(t.cvDate(e.lastLogedIn)))])]),t._v(" "),t.isLoading?n("div",{staticClass:"dropdown-menu"},[t._m(0,!0)]):n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(n){t.openChat(e)}}},[t._v("Chat")]),t._v(" "),e.isRequest?n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(n){t.declineRequest(e)}}},[t._v("Decline request")]):e.isPending?n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(n){t.cancelRequest(e)}}},[t._v("Cancel friend request")]):!e.isRequest&&!e.isPending&&t.userInfo.friends.indexOf(e.id)<0?n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(n){t.addFriend(e)}}},[t._v("Add friend")]):n("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(n){t.unFriend(e)}}},[t._v("Unfriend")]),t._v(" "),n("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/"+e._id+"/posts"}},[t._v("View posts")]),t._v(" "),n("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/"+e._id+"/liked"}},[t._v("View liked post")])],1)])}))])])]),t._v(" "),t._l(t.userList,function(e,s){return t.userList.length-s<=t.limit()?n("div",{key:s},[n("ChatForm",{attrs:{user:e,index:s,limit:t.limit},on:{closeChat:t.removeChat}})],1):t._e()})],2):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fas fa-spinner fa-spin text-center p-5 mx-3"})])}]};var p=n("VU/8")(h,f,!1,function(t){n("nC6s")},"data-v-e8eb6096",null);e.a=p.exports},jWVs:function(t,e){},lHQJ:function(t,e,n){"use strict";n.d(e,"f",function(){return s}),n.d(e,"h",function(){return i}),n.d(e,"w",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"t",function(){return r}),n.d(e,"G",function(){return c}),n.d(e,"H",function(){return l}),n.d(e,"y",function(){return u}),n.d(e,"I",function(){return d}),n.d(e,"p",function(){return m}),n.d(e,"u",function(){return h}),n.d(e,"e",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"A",function(){return g}),n.d(e,"z",function(){return v}),n.d(e,"s",function(){return _}),n.d(e,"a",function(){return y}),n.d(e,"D",function(){return I}),n.d(e,"j",function(){return w}),n.d(e,"m",function(){return C}),n.d(e,"v",function(){return b}),n.d(e,"n",function(){return E}),n.d(e,"o",function(){return j}),n.d(e,"q",function(){return x}),n.d(e,"k",function(){return D}),n.d(e,"d",function(){return L}),n.d(e,"c",function(){return T}),n.d(e,"i",function(){return k}),n.d(e,"r",function(){return S}),n.d(e,"C",function(){return P}),n.d(e,"B",function(){return U}),n.d(e,"b",function(){return N}),n.d(e,"E",function(){return R}),n.d(e,"F",function(){return O}),n.d(e,"x",function(){return F});var s="CREATE_NEW_POST",i="FETCH_POST_LIST",o="POST_COMMENT",a="FETCH_COMMENT",r="LIKE_POST",c="USER_LOGIN_G_AUTH",l="USER_LOGOUT_G_AUTH",u="REMOVE_USER",d="USER_ONLINE",m="GET_USER_LIST",h="LOGIN_WITH_G",f="CREATE_CONVERSATION",p="GET_CONVERSATION",g="SEND_MESSAGE",v="REPLY_COMMENT",_="LIKE_COMMENT",y="ADD_FRIEND",I="UN_FRIEND",w="GET_ACTIVE_NOTIFICATION",C="GET_INACTIVE_NOTIFICATION",b="NOTIFY_READ",E="GET_POST",j="GET_USER_LIKED_POST",x="GET_USER_POST",D="GET_CHAT_LIST",L="CLOSE_CHAT",T="CHAT_NOTIFY_READ",k="FRIEND_REQUEST",S="HIDE_POST",P="UNDO_HIDE_POST",U="SWAP_CHATROOM",N="BLOCK_USER",R="UPLOAD_IMAGE",O="UPLOAD_IMAGE_TO_CHAT",F="REMOVE_UPLOAD_IMAGE"},m9Bh:function(t,e,n){"use strict";var s=n("lHQJ"),i={name:"Reply",props:{commentID:String,parentCmt:Object,parent2CmtID:String,user:Object,postId:String,index:Number},data:function(){return{cmtId:this.commentID,prCmt:this.parentCmt,isReplied:!1,reply:""}},methods:{replyComment:function(t){this.user?this.isReplied=!this.isReplied:(this.$emit("close"),this.$router.push("/login")),console.log(this.parentCmt)},onReply:function(){if(console.log(this.reply),this.user.email){var t={commentID:this.parentCmt.commentID,parentCmtID:this.parent2CmtID||this.postId,postId:this.postId,reply:this.reply,floor:this.parentCmt.floor,user:this.user.name,userId:this.user._id,userImg:this.user.imgURL,parentCmtOwnerId:this.parentCmt.ownerId};console.log(t),this.reply.length&&this.$store.dispatch(s.z,t),this.reply="",this.isReplied=!1}else this.$emit("close"),this.$router.push("/login")},likeComment:function(){this.user?this.$store.dispatch(s.s,{commentID:this.parentCmt.commentID,parentCmtID:this.parent2CmtID,index:this.index,id:this.postId,email:this.user.email}):(this.$emit("close"),this.$router.push("/login"))}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticClass:"list-inline mx-2"},[n("li",{staticClass:"list-inline-item",on:{click:function(e){return e.stopPropagation(),t.replyComment(e)}}},[t._m(0)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isReplied,expression:"isReplied"}]},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"}],staticClass:"form-control p-2 m-2",attrs:{cols:"30",rows:"1",autofocus:""},domProps:{value:t.reply},on:{input:function(e){e.target.composing||(t.reply=e.target.value)}}}),t._v(" "),n("ul",{staticClass:"list-inline mx-2"},[n("a",{staticClass:"list-inline-item text-secondary",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),t.replyComment(e)}}},[t._v("Cancel")]),t._v(" "),n("a",{staticClass:"list-inline-item",class:{"text-secondary":!t.reply},attrs:{href:"javascript:void(0)",disabled:!t.reply},on:{click:function(e){return e.stopPropagation(),t.onReply(e)}}},[t._v("Reply")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"text-secondary",attrs:{href:"javascript:void(0)"}},[e("small",[e("i",{staticClass:"fas fa-reply"}),this._v(" Reply ")])])}]};var a=n("VU/8")(i,o,!1,function(t){n("jWVs")},null,null);e.a=a.exports},nC6s:function(t,e){},oFuh:function(t,e){},uslO:function(t,e,n){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return n(o(t))}function o(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(s)},i.resolve=o,t.exports=i,i.id="uslO"},xJsL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("lHQJ"),i={name:"Login",data:function(){return{isHome:this.$route.path}},watch:{$route:function(){this.isHome=this.$route.path}},mounted:function(){this.$store.dispatch(s.u),this.isHome=this.$route.path},computed:{userInfo:function(){return this.$store.getters.userInfo}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-form container"},["/login"!=this.isHome?e("div",{staticClass:"align-content-center",staticStyle:{"text-align":"center"}},[this._m(0)]):this._e(),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"/login"==this.isHome,expression:"isHome == '/login'"}],staticClass:"row"},[this._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"loader-7"}},[e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("form",{staticClass:"form-group col-md-4 offset-md-4 my-5"},[e("div",{staticClass:"m-2 d-flex justify-content-center",attrs:{id:"my-signin2"}})])}]};var a=n("VU/8")(i,o,!1,function(t){n("E3rV")},null,null);e.default=a.exports},yp89:function(t,e,n){"use strict";e.d=function(t,e){if("Notification"in window)if("granted"===Notification.permission){var n=new Notification(e,{body:t.body,icon:t.icon});setTimeout(n.close.bind(n),4e3),n.onclick=function(){window.focus("https://4x2939pp80.codesandbox.io/#/")}}else"denied"!==Notification.permission&&Notification.requestPermission();else alert("This browser does not support desktop notification")},e.b=function(t){return a.any()?i()(t).short():i()(t).fromNow()},e.c=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i()(t).short(e)},e.a=function(t){return i()(t).calendar()},e.f=function(){return"_"+(Math.random()*Date.now()).toString(36).replace(".","")},e.g=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.sort(function(t,s){return"like"==e?s.like.length-t.like.length:n?new Date(s[e])-new Date(t[e]):new Date(t[e])-new Date(s[e])})},n.d(e,"e",function(){return a}),e.h=function(t,e){var n,s,i,o,a,r,c=t,l=e||function(t){};c.addEventListener("touchstart",function(t){var e=t.changedTouches[0];n="none";s=e.pageX,i=e.pageY,r=(new Date).getTime()},!1),c.addEventListener("touchend",function(t){var e=t.changedTouches[0];o=e.pageX-s,a=e.pageY-i,(new Date).getTime()-r<=300&&(Math.abs(o)>=100&&Math.abs(a)<=100?n=o<0?"left":"right":Math.abs(a)>=100&&Math.abs(o)<=100&&(n=a<0?"up":"down")),l(n)},!1)};var s=n("PJh5"),i=n.n(s),o=n("EErm");n.n(o);var a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}}}},["NHnr"]);
//# sourceMappingURL=app.3c416282de0842e7d66e.js.map