webpackJsonp([8],{"/o5o":function(t,e,s){"use strict";var n=s("woOf"),i=s.n(n),o=s("Dd8w"),a=s.n(o),r=s("NYxO"),c=s("m9Bh"),l=s("lHQJ"),u=s("yp89"),d={name:"modal",components:{Reply:c.a},props:{i:Object,isMobile:null},data:function(){return{newComment:{content:""},sortType:2,commentList:[],isReplied:!0,isLiked:!1}},computed:a()({},Object(r.c)({comment:function(t){return t.postComment.comment},userInfo:function(t){return t.auth.userInfo}}),{sortTypeValue:function(){return 1==this.sortType?"Best":2==this.sortType?"New":3==this.sortType?"Old":void 0}}),watch:{comment:function(t){if(this.commentList=i()({},this.commentList,this.comment),this.commentList.comment)if(1==this.sortType){var e=Object(u.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==this.sortType){var s=Object(u.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=s}else if(3==this.sortType){var n=Object(u.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=n}this.$forceUpdate()}},methods:{cvDate:u.b,force:function(){this.$forceUpdate(),console.log(this.comment),console.log(this.commentList)},next:function(){this.$nextTick()},openImage:function(t){window.open(t,"_blank")},postComment:function(){var t=this;if(this.newComment.content){var e={id:this.i.id,content:this.newComment.content,createdTime:Date.now(),owner:this.userInfo.name,ownerId:this.userInfo._id,postOwnerId:this.i.userId,postId:this.i.id,userImg:this.userInfo.imgURL};this.$store.dispatch(l.x,e),this.newComment.content="",window.setTimeout(function(){t.commentList=t.comment},1e3)}},sortComment:function(t){if(this.sortType=t,1==t){var e=Object(u.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==t){var s=Object(u.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=s}else if(3==t){var n=Object(u.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=n}},likePost:function(t){this.userInfo.email?(this.isLiked=!this.isLiked,this.$store.dispatch(l.u,{id:t.id,user:this.userInfo._id}),this.$forceUpdate()):this.$router.push("/login")},likeComment:function(t){}},created:function(){this.$store.dispatch(l.g,this.i.id)},mounted:function(){var t=this;console.log(this.i.like.indexOf(this.userInfo._id)),this.isLiked=this.i.like.indexOf(this.userInfo._id)>=0,document.title=this.i.title,document.getElementsByTagName("body")[0].style.overflow="hidden",Object(u.h)(document.getElementById("post-modal"),function(e){console.log(e),"down"==e&&t.$emit("close")})},destroyed:function(){document.title="Noname",document.getElementsByTagName("body")[0].style.overflow=""}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-wrapper",attrs:{id:"post-modal"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("button",{staticClass:"close float-right ml-3",on:{click:function(e){return t.$emit("close")}}},[s("i",{staticClass:"fas fa-times"})]),t._v(" "),s("h5",{staticClass:"card-title"},[t._v(t._s(t.i.title))]),t._v(" "),s("small",[t._v("Posted by")]),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(t.i.owner))]),t._v(" "),s("span",{staticClass:"badge badge-light text-secondary"},[t._v(t._s(t.cvDate(t.i.createdDate)))])]),t._v(" "),s("div",{staticClass:"card-body",class:{"p-1":t.isMobile}},[s("div",{directives:[{name:"post",rawName:"v-post",value:t.i,expression:"i"}],staticClass:"card-text",class:{"p-2":t.isMobile}},[t._v(t._s(t.i.content))]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"images_holder"},[t.i.img?s("div",{staticClass:"images-preview d-flex bg-light p-2"},t._l(t.i.img,function(e,n){return s("div",{key:n,staticClass:"image_preview border mx-1 text-white p-3",staticStyle:{cursor:"pointer"},style:"background-image: url("+e+")",on:{click:function(s){return t.openImage(e)}}})}),0):t._e()]),t._v(" "),t.userInfo.name?s("div",{staticClass:"form-group p-2"},[s("label",{attrs:{for:"comment-input"}},[t._v("\n            Comment as\n            "),s("small",[t._v(t._s(t.userInfo.name))])]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"form-control",attrs:{id:"comment-input",rows:"4"},domProps:{value:t.newComment.content},on:{input:function(e){e.target.composing||t.$set(t.newComment,"content",e.target.value)}}}),t._v(" "),s("button",{staticClass:"form-control btn btn-secondary my-2",class:{disabled:!t.newComment.content},on:{click:t.postComment}},[t._v("Comment")])]):t._e(),t._v(" "),s("div",{},[s("div",{staticClass:"d-flex dropdown custom-control-inline"},[s("button",{staticClass:"btn btn-sm btn-light mr-auto mx-2",attrs:{type:"button","data-toggle":"dropdown"}},[s("code",[t._v("Sort by:")]),t._v(" "),s("span",{staticClass:"badge badge-secondary p-1"},[t._v(t._s(t.sortTypeValue))])]),t._v(" "),s("div",{staticClass:"dropdown-menu"},[s("a",{staticClass:"dropdown-item",class:{active:1==t.sortType},attrs:{href:"#"},on:{click:function(e){return t.sortComment(1)}}},[t._v("Best")]),t._v(" "),s("a",{staticClass:"dropdown-item",class:{active:2==t.sortType},attrs:{href:"#"},on:{click:function(e){return t.sortComment(2)}}},[t._v("New")]),t._v(" "),s("a",{staticClass:"dropdown-item",class:{active:3==t.sortType},attrs:{href:"#"},on:{click:function(e){return t.sortComment(3)}}},[t._v("Old")])]),t._v(" "),s("div",{staticClass:"btn-group btn-group-sm"},[s("button",{staticClass:"btn btn-light shadow-sm",class:{"text-primary":t.isLiked},attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.likePost(t.i)}}},[s("i",{staticClass:"fas fa-thumbs-up"}),t._v(" Like\n              ")])])])]),t._v(" "),s("hr"),t._v(" "),t._l(t.commentList.comment,function(e,n){return s("div",{key:e.commentID},[s("dl",{staticClass:"border-secondary border-left pl-1 ml-2"},[s("dt",[t.commentList.reply&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(e.owner))])]),t._v(" "),s("dd",[t._v("\n              "+t._s(e.content)+"\n              "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:n}}),t._v(" "),t._l(t.commentList.reply?t.commentList.reply[e.commentID]:[],function(n,i){return t.commentList.reply.length?t._e():s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+e.commentID}},[s("dt",[t.commentList.reply[n.commentID]&&t.commentList.reply[n.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+n.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(n.owner))])]),t._v(" "),s("dd",[t._v("\n                "+t._s(n.content)+"\n                "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(n.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[n.commentID],function(e,i){return s("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+n.commentID}},[s("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(e.owner))])]),t._v(" "),s("dd",[t._v("\n                  "+t._s(e.content)+"\n                  "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:n.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(n,i){return s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+e.commentID}},[s("dt",[t.commentList.reply[n.commentID]&&t.commentList.reply[n.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+n.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(n.owner))])]),t._v(" "),s("dd",[t._v("\n                    "+t._s(n.content)+"\n                    "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(n.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[n.commentID],function(e,i){return s("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+n.commentID}},[s("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(t._s(e.owner))])]),t._v(" "),s("dd",[t._v("\n                      "+t._s(e.content)+"\n                      "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:n.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:i}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(n,i){return s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+e.commentID}},[s("dt",[s("small",{staticClass:"text-primary"},[t._v(t._s(n.owner))])]),t._v(" "),s("dd",[n.mentioned?s("div",{domProps:{innerHTML:t._s(n.mentioned)}}):t._e(),t._v("\n                          "+t._s(n.content)+"\n                        "),s("small",{staticClass:"text-secondary"},[t._v("  -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:i}})],1)})],2)})],2)})],2)})],2)}),t._v(" "),s("hr")],2)])})],2)])])},staticRenderFns:[]};var h=s("VU/8")(d,m,!1,function(t){s("hbac")},null,null);e.a=h.exports},"0jdp":function(t,e){},"24D8":function(t,e){},"3pr/":function(t,e){},"8ipc":function(t,e){},AKXK:function(t,e){},C6Co:function(t,e){},F7hN:function(t,e){},Hvsy:function(t,e,s){"use strict";var n=s("kxiW"),i=s.n(n),o={apiKey:"AIzaSyA8bHknVwSCSa6rQrOTVA9E_tC08hQqn_Y",authDomain:"test-93c66.firebaseapp.com",databaseURL:"https://test-93c66.firebaseio.com",projectId:"test-93c66",storageBucket:"test-93c66.appspot.com",messagingSenderId:"615923476965"};s.d(e,"b",function(){return r}),s.d(e,"c",function(){return c});var a=i.a.initializeApp(o),r=(e.a=a.firestore(),i.a.firestore),c=i.a.storage().ref();r().settings({timestampsInSnapshots:!0})},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),i=s("rifk"),o=s.n(i),a=s("Dd8w"),r=s.n(a),c=s("lHQJ"),l=s("yp89"),u=s("NYxO"),d=s("/o5o"),m={name:"Navbar",components:{SideMenu:s("a1CX").a},data:function(){return{black:!1,isMobile:!!l.e.any(),title:document.title,count:0}},watch:{notify:function(){this.notify.length&&(document.title="("+this.notify.length+")"+this.title)},chatList:function(){var t=this;console.log(this.chatList),console.log(12321312);var e=0;this.chatList.forEach(function(s){if(s.isNotified!=t.userInfo.name&&1==s.hasNew){e++;var n=new Audio("https://facebook.design/public/sounds/Notification%201.mp3");n.preload="auto",setTimeout(function(){n.play()},250)}}),this.count=e,(0!=e||0!=this.notify.length)&&(document.title="("+(e+this.notify.length)+") "+this.title)}},computed:r()({},Object(u.c)({unsub:function(t){return t.postView.unsubPost},post:function(t){return t.postView.post},userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},chatList:function(t){return t.chat.chatList},pendingRequests:function(t){return t.auth.pendingRequests},friendNotify:function(t){return t.auth.friendNotify}})),methods:{cvDate:function(t){return Object(l.c)(t)},calendarTime:function(t){return Object(l.a)(t)},getMember:function(t){return 0==t.indexOf(this.userInfo.email)?1:0},shortenMessage:function(t){if(t.length>0)return t[t.length-1].message.length>20?t[t.length-1].message.substr(0,20)+"...":t[t.length-1].message},getChatOwner:function(t){if(t.length>0)return t[t.length-1].owner==this.userInfo.name?"You:":t[t.length-1].owner+":"},signOut:function(){this.$store.dispatch(c.A,this.userInfo)},getType:function(t){return 1==t?"mentioned you.":2==t?"replied your comment.":3==t?"comment in your post.":void 0},readChat:function(t){console.log(t),this.$store.dispatch(c.c,t.membersId[0])},notiRead:function(){document.getElementById("notify").addEventListener("scroll",this.scrollA);var t=this;setTimeout(function(){t.$store.dispatch(c.w,t.userInfo._id)},1e4)},declineRequest:function(t){this.$store.dispatch("DECLINE_REQUEST",{u:{_id:t.requester},userInfo:{_id:this.userInfo._id}})},acceptRequest:function(t){this.$store.dispatch("ACCEPT_REQUEST",t)},getFriendPost:function(){},show:function(t){var e=this;this.$store.dispatch(c.o,t),setTimeout(function(){e.$modal.show(d.a,{i:e.post,isMobile:l.e.any()},{height:"auto",width:l.e.any()?"100%":"80%",style:{"z-index":9e3},scrollable:!0},{closed:e.hide},{"before-open":e.$forceUpdate(),"before-close":e.unsub()})},200)},hide:function(){this.$modal.hide("view-post")},scrollA:function(){var t=document.getElementById("notify");if(Math.floor(t.offsetHeight+t.scrollTop)==t.scrollHeight){var e=this.userInfo;e.limit=this.inactiveNotify.length+10,this.$store.dispatch(c.n,e)}}},mounted:function(){},destroyed:function(){document.getElementById("notify").removeEventListener("scroll",this.scrollA)}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"shadow-sm navbar navbar-expand-lg navbar-light bg-light fixed-top"},[s("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Home")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[t.getUserStatus?t._e():s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1)]),t._v(" "),s("ul",{staticClass:"navbar-nav"},[t.getUserStatus?s("li",{staticClass:"nav-item notify-dropdown"},[s("div",{staticClass:"dropdown"},[s("a",{staticClass:"nav-link",class:{"text-primary":t.pendingRequests.length},attrs:{href:"#","data-toggle":"dropdown"}},[s("i",{staticClass:"fa-user-friends fas"}),t.pendingRequests.length>0?s("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.pendingRequests.length))]):t._e()]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[s("ul",{staticClass:"list-group list-group-flush",attrs:{id:"pendingRequests"}},[s("h5",{staticClass:"dropdown-header"},[t._v("Friend requests")]),t._v(" "),t._l(t.pendingRequests,function(e){return s("li",{key:e.id,staticClass:"dropdown-item list-group-item",staticStyle:{cursor:"pointer"}},[s("img",{staticClass:"px-1",staticStyle:{height:"2em"},attrs:{src:e.requesterImg,alt:""}}),t._v(" "+t._s(e.requesterName)+"\n\t\t\t\t\t\t\t\t\t"),s("div",{staticClass:"btn-group btn-group-sm"},[s("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(s){return t.acceptRequest(e)}}},[t._v("Accept")]),t._v(" "),s("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(s){return t.declineRequest(e)}}},[t._v("Decline")])])])})],2)])])]):t._e()]),t._v(" "),s("ul",{staticClass:"navbar-nav"},[t.getUserStatus?s("li",{staticClass:"nav-item notify-dropdown"},[s("div",{staticClass:"dropdown",on:{click:function(e){return t.notiRead()}}},[s("a",{staticClass:"nav-link",class:{"text-primary":t.notify.length},attrs:{href:"#","data-toggle":"dropdown"}},[s("i",{staticClass:"fa-bell",class:[t.notify.length?"fas":"far"]}),t.notify.length>0?s("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.notify.length))]):t._e()]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[s("ul",{staticClass:"list-group list-group-flush notify-chat",attrs:{id:"notify"}},[t.notify.length>0?s("h5",{staticClass:"dropdown-header"},[t._v("New")]):t._e(),t._v(" "),t._l(t.friendNotify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light",staticStyle:{cursor:"pointer"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+" rejected your friend request.\n\t\t\t\t\t\t\t\t")])}),t._v(" "),t._l(t.notify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light d-flex",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.show(e.postId)}}},[s("img",{staticClass:"px-1 m-0 rounded-circle",staticStyle:{height:"3em"},attrs:{src:e.userImg,alt:""}}),t._v(" "),s("span",{staticClass:"flex-grow-1"},[s("span",{staticClass:"text-primary"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),s("span",{staticClass:"badge badge-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])])}),t._v(" "),s("h5",{staticClass:"dropdown-header"},[t._v("Old")]),t._v(" "),t._l(t.inactiveNotify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light d-flex",on:{click:function(s){return t.show(e.postId)}}},[s("div",[s("img",{staticClass:"px-1 m-0 rounded-circle",staticStyle:{height:"3em"},attrs:{src:e.userImg,alt:""}})]),t._v(" "),s("div",{staticClass:"text-secondary flex-grow-1"},[s("span",{staticClass:"text-primary"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),s("span",{staticClass:"badge badge-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])])})],2)])])]):t._e(),t._v(" "),t.getUserStatus?s("li",{staticClass:"nav-item notify-dropdown"},[s("div",{staticClass:"dropdown"},[s("a",{staticClass:"nav-link",attrs:{href:"#","data-toggle":"dropdown"}},[s("i",{staticClass:"fa-comment",class:[t.count?"fas":"far"]}),t.count?s("small",{staticClass:"notify-count bg-danger text-white"},[t._v(t._s(t.count?t.count:""))]):t._e()]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",style:{width:t.isMobile?"95%":""}},[s("ul",{staticClass:"list-group list-group-flush notify-chat",attrs:{id:"notifyChat"}},t._l(t.chatList,function(e){return e.membersName&&e.content.length?s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light py-1 rounded px-2",class:{"bg-light":e.isNotified!=t.userInfo.name&&e.hasNew},staticStyle:{cursor:"pointer"},on:{click:function(s){return t.readChat(e)}}},[s("img",{staticClass:"px-1 float-left rounded-circle",staticStyle:{height:"3em"},attrs:{src:e.membersImg[t.getMember(e.membersEmail)]}}),t._v(" "),s("a",[s("a",{staticClass:"text-primary"},[t._v(t._s(e.membersName[t.getMember(e.membersEmail)]))]),t._v(" "),s("p",{staticClass:"mb-1 text-secondary d-flex justify-content-between",staticStyle:{"max-width":"500px"}},[t._v(t._s(t.getChatOwner(e.content))+" "+t._s(t.shortenMessage(e.content)))]),t._v(" "),s("span",{staticClass:"badge badge-light text-secondary"},[t._v(t._s(t.calendarTime(e.time)))])])]):t._e()}),0)])])]):t._e(),t._v(" "),t.getUserStatus?s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[t._v(" "+t._s(t.getUsername)+" ")]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-left"},[s("router-link",{staticClass:"dropdown-item",attrs:{to:"/profile"}},[t._v("Profile")]),t._v(" "),t.getUserStatus?s("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Sign out")]):t._e()],1)]):t._e()])])],1),t._v(" "),s("modal",{attrs:{name:"view-post"}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var g=s("VU/8")(m,h,!1,function(t){s("mptq")},"data-v-8d7cec8a",null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg-light"},[e("div",{staticClass:"p-5 m-5"})])}]};var p=s("VU/8")({name:"Footer"},f,!1,function(t){s("F7hN")},null,null).exports,v=s("yA7U"),y=s("BO1k"),w=s.n(y),I=(s("PJh5"),s("Hvsy")),b={name:"Menu",computed:r()({},Object(u.c)({userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},chatList:function(t){return t.chat.chatList},pendingRequests:function(t){return t.auth.pendingRequests},friendNotify:function(t){return t.auth.friendNotify},converList:function(t){return t.chat.converList},joinedGroupList:function(t){return t.group.joinedGroupList}})),data:function(){return{groupId:this.$route.params.id,groupChatId:"",route:"",isMobile:l.e.any(),wh:window.innerHeight+"px",newMessages:{},oldMessages:{},now:Date.now(),isNew:{},isUnread:{},newCount:0,nMessageCount:{}}},watch:{userInfo:function(t,e){},$route:function(t,e){this.groupId=t.params.id,this.route=t.name,console.log(this.route),this.isMobile&&(this.groupId||"public"==this.route||"profile"==this.route)&&(document.getElementById("listChat").style.left="-100%",document.getElementById("menu-overlay").classList.remove("menu-overlay")),this.groupId&&"group"==this.route&&($.isEmptyObject(this.newMessages)?$.isEmptyObject(this.oldMessages)||window.localStorage.setItem(this.groupId,this.oldMessages[this.groupId][0].createdTime):window.localStorage.setItem(this.groupId,this.newMessages[this.groupId][0].createdTime),this.$set(this.nMessageCount,this.groupId,0)),this.groupId&&"personal"==this.route&&($.isEmptyObject(this.newMessages)?$.isEmptyObject(this.oldMessages)||window.localStorage.setItem(this.groupId,this.oldMessages[this.groupId][0].createdTime):window.localStorage.setItem(this.groupId,this.newMessages[this.groupId][0].createdTime),this.$set(this.nMessageCount,this.groupId,0))},chatList:function(t){var e=!0,s=!1,n=void 0;try{for(var i,o=w()(t);!(e=(i=o.next()).done);e=!0){var a=i.value;this.getOldMessage(a.groupId),this.getNewMessage(a.groupId,a.groupName),this.countNewMessage(a.groupId)}}catch(t){s=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw n}}},joinedGroupList:function(t,e){"group"==this.$route.name&&t.length!=e.length&&this.$router.push("/group/"+t[t.length-1].groupId);var s=!0,n=!1,i=void 0;try{for(var o,a=w()(t);!(s=(o=a.next()).done);s=!0){var r=o.value;this.getOldMessage(r.groupId),this.getNewMessage(r.groupId,r.groupName),this.countNewMessage(r.groupId)}}catch(t){n=!0,i=t}finally{try{!s&&a.return&&a.return()}finally{if(n)throw i}}},newMessages:function(t,e){console.log(t)},newCount:function(t){document.title="("+t+") "+document.title.substring(4)},nMessageCount:function(t){console.log(t),this.$forceUpdate()}},beforeMount:function(){},mounted:function(){$("#listChat").bootstrapMaterialDesign(),Object(l.h)(document.getElementById("listChat"),function(t){"left"==t&&(document.getElementById("listChat").style.left="-100%",document.getElementById("menu-overlay").classList.remove("menu-overlay"))});var t=this;window.onfocus=function(){t.groupId&&"group"==t.route&&($.isEmptyObject(t.newMessages)?$.isEmptyObject(t.oldMessages)||window.localStorage.setItem(t.groupId,t.oldMessages[t.groupId][0].createdTime):window.localStorage.setItem(t.groupId,t.newMessages[t.groupId][0].createdTime),t.$set(t.nMessageCount,t.groupId,0)),t.groupId&&"personal"==t.route&&($.isEmptyObject(t.newMessages)?$.isEmptyObject(t.oldMessages)||window.localStorage.setItem(t.groupId,t.oldMessages[t.groupId][0].createdTime):window.localStorage.setItem(t.groupId,t.newMessages[t.groupId][0].createdTime),t.$set(t.nMessageCount,t.groupId,0))}},destroyed:function(){window.onfocus=null},methods:{getLastReadMessage:function(t){return window.localStorage.getItem(t)||0},countAllNotify:function(){var t=0;if(!$.isEmptyObject(this.nMessageCount))for(var e in this.nMessageCount)t+=this.nMessageCount[e];t&&(document.title="("+t+") HUNRE Chat")},calendarTime:l.e.any()?l.c:l.a,countNewMessage:function(t){var e=0,s=this.getLastReadMessage(t);if(this.$set(this.isNew,t,!0),!$.isEmptyObject(this.newMessages))for(var n=0;n<this.newMessages[t].length;n++)this.newMessages[t][n].ownerId!=this.userInfo._id&&this.isNew[t]&&this.newMessages[t][n].createdTime>s?e++:this.$set(this.isNew,t,!1);return this.$set(this.nMessageCount,t,e),console.log(e),e},countUnreadMessage:function(t){this.countNewMessage(t);var e=0,s=this.getLastReadMessage(t);if(this.$set(this.isUnread,t,!0),!$.isEmptyObject(this.oldMessages))for(var n=0;n<this.oldMessages[t].length;n++)this.oldMessages[t][n].ownerId!=this.userInfo._id&&this.isUnread[t]&&this.oldMessages[t][n].createdTime>s?(console.log(s,this.oldMessages[t][n]),e++):this.$set(this.isUnread,t,!1);e+=this.nMessageCount[t],this.$set(this.nMessageCount,t,e),this.$forceUpdate()},openConversation:function(t){},openMenu:function(){"-100%"==document.getElementById("listChat").style.left?(document.getElementById("menu-overlay").classList.add("menu-overlay"),document.getElementById("listChat").style.left="0"):(document.getElementById("menu-overlay").classList.remove("menu-overlay"),document.getElementById("listChat").style.left="-100%")},signOut:function(){this.$store.dispatch("REMOVE_USER",this.userInfo)},createNotify:l.d,getNewMessage:function(t,e){var s=this,n=this;console.log(t),t&&I.a.collection("message").where("groupId","==",t).where("createdTime",">",this.now).orderBy("createdTime","desc").onSnapshot(function(i){var o=[];console.log(i),i.empty?console.log({empty:!0}):(i.forEach(function(t){o.push(t.data())}),console.log(o),s.$set(s.newMessages,t,o)),n.countUnreadMessage(t),s.countAllNotify(),i.docChanges().forEach(function(s){if("added"===s.type){n.$set(n.isNew,t,!0),n.newCount++,console.log("New: ",s.doc.data());var i=s.doc.data();i.ownerId==n.userInfo._id||document.hasFocus()||(i.img.length?n.createNotify({body:i.message||"Image",icon:i.userImg||"",image:i.img[0]},i.owner+" sends you a messsage in "+e):n.createNotify({body:i.message,icon:i.userImg||""},i.owner+" sends you a messsage in "+e))}"modified"===s.type&&console.log("Modified: ",s.doc.data()),"removed"===s.type&&console.log("Removed: ",s.doc.data())})})},getOldMessage:function(t){var e=this;console.log(t),I.a.collection("message").where("groupId","==",t).where("createdTime","<",this.now).orderBy("createdTime","desc").limit(30).onSnapshot(function(s){var n=[];console.log(s),s.empty?console.log({empty:!0}):(s.forEach(function(t){n.push(t.data())}),console.log(n),e.$set(e.oldMessages,t,n),e.countUnreadMessage(t),e.countAllNotify())})}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-list col-2 bg-white p-0",class:{"hide-menu col-12":t.isMobile},style:"height: "+t.wh+";overflow-y: auto",attrs:{id:"listChat"}},[s("div",{staticClass:"container-fluid p-0"},[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark"},[t.isMobile?s("i",{staticClass:"fas fa-chevron-left fa-lg text-white",on:{click:function(e){return t.openMenu()}}}):t._e(),t._v(" "),t.getUsername?s("a",{staticClass:"navbar-brand text-info dropdown-toggle mr-auto",attrs:{role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          "+t._s(t.getUsername)+"\n      ")]):s("router-link",{staticClass:"navbar-brand text-info",attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuLink"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:"/profile"}},[t._v("Profile")]),t._v(" "),s("a",{staticClass:"dropdown-item",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.signOut()}}},[t._v("Logout")])],1)],1),t._v(" "),s("div",{attrs:{id:"accordion"}},[s("div",{staticClass:"card",staticStyle:{border:"none !important"}},[s("router-link",{staticClass:"card-header",class:["personal"==t.route?"bg-secondary text-white":"bg-dark text-secondary"],attrs:{"data-toggle":"collapse","data-target":"#collapseOne",to:"/personal"}},[s("div",{staticClass:"card-link",attrs:{"data-toggle":"collapse"}},[t._v("Personal")])]),t._v(" "),s("div",{staticClass:"collapse show",attrs:{id:"collapseOne","data-parent":"#accordion"}},[s("ul",{staticClass:"list-group card-body p-0"},t._l(t.chatList,function(e){return s("router-link",{key:e.id,staticClass:"text-secondary list-group-item d-flex justify-content-between align-items-center",class:{"bg-light":t.groupId==e.groupId},staticStyle:{"text-decoration":"none"},attrs:{to:"/personal/"+e.groupId}},[t.newMessages.hasOwnProperty(e.groupId)?s("div",{staticClass:"bmd-list-group-col m-0",staticStyle:{width:"100%"}},[s("div",{staticClass:"list-group-item-heading d-flex justify-content-between m-0"},[s("p",{staticClass:"text-dark mr-0",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.membersName[0]==t.userInfo.name?e.membersName[1]:e.membersName[0]))]),t._v(" "),s("small",{staticClass:"float-right"},[t._v(t._s(t.calendarTime(t.newMessages[e.groupId][0].createdTime)))])]),t._v(" "),s("div",{staticClass:"list-group-item-text d-flex justify-content-between"},[s("div",{staticClass:"pb-1",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.newMessages[e.groupId][0].message||"Image"))]),t._v(" "),t.nMessageCount[e.groupId]?s("span",{staticClass:"badge",class:[t.nMessageCount[e.groupId]?"badge-danger":"badge-secondary"]},[t._v(t._s(t.nMessageCount[e.groupId]))]):t._e()])]):t.oldMessages.hasOwnProperty(e.groupId)?s("div",{staticClass:"bmd-list-group-col m-0",staticStyle:{width:"100%"}},[s("div",{staticClass:"list-group-item-heading d-flex justify-content-between m-0"},[s("p",{staticClass:"text-dark mr-0",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.membersName[0]==t.userInfo.name?e.membersName[1]:e.membersName[0]))]),t._v(" "),s("small",{staticClass:"float-right"},[t._v(t._s(t.calendarTime(t.oldMessages[e.groupId][0].createdTime)))])]),t._v(" "),s("div",{staticClass:"list-group-item-text d-flex justify-content-between"},[s("div",{staticClass:"pb-1",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.oldMessages[e.groupId][0].message||"Image"))]),t._v(" "),t.nMessageCount[e.groupId]?s("span",{staticClass:"badge",class:[t.nMessageCount[e.groupId]?"badge-danger":"badge-secondary"]},[t._v(t._s(t.nMessageCount[e.groupId]))]):t._e()])]):s("div",{staticClass:"text-dark"},[t._v(t._s(e.membersName[0]==t.userInfo.name?e.membersName[1]:e.membersName[0]))])])}),1)])],1),t._v(" "),s("div",{staticClass:"card",staticStyle:{border:"none !important"}},[s("router-link",{staticClass:"card-header",class:["groups"==t.route?"bg-secondary text-white":"bg-dark text-secondary"],attrs:{"data-toggle":"collapse","data-target":"#collapseTwo",to:"/group"}},[s("div",{staticClass:"collapsed card-link"},[t._v("Group")])]),t._v(" "),s("div",{staticClass:"collapse",attrs:{id:"collapseTwo","data-parent":"#accordion"}},[s("ul",{staticClass:"list-group card-body p-0"},t._l(t.joinedGroupList,function(e){return s("a",{key:e.groupId},[s("router-link",{staticClass:"text-secondary list-group-item d-flex justify-content-between align-items-center",class:{"bg-light":t.groupId==e.groupId},staticStyle:{"text-decoration":"none"},attrs:{to:"/group/"+e.groupId}},[t.newMessages.hasOwnProperty(e.groupId)?s("div",{staticClass:"bmd-list-group-col m-0",staticStyle:{width:"100%"}},[s("div",{staticClass:"list-group-item-heading d-flex justify-content-between m-0"},[s("p",{staticClass:"text-dark mr-0",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.groupName))]),t._v(" "),s("small",{staticClass:"float-right"},[t._v(t._s(t.calendarTime(t.newMessages[e.groupId][0].createdTime)))])]),t._v(" "),s("div",{staticClass:"list-group-item-text d-flex justify-content-between"},[s("div",{staticClass:"pb-1",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.newMessages[e.groupId][0].owner)+": "+t._s(t.newMessages[e.groupId][0].message||"Image"))]),t._v(" "),t.nMessageCount[e.groupId]?s("span",{staticClass:"badge",class:[t.nMessageCount[e.groupId]?"badge-danger":"badge-secondary"]},[t._v(t._s(t.nMessageCount[e.groupId]))]):t._e()])]):t.oldMessages.hasOwnProperty(e.groupId)?s("div",{staticClass:"bmd-list-group-col m-0",staticStyle:{width:"100%"}},[s("div",{staticClass:"list-group-item-heading d-flex justify-content-between m-0"},[s("p",{staticClass:"text-dark mr-0",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.groupName))]),t._v(" "),s("small",{staticClass:"float-right"},[t._v(t._s(t.calendarTime(t.oldMessages[e.groupId][0].createdTime)))])]),t._v(" "),s("div",{staticClass:"list-group-item-text d-flex justify-content-between"},[s("div",{staticClass:"pb-1",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.oldMessages[e.groupId][0].owner)+": "+t._s(t.oldMessages[e.groupId][0].message||"Image"))]),t._v(" "),t.nMessageCount[e.groupId]?s("span",{staticClass:"badge",class:[t.nMessageCount[e.groupId]?"badge-danger":"badge-secondary"]},[t._v(t._s(t.nMessageCount[e.groupId]))]):t._e()])]):s("div",{staticClass:"text-dark"},[t._v(t._s(e.groupName))])])],1)}),0)])],1),t._v(" "),s("div",{staticClass:"card",staticStyle:{border:"none !important",width:"100%"}},[s("router-link",{staticClass:"card-header",class:["public"==t.route?"bg-secondary text-white":"bg-dark text-secondary"],attrs:{"data-toggle":"collapse","data-target":"#collapseThree",to:"/public"}},[s("div",{staticClass:"collapsed card-link"},[t._v("Public")])]),t._v(" "),s("div",{staticClass:"collapse",attrs:{id:"collapseThree","data-parent":"#accordion"}})],1)])])])},staticRenderFns:[]};var C=s("VU/8")(b,_,!1,function(t){s("clFa")},"data-v-76dd8be4",null).exports,x=s("yJ2L"),E=s("bOdI"),M=s.n(E),L=s("Qfbh"),S={name:"GroupSetup",props:{group:Object,userInfo:Object},data:function(){return{inviteCodeTooltip:"copy",changeGroupNameAlert:"",typingInterval:1e3,typingTimer:null}},methods:{setTimer:function(){clearTimeout(this.typingTimer),this.typingTimer=setTimeout(this.changeGroupName,this.typingInterval)},clearTimer:function(){clearTimeout(this.typingTimer)},copyInviteCode:function(){var t=this;document.getElementById("inviteCode").select(),document.execCommand("copy"),this.inviteCodeTooltip="Copied",setTimeout(function(){t.inviteCodeTooltip="copy"},5e3),$('[data-toggle="tooltip"]').tooltip()},changeGroupName:function(){var t=this,e=this.group.groupId,s=this.group.groupName;I.a.collection("groups").where("groupId","==",e).get().then(function(e){if(console.log(e),!e.empty){var n=e.docs[0].id;I.a.collection("groups").doc(n).set({groupName:s},{merge:!0}).then(function(e){console.log(e),t.changeGroupNameAlert="Group name changed"})}})}},mounted:function(){$('[data-toggle="tooltip"]').tooltip(),$("#groupSetup").bootstrapMaterialDesign(),console.log(this.group)}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"groupSetup"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("\n      GROUP OVERVIEW\n    ")]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"groupName"}},[t._v("GROUP NAME")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.group.groupName,expression:"group.groupName"}],staticClass:"form-control",attrs:{type:"text",id:"groupName"},domProps:{value:t.group.groupName},on:{keyup:function(e){return t.setTimer()},keydown:function(e){return t.clearTimer()},input:function(e){e.target.composing||t.$set(t.group,"groupName",e.target.value)}}}),t._v(" "),s("div",{staticClass:"small bg-success"},[t._v(t._s(t.changeGroupNameAlert))])]),t._v(" "),s("div",{staticClass:"input-group mb-3"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"inviteCode"}},[t._v("INVITE CODE")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.group.inviteCode,expression:"group.inviteCode"}],staticClass:"form-control px-2",staticStyle:{cursor:"pointer"},attrs:{type:"text",id:"inviteCode",readonly:""},domProps:{value:t.group.inviteCode},on:{input:function(e){e.target.composing||t.$set(t.group,"inviteCode",e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.copyInviteCode()}}},[t._v(t._s(t.inviteCodeTooltip))])])])])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row"},[t.userInfo._id==t.group.ownerId?s("button",{staticClass:"btn btn-danger mx-auto",on:{click:function(e){return t.deleteGroup()}}},[t._v("DELETE GROUP")]):t._e()])]),t._v(" "),s("div",{staticClass:"card-footer"})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-6 "},[e("div",{staticClass:"rounded-circle border mx-auto",staticStyle:{height:"100px",width:"100px"}}),this._v(" "),e("button",{staticClass:"btn btn-outline-secondary d-flex mx-auto my-2"},[this._v("Upload image")])])}]};var T=s("VU/8")(S,j,!1,function(t){s("racV")},null,null).exports,k={name:"PersonalSetup",props:{group:Object,userInfo:Object,id:String},created:function(){console.log(this.group,this.userInfo,this.id)}},U={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var N=s("VU/8")(k,U,!1,function(t){s("tJcZ")},null,null).exports,D={name:"Nav",data:function(){return{current:"",nav:this.$route.name,hasId:this.$route.params.id,group:{},isMobile:!!l.e.any(),title:document.title}},computed:r()({},Object(u.c)({unsub:function(t){return t.postView.unsubPost},post:function(t){return t.postView.post},userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},chatList:function(t){return t.chat.chatList},pendingRequests:function(t){return t.auth.pendingRequests},friendNotify:function(t){return t.auth.friendNotify},converList:function(t){return t.chat.converList},joinedGroupList:function(t){return t.group.joinedGroupList}})),watch:{notify:function(){this.notify.length&&(document.title="("+this.notify.length+")"+this.title)},$route:function(t){if(this.current="",this.nav=t.name,this.hasId=t.params.id,"personal"==t.name)try{this.group=this.chatList.filter(function(e){return e.groupId==t.params.id})[0]||{},this.current=this.group.membersName[0]!=this.userInfo.name?this.group.membersName[0]:this.group.membersName[1]}catch(t){}"group"==t.name&&(this.hasId=t.params.id,this.group=this.joinedGroupList.filter(function(e){return e.groupId==t.params.id})[0]||{},this.current=this.group.groupName,console.log(this.joinedGroupList)),document.title=this.current||"Home"},chatList:function(){var t=this;console.log(this.chatList),console.log(12321312);var e=0;this.chatList.forEach(function(s){if(s.isNotified!=t.userInfo.name&&1==s.hasNew){e++;var n=new Audio("https://facebook.design/public/sounds/Notification%201.mp3");n.preload="auto",setTimeout(function(){n.play()},250)}}),this.count=e,0==e&&0==this.notify.length||(document.title="("+(e+this.notify.length)+") "+this.title)}},methods:M()({cvDate:l.c,getInviteCode:function(){if("group"==this.nav){var t=this.group.inviteCode;console.log(t),this.$modal.show("dialog",{title:"Invite friend",text:'<div class="input-group">\n\t\t\t\t\t\t\t\t\t<input type="text" value="'+t+'" id="sharedLink" class="form-control" readonly>\n\t\t\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-secondary" onclick="(function(){\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'sharedLink\').select();\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\'alert\').classList.remove(\'text-hide\');\n\t\t\t\t\t\t\t\t\t\t\tdocument.execCommand(\'copy\');\n\t\t\t\t\t\t\t\t\t\t})(); return false;"><i class="fas fa-copy"></i></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="alert alert-success my-1 p-1 text-center text-hide" id="alert">\n\t\t\t\t\t\t\t\t\tLink has been copied to clipboard\n                </div>',buttons:[{title:"CLOSE"}]})}},groupSetup:function(){console.log(this.group,this.userInfo),this.$modal.show(T,{group:this.group,userInfo:this.userInfo},{height:"auto",width:this.isMobile?"100%":"50%",style:{"z-index":9e3},scrollable:!0,classes:"all-modal"},{closed:this.hide})},openSetting:function(){console.log(this.hasId,this.group),this.$modal.show(N,{group:this.group,userInfo:this.userInfo,id:this.hasId},{height:"auto",width:this.isMobile?"100%":"50%",style:{"z-index":9e3},scrollable:!0,classes:"all-modal"},{closed:this.hide})},hide:function(){this.$modal.hide("view-post"),history.pushState(null,"","/")},openMenu:function(){"-100%"==document.getElementById("listChat").style.left?(document.getElementById("menu-overlay").classList.add("menu-overlay"),document.getElementById("listChat").style.left="0"):(document.getElementById("menu-overlay").classList.remove("menu-overlay"),document.getElementById("listChat").style.left="-100%")},openUserList:function(){"-100%"==document.getElementById("userList").style.right?document.getElementById("userList").style.right="0":document.getElementById("userList").style.right="-100%"},leaveConversation:function(){var t=this;this.$modal.show("dialog",{title:"Leave Conversation",text:"Do you want to leave this conversation ?",buttons:[{title:"<button class='btn btn-warning'>CONFIRM</button>",handler:function(){t.$store.dispatch("leaveConversation",{uid:t.userInfo.id,groupId:t.group.groupId}).then(function(){t.$modal.hide("dialog"),t.$router.push("/personal"),t.current=t.$route.name})}},{title:"CANCEL"}]})},getType:function(t){return 1==t?"mentioned you.":2==t?"replied your comment.":3==t?"comment in your post.":void 0},notiRead:function(){document.getElementById("notify").addEventListener("scroll",this.scrollA);this.$store.dispatch(c.w,this.userInfo._id)},scrollA:function(){var t=document.getElementById("notify");if(Math.floor(t.offsetHeight+t.scrollTop)==t.scrollHeight){var e=this.userInfo;e.limit=this.inactiveNotify.length+10,this.$store.dispatch(c.n,e)}},show:function(t){var e=this;this.$store.dispatch(c.o,t),setTimeout(function(){e.$modal.show(d.a,{i:e.post,isMobile:l.e.any()},{height:"auto",width:l.e.any()?"100%":"80%",style:{"z-index":9e3},scrollable:!0},{closed:e.hide},{"before-open":e.$forceUpdate(),"before-close":e.unsub()})},200)}},"hide",function(){this.$modal.hide("view-post")}),destroyed:function(){document.getElementById("notify").removeEventListener("scroll",this.scrollA)}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark fixed-top",class:{" offset-2":!t.isMobile}},[t.isMobile?s("i",{staticClass:"fas fa-chevron-left fa-lg text-white",on:{click:function(e){return t.openMenu()}}}):t._e(),t._v(" "),s("a",{staticClass:"navbar-brand text-white m-0",class:{"nav-mobile":t.isMobile},staticStyle:{"text-transform":"capitalize"}},[t._v("  "+t._s(t.current||t.$route.name))]),t._v(" "),s("ul",{staticClass:"nav ml-auto"},["group"==t.nav&&t.hasId?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.getInviteCode()}}},[s("i",{staticClass:"fas fa-user-plus text-white"})])]):t._e(),t._v(" "),"group"==t.nav&&t.hasId?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.groupSetup()}}},[s("i",{staticClass:"fas fa-cog text-white"})])]):t._e(),t._v(" "),"group"==t.nav&&t.hasId&&t.isMobile?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.openUserList()}}},[s("i",{staticClass:"fas fa-user-friends text-white"})])]):t._e(),t._v(" "),"personal"==t.nav&&t.hasId?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.leaveConversation()}}},[s("i",{staticClass:"fas fa-sign-out-alt text-white"})])]):t._e(),t._v(" "),"personal"==t.nav&&t.hasId?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.openSetting()}}},[s("i",{staticClass:"fas fa-cog text-white"})])]):t._e(),t._v(" "),s("li",{staticClass:"nav-item notify-dropdown"},[s("div",{staticClass:"dropdown"},[s("a",{staticClass:"nav-link text-white",attrs:{href:"javascript:void(0)","data-toggle":"dropdown"},on:{click:function(e){return t.notiRead()}}},[s("i",{staticClass:"fa-bell fa-lg",class:[t.notify.length?"fas":"far"]}),t.notify.length?s("small",{staticClass:"notify-count border-dark bg-danger text-white rounded-circle"},[t._v(t._s(t.notify.length>99?"99+":t.notify.length))]):t._e()]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right p-0",staticStyle:{left:"-350px","max-width":"100vw"}},[s("ul",{staticClass:"list-group list-group-flush notify-chat",attrs:{id:"notify"}},[t.notify.length>0?s("h5",{staticClass:"dropdown-header"},[t._v("New")]):t._e(),t._v(" "),t._l(t.friendNotify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light",staticStyle:{cursor:"pointer"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+" rejected your friend request.\n\t\t\t\t\t\t\t\t\t")])}),t._v(" "),t._l(t.notify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light d-flex",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.show(e.postId)}}},[s("div",{staticClass:"m-0"},[s("img",{staticClass:"px-1 m-0 rounded-circle",staticStyle:{"max-height":"3em",width:"3em","object-fit":"contain"},attrs:{src:e.userImg,alt:""}})]),t._v(" "),s("div",{staticClass:"flex-grow-1",staticStyle:{width:"calc(100% - 3em)"}},[s("span",{staticClass:"text-primary m-0"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),s("span",{staticClass:"badge badge-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])])}),t._v(" "),s("h5",{staticClass:"dropdown-header"},[t._v("Old")]),t._v(" "),t._l(t.inactiveNotify,function(e){return s("li",{key:e.id,staticClass:"list-group-item list-group-item-action list-group-item-light d-flex",on:{click:function(s){return t.show(e.postId)}}},[s("div",{staticClass:"m-0"},[s("img",{staticClass:"px-1 m-0 rounded-circle",staticStyle:{"max-height":"3em",width:"3em","object-fit":"contain"},attrs:{src:e.userImg,alt:""}})]),t._v(" "),s("div",{staticClass:"text-secondary flex-grow-1",staticStyle:{width:"calc(100% - 3em)"}},[s("span",{staticClass:"text-primary m-0"},[t._v(t._s(e.user)+" ")]),t._v(" "+t._s(t.getType(e.type))+" "),s("span",{staticClass:"badge badge-light"},[t._v(" "+t._s(t.cvDate(e.createdTime)))])])])})],2)])])])])])])},staticRenderFns:[]};var R=s("VU/8")(D,O,!1,function(t){s("24D8")},null,null).exports,P={name:"ChatMessagePanel",computed:Object(u.c)({post:function(t){return t.postView.postList},userInfo:function(t){return t.auth.userInfo},unsub:function(t){return t.postView.unsub},limit:function(t){return t.postView.limit}}),components:{Message:x.default,Nav:R},data:function(){return{isPostView:this.$route.name,lastFetch:0,isMobile:l.e.any(),t:0}},watch:{$route:function(){this.isPostView=this.$route.name}},mounted:function(){},methods:{top:function(){$(".chat-content").scrollTop(0)},scrollA:function(t){this.t=$(".chat-content").scrollTop();var e=Date.now(),s=this.post[this.post.length-1].createdDate;Math.ceil(t.target.scrollTop+t.target.offsetHeight)==t.target.scrollHeight&&e-this.lastFetch>500&&(this.lastFetch=e,this.unsub(),this.$store.dispatch("FETCH_POST_LIST",{date:s,operator:"<",limit:+this.limit+10}),this.$forceUpdate())}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-0 border-left",class:[{"chat-content":"public"==t.isPostView},{"col-10 bg-light ":!t.isMobile}],staticStyle:{top:"56px",width:"100%"},style:t.isMobile?"position: absolute":"",on:{scroll:t.scrollA}},[s("Nav"),t._v(" "),s("router-view"),t._v(" "),t.t?s("button",{staticClass:"btn btn-flat",staticStyle:{position:"fixed",bottom:"30px",right:"20px"},on:{click:function(e){return t.top()}}},[s("i",{staticClass:"fas fa-arrow-up"})]):t._e()],1)},staticRenderFns:[]};var A=s("VU/8")(P,F,!1,function(t){s("wsFT")},null,null).exports,B={name:"Home",components:{Navbar:g,Footer:p,Login:v.default,Menu:C,ChatMessagePanel:A},data:function(){return{lastFetch:0,isHome:this.$route.path}},computed:Object(u.c)({post:function(t){return t.postView.postList},userInfo:function(t){return t.auth.userInfo},unsub:function(t){return t.postView.unsub},limit:function(t){return t.postView.limit}}),watch:{$route:function(){"/"!=this.$route.path&&window.removeEventListener("scroll",this.scrollA)},userInfo:function(){this.$store.dispatch("getAllUserWithConversation",this.userInfo.id),this.$store.dispatch("getAllJoinedGroup",this.userInfo._id)}},methods:{scrollA:function(t){var e=Date.now(),s=this.post[this.post.length-1].createdDate;Math.ceil(document.documentElement.scrollTop+window.innerHeight)==document.documentElement.offsetHeight&&e-this.lastFetch>500&&(this.lastFetch=e,this.unsub(),this.$store.dispatch(c.h,{date:s,operator:"<",limit:+this.limit+10}),this.$forceUpdate())},removeUser:function(t){this.$store.dispatch(c.A,this.userInfo)},hide:function(){document.getElementById("listChat").style.left="-100%",document.getElementById("menu-overlay").classList.remove("menu-overlay")}},mounted:function(){window.addEventListener("scroll",this.scrollA),window.addEventListener("unload",this.removeUser),console.log(this.userInfo)},destroyed:function(){}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.userInfo.name?s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row home"},[s("div",{staticStyle:{transition:"all 0.5s ease"},attrs:{id:"menu-overlay"},on:{click:function(e){return t.hide()}}}),t._v(" "),s("Menu"),t._v(" "),s("ChatMessagePanel")],1)]):s("Login")},staticRenderFns:[]};var z={name:"App",components:{Home:s("VU/8")(B,G,!1,function(t){s("AKXK")},null,null).exports},methods:{setCaret:function(){var t=document.getElementById("comment"),e=document.createRange(),s=window.getSelection();t&&""!=t.innerHTML?(e.setStart(t.childNodes[t.childNodes.length-1],t.childNodes[t.childNodes.length-1].length),e.collapse(!0),s.removeAllRanges(),s.addRange(e),t.focus()):t.focus()}},mounted:function(){var t=this;Object(l.h)(document.body,function(t){"right"==t&&"0px"!=document.getElementById("listChat").style.left&&(document.getElementById("listChat").style.left="0")}),window.addEventListener("keypress",function(){document.getElementById("comment")&&t.setCaret()})}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Home"),this._v(" "),e("modal",{attrs:{name:"view-post"}}),this._v(" "),e("modals-container"),this._v(" "),e("v-dialog")],1)},staticRenderFns:[]};var q,V,Q,J,K=s("VU/8")(z,H,!1,function(t){s("dUFT")},null,null).exports,W=s("woOf"),Y=s.n(W),X="POSTS",Z={postList:[],unsub:Object,limit:null,post:{},unsubPost:Function},tt={post:function(){return Z.postList}},et=(q={},M()(q,"setStatePost",function(t,e){t.postList=e.n,t.unsub=e.u,t.limit=e.l}),M()(q,"modStatePost",function(t,e){Y()(t.postList[e.index],e.mod)}),M()(q,"delStatePost",function(t,e){t.postList.splice(e,1)}),M()(q,"setPost",function(t,e){t.post=e.doc,t.unsubPost=e.unsub}),q),st=(V={},M()(V,c.h,function(t,e){e.date||(e.date=Date.now()),L.a.fetchPosts(X,"createdDate",I.a,function(e,s,n){console.log(e),t.commit("setStatePost",{n:e,u:s,l:n})},function(e,s){t.commit("modStatePost",{mod:e,index:s})},function(t){},function(t){},"asc",e.date,e.operator,e.limit,e.name)}),M()(V,c.o,function(t,e){L.a.getPost(I.a,X,e,function(e,s){t.commit("setPost",{doc:e,unsub:s})})}),M()(V,c.s,function(t,e){L.a.hidePost(I.a,"POSTS",e.id,e.userId)}),M()(V,c.E,function(t,e){L.a.undoHidePost(I.a,"POSTS",e.id,e.userId)}),M()(V,c.b,function(t,e){L.a.blockUser(I.a,"users",e)}),M()(V,"UNBLOCK_USER",function(t,e){L.a.unblockUser(I.a,"users",e)}),M()(V,c.u,function(t,e){L.a.likePost(X,I.a,e.id,e.user,function(t){return console.log(t)},function(t){return console.log(t)})}),M()(V,"DELETE_POST",function(t,e){I.a.collection("POSTS").doc(e).delete().then(function(){$.snackbar({content:"<span class='text-success text-center'>Post deleted</span>",style:"snackbar",timeout:3e3})})}),V),nt={state:Z,getters:tt,mutations:et,actions:st,plugins:{}},it=s("kxiW"),ot=s.n(it),at=s("Zrlr"),rt=s.n(at),ct=function t(e){rt()(this,t),this.id=Object(l.f)(),this.createdDate=Date.now(),this.owner=e.owner,this.ownerEmail=e.ownerEmail,this.userId=e.userId,this.title=e.title,this.content=e.content,this.comment=[],this.like=[],this.img=e.img||{},this.tag=e.tag||[],this.flair=e.flair||[],this.reply=null},lt={state:{imgURL:{},img:[],imageProgress:{}},getters:{},mutations:{setProgress:function(t,e){n.a.set(t.imageProgress,e.name,e.progress)},setUploadImageNewPost:function(t,e){t.img.push(e),n.a.set(t.imgURL,e.id,e.url)},reset:function(t){t.imageProgress={},t.imgURL={}}},actions:(Q={},M()(Q,c.f,function(t,e){if(e.newPost.title.toString().trim().length){var s={content:e.newPost.content.toString().trim(),title:e.newPost.title.toString().trim(),owner:e.user.name,ownerEmail:e.user.email,userId:e.user._id,img:e.newPost.img},n=new ct(s);L.a.createPost(X,n,I.a,function(e){console.log(e),t.commit("reset")},function(t){return console.log(t)})}}),M()(Q,"RESET_IMAGE",function(t){t.commit("reset")}),M()(Q,"UPLOAD_POST_IMAGE",function(t,e){var s=I.c.child(e.path).put(e.file);s.on("state_changed",function(s){var n=s.bytesTransferred/s.totalBytes*100;switch(console.log("Upload is "+n+"% done"),t.commit("setProgress",{progress:n,name:e.file.id}),s.state){case ot.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case ot.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(s){console.log(s),t.commit("setUploadImageNewPost",{url:s,id:e.file.id})})})}),Q),plugins:{}},ut=function t(e){rt()(this,t),this.commentID=Object(l.f)(),this.owner=e.owner,this.ownerId=e.ownerId,this.createdTime=Date.now(),this.like=[],this.content=e.content,this.reply=[],e.mentioned&&(this.mentioned=e.mentioned),this.floor=e.floor?e.floor:0},dt=function t(e){rt()(this,t),this.id=Object(l.f)(),this.createdTime=Date.now(),this.user=e.user,this.userId=e.userId,this.userImg=e.userImg,this.ownerId=e.ownerId,1==e.type&&(this.content="mentioned you."),2==e.type&&(this.content="replied your comment."),3==e.type&&(this.content="comment in your post."),this.isActive=!0,this.type=e.type,this.postId=e.postId,this.parentCmtID=e.parentCmtID,this.commentID=e.commentID},mt={comment:[],order:{}},ht={comment:function(){return mt.comment}},gt=M()({},"setModalComment",function(t,e){t.comment=e;var s={};e&&(e.comment.forEach(function(t,e){s[t.commentID]=e}),t.order=s)}),ft=(J={},M()(J,c.x,function(t,e){var s=new ut(e);if(L.a.postComment(X,I.a,e.id,s,function(){console.log("update success")},function(t){return console.log(t)}),console.log(e),e.ownerId!=e.postOwnerId){var n=new dt({user:e.owner,userId:e.ownerId,type:3,ownerId:e.postOwnerId,postId:e.postId,parentCmtID:"",commentID:"",userImg:e.userImg});console.log(n),L.a.notifyUser(I.a,n)}}),M()(J,c.B,function(t,e){var s={};if(4==e.floor){var n='<a class="text-primary">@'+e.owner+"</a>";s=new ut({owner:e.user,ownerId:e.userId,content:e.reply,floor:e.floor,mentioned:n}),L.a.replyComment(I.a,X,e.postId,e.parentCmtID,s)}else s=new ut({owner:e.user,ownerId:e.userId,content:e.reply,floor:e.floor+1}),L.a.replyComment(I.a,X,e.postId,e.commentID,s);if(console.log(e),e.userId!=e.parentCmtOwnerId){var i=new dt({user:e.user,userId:e.userId,type:2,ownerId:e.parentCmtOwnerId,postId:e.postId,parentCmtID:e.parentCmtID,commentID:e.commentID,userImg:e.userImg});console.log(i),L.a.notifyUser(I.a,i)}}),M()(J,c.t,function(t,e){console.log(e),L.a.likeComment(I.a,X,e.id,e.commentID,e.email,e.parentCmtID,e.index)}),M()(J,c.g,function(t,e){console.log(e),L.a.getPostComment(X,I.a,e,function(e){t.commit("setModalComment",e),console.log(e)},function(t){return console.log(t)})}),J),pt={state:mt,getters:ht,mutations:gt,actions:ft,plugins:{}},vt=s("/ocq");n.a.use(vt.a);var yt,wt,It,bt,_t,Ct=new vt.a({routes:[{name:"home",path:"/",component:function(){return s.e(0).then(s.bind(null,"Qfom"))}},{name:"personal",path:"/personal",component:function(){return s.e(0).then(s.bind(null,"Qfom"))}},{name:"personal",path:"/personal/:id",component:function(){return new Promise(function(t){t()}).then(s.bind(null,"yJ2L"))},props:!0},{name:"groups",path:"/group",component:function(){return s.e(4).then(s.bind(null,"+Nub"))}},{name:"group",path:"/group/:id",component:function(){return s.e(3).then(s.bind(null,"FbxS"))},props:!0},{name:"public",path:"/public",component:function(){return s.e(2).then(s.bind(null,"US8T"))}},{name:"login",path:"/login",component:function(){return new Promise(function(t){t()}).then(s.bind(null,"yA7U"))},beforeEnter:function(t,e,s){var n=$t.getters.userInfo.name;console.log(n),s()}},{name:"post",path:"/posts/:postId/:title",component:function(){return s.e(6).then(s.bind(null,"6wEh"))}},{name:"join",path:"/join/:inviteCode",component:function(){return s.e(5).then(s.bind(null,"cjnO"))}},{name:"profile",path:"/profile",component:function(){return s.e(1).then(s.bind(null,"o9cx"))},beforeEnter:function(t,e,s){var n=$t.getters.userInfo.name;console.log(n),n?s():s("/")}},{name:"userprofile",path:"/profile/:id",component:function(){return s.e(1).then(s.bind(null,"o9cx"))},props:!0}]}),xt={state:{user:"",userInfo:{name:"",email:"",status:"",imgURL:""},userList:[],notify:[],inactiveNoti:[],isPending:!1,pendingRequests:[]},getters:{isSigned:function(){return JSON.parse(localStorage.getItem("signed"))},userInfo:function(t){return t.userInfo},getUserList:function(t){return t.userList},isPending:function(t){return t.isPending}},mutations:(yt={},M()(yt,"setUser",function(t,e){e.status=!0,t.userInfo=e}),M()(yt,"unsetUser",function(t){t.userInfo={}}),M()(yt,"setUserList",function(t,e){t.userList=e}),M()(yt,"setNotify",function(t,e){t.notify=e||[],e.forEach(function(t){var s=t.user+" "+t.content;Object(l.d)({body:s,icon:e.imgURL},"Notice")})}),M()(yt,"setInactiveNotify",function(t,e){t.inactiveNoti=e||[]}),M()(yt,"setPendingStatus",function(t,e){t.userList.forEach(function(s,n){s._id==e.target&&(t.userList[n].isPending=!0)}),console.log(t.userList)}),M()(yt,"setRequestStatus",function(t,e){t.userList.forEach(function(s,n){s._id==e.requester&&(t.userList[n].isRequest=!0)})}),M()(yt,"unsetPendingStatus",function(t,e){t.userList.forEach(function(s,n){s._id==e.u._id&&(t.userList[n].isPending=!1)}),console.log(t.userList)}),M()(yt,"unsetRequestStatus",function(t,e){t.userList.forEach(function(s,n){s._id==e.userInfo._id&&(t.userList[n].isRequest=!1)}),console.log(t.userList)}),M()(yt,"setPendingRequest",function(t,e){t.pendingRequests=e}),yt),actions:(wt={},M()(wt,c.I,function(t,e){localStorage.setItem("signed",!0),L.a.searchQuery("users","email","==",e.email,I.a,function(e){e.length&&(t.commit("setUser",e[0]),t.dispatch(c.k,e[0]),t.dispatch(c.n,e[0]),t.dispatch(c.l,e[0]),t.dispatch("GET_PENDING_REQUEST",e[0]._id))},function(t){return console.log(t)},"name"),t.dispatch(c.K,e),t.dispatch(c.q,e),"/login"==Ct.currentRoute.path&&Ct.push("/")}),M()(wt,c.J,function(t){console.log(this.isSigned),gapi.auth2.getAuthInstance().signOut().then(function(){t.commit("unsetUser"),window.location="/",console.log("User signed out."),localStorage.setItem("signed",!1)})}),M()(wt,c.A,function(t,e){L.a.userOffline(I.a,e.email,function(){t.dispatch(c.J)})}),M()(wt,c.K,function(t,e){L.a.userOnline(I.a,e.email)}),M()(wt,c.q,function(t,e){L.a.getUserList(I.a,e,function(e){t.commit("setUserList",e)},function(t){return console.log(t)})}),M()(wt,c.v,function(t){gapi.signin2.render("my-signin2",{scope:"profile email",width:240,height:50,longtitle:!0,theme:"dark",onsuccess:function(e){var s=e.getBasicProfile(),n={name:s.getName(),imgURL:s.getImageUrl(),email:s.getEmail(),status:!0};t.dispatch(c.I,n)},onfailure:function(t){console.log(t)}})}),M()(wt,c.a,function(t,e){L.a.addFriend(I.a,"users",e,function(t){})}),M()(wt,c.F,function(t,e){L.a.unFriend(I.a,"users",e,function(t){})}),M()(wt,c.j,function(t,e){I.a.collection("requests").doc(e.userInfo._id+e.u._id).set({requesterName:e.userInfo.name,requesterImg:e.userInfo.imgURL,requester:e.userInfo._id,requesterId:e.userInfo.id,targetId:e.u.id,target:e.u._id,pending:!0}),t.dispatch("GET_PENDING_STATUS",e)}),M()(wt,"CANCEL_REQUEST",function(t,e){I.a.collection("requests").doc(e.userInfo._id+e.u._id).delete(),t.commit("unsetPendingStatus",e)}),M()(wt,"DECLINE_REQUEST",function(t,e){I.a.collection("requests").doc(e.u._id+e.userInfo._id).delete(),t.commit("unsetRequestStatus",e)}),M()(wt,"ACCEPT_REQUEST",function(t,e){L.a.acceptFriendRequest(I.a,e)}),M()(wt,"GET_PENDING_STATUS",function(t,e){I.a.collection("requests").doc(e.userInfo._id+e.u._id).onSnapshot(function(e){void 0!=e.data()&&t.commit("setPendingStatus",e.data())}),I.a.collection("requests").doc(e.u._id+e.userInfo._id).onSnapshot(function(e){void 0!=e.data()&&t.commit("setRequestStatus",e.data())})}),M()(wt,"GET_PENDING_REQUEST",function(t,e){I.a.collection("requests").where("target","==",e).onSnapshot(function(e){console.log(e);var s=[];e.forEach(function(t){s.push(t.data())}),t.commit("setPendingRequest",s)})}),M()(wt,c.k,function(t,e){console.log(e),L.a.getActiveNoti(I.a,e._id,function(e){t.commit("setNotify",e)},function(t){return console.log(t)})}),M()(wt,c.n,function(t,e){L.a.getInactiveNoti(I.a,e._id,function(e){t.commit("setInactiveNotify",e)},e.limit||10)}),M()(wt,c.w,function(t,e){L.a.notifyRead(I.a,e)}),wt),plugins:{}},Et=s("mvHQ"),Mt=s.n(Et),Lt=function t(e){rt()(this,t),this.groupId=Object(l.f)(),this.owner=e.members,this.createdTime=Date.now(),this.content=[],this.membersId=[e.members[0]+e.members[1],e.members[1]+e.members[0]],this.membersName=e.membersName,this.membersEmail=e.membersEmail,this.membersImg=e.membersImg,this.time=Date.now(),this.isLeave=!1},St=function t(e){rt()(this,t),this.owner=e.owner,this.ownerId=e.ownerId,this.groupId=e.groupId,this.createdTime=Date.now(),this.message=e.message,this.img=e.img||[],this.file=e.file||[],this.userImg=e.userImg,this.messageId=Object(l.f)()},jt={conversations:[],unsub:[],chatList:[],images:{},files:{},imageCount:0,fileCount:0,newMessage:{},oldMessage:{},converList:[],imgURL:[],imageProgress:{}},Tt={getConver:function(){return jt.conversations},getNewMessage:function(){return jt.newMessage},getOldMessage:function(){return jt.oldMessage}},kt={setChat:function(t,e){var s=null;void 0!=t.conversations[0]?(t.conversations.forEach(function(t,n){t.id==e.doc[0].id&&(s=n)}),null!==s?(n.a.set(t.conversations,s,e.doc[0]),t.unsub[s]=e.unsub):(t.conversations.push(e.doc[0]),t.unsub.push(e.unsub))):(t.conversations.push(e.doc[0]),t.unsub.push(e.unsub)),console.log(t.conversations)},addChat:function(t,e){},closeChat:function(t,e){t.conversations.splice(e,1),t.unsub.splice(e,1)},setChatList:function(t,e){console.log(e.doc),Mt()(t.chatList)!=Mt()(e.doc)&&(e.doc.forEach(function(t){if(!document.hasFocus()&&t.hasNew&&t.ownerId!=e._id){var s=t.isNotified+": "+t.content[t.content.length-1].message;Object(l.d)({body:s,icon:t.content[t.content.length-1].userImg},t.isNotified+" send you a message")}}),t.chatList=e.doc)},swapChatroom:function(t,e){var s=t.conversations[t.conversations.length-e.limit];n.a.set(t.conversations,t.conversations.length-1,t.conversations[e.i]),n.a.set(t.conversations,e.i,s);var i=t.unsub[t.unsub.length-e.limit];n.a.set(t.unsub,t.unsub.length-1,t.unsub[e.i]),n.a.set(t.unsub,e.i,i)},setUploadImage:function(t,e){var s=t.images[e.id];t.images=M()({},e.id,s),t.images[e.id].push(e.url),t.imgURL.push(e.url),t.imageCount++,console.log(t.images)},removeUploadImage:function(t,e){1==e.amount&&t.images[e.id].splice(e.index,1),0==e.amount&&(t.imageCount=0,t.images[e.id].splice(0,t.images[e.id].length))},setImageHolder:function(t,e){console.log(!t.images[e]),t.images[e]||n.a.set(t.images,e,[])},setUploadFile:function(t,e){t.files[e.id].push({url:e.url,name:e.name}),t.fileCount++,console.log(t.files)},removeUploadFile:function(t,e){1==e.amount&&t.files[e.id].splice(e.index,1),0==e.amount&&(t.fileCount=0,t.files[e.id].splice(0,t.files[e.id].length))},setFileHolder:function(t,e){console.log(!t.files[e]),t.files[e]||n.a.set(t.files,e,[])},setNewMessage:function(t,e){console.log(e.newMessage),e.newMessage.empty&&n.a.set(t.newMessage,e.groupId,e.newMessage),n.a.set(t.newMessage,e.groupId,e.newMessage),t.oldMessage[e.groupId]||n.a.set(t.oldMessage,e.groupId,[])},setOldMessage:function(t,e){n.a.set(t.oldMessage,e.groupId,e.oldMessage),console.log(t.oldMessage[e.groupId])},setConverList:function(t,e){t.converList=e},reset:function(t){t.images={},t.imgURL=[]},setProgress:function(t,e){}},Ut=(It={resetImage:function(t,e){t.commit("reset")}},M()(It,c.e,function(t,e){console.log(e);var s=new Lt({members:[e.u.id,e.userInfo.id],membersName:[e.u.name,e.userInfo.name],membersEmail:[e.u.email,e.userInfo.email],membersImg:[e.u.imgURL,e.userInfo.imgURL]});L.a.createConversation(I.a,s,function(s){console.log(s),t.dispatch(c.m,e.userInfo.id+e.u.id)},function(t){return console.log(t)})}),M()(It,c.m,function(t,e){L.a.getConversation(I.a,e,function(e,s){console.log(e),t.commit("setChat",{doc:e,unsub:s})},function(t,e){console.log(t,e)})}),M()(It,"leaveConversation",function(t,e){L.a.leaveConversation(I.a,e)}),M()(It,"getAllUserWithConversation",function(t,e){L.a.getAllUserWithConversation(I.a,e,function(e){console.log(e),t.commit("setConverList",e)})}),M()(It,c.C,function(t,e){var s=new St(e);L.a.sendMessage(I.a,e.groupId,s,function(t){console.log(t)})}),M()(It,"GET_NEW_MESSAGE",function(t,e){L.a.getNewMessage(I.a,e.groupId,e.time,function(s){t.commit("setNewMessage",{newMessage:s,groupId:e.groupId})})}),M()(It,"GET_OLD_MESSAGE",function(t,e){L.a.getOldMessage(I.a,e.groupId,e.time,e.limit,function(s){t.commit("setOldMessage",{oldMessage:s,groupId:e.groupId})})}),M()(It,c.l,function(t,e){L.a.getChatList(I.a,e.id,function(s){console.log(s),t.commit("setChatList",{doc:s,id:e._id})})}),M()(It,c.d,function(t,e){t.commit("closeChat",e)}),M()(It,c.c,function(t,e){L.a.notifyChatRead(I.a,e)}),M()(It,c.D,function(t,e){t.commit("swapChatroom",e)}),M()(It,c.H,function(t,e){t.commit("setImageHolder",e.id);var s=I.c.child(e.path).put(e.file);s.on("state_changed",function(s){var n=s.bytesTransferred/s.totalBytes*100;switch(t.commit("setProgress",{progress:n,id:e.id}),console.log("Upload is "+n+"% done"),s.state){case ot.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case ot.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(s){console.log(s),t.commit("setUploadImage",{url:s,id:e.id})})})}),M()(It,c.z,function(t,e){1==e.amount&&I.c.child(e.path).delete().then(function(){t.commit("removeUploadImage",{amount:1,index:e.index,id:e.id})}).catch(function(t){return console.log(t)});0==e.amount&&t.commit("removeUploadImage",{amount:0,id:e.id})}),M()(It,c.i,function(t,e){t.commit("setFileHolder",e.id);var s=I.c.child(e.path).put(e.file);s.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+e+"% done"),t.state){case ot.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case ot.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(s){t.commit("setUploadFile",{url:s,id:e.id,name:e.file.name})})})}),M()(It,c.y,function(t,e){1==e.amount&&I.c.child(e.path).delete().then(function(){t.commit("removeUploadFile",{amount:1,index:e.index,id:e.id})}).catch(function(t){return console.log(t)});0==e.amount&&t.commit("removeUploadFile",{amount:0,id:e.id})}),It),Nt={state:jt,getters:Tt,mutations:kt,actions:Ut,plugins:{}},Dt={state:{post:[],likedPost:[]},getters:{},mutations:(bt={},M()(bt,"setUserPost",function(t,e){t.post=e}),M()(bt,"setUserLikedPost",function(t,e){t.post=e}),bt),actions:(_t={},M()(_t,c.r,function(t,e){L.a.getUserPost(I.a,X,e,function(e){t.commit("setUserPost",e)},function(t){return console.log(t)})}),M()(_t,c.p,function(t,e){L.a.getUserLikedPost(I.a,X,e,function(e){t.commit("setUserLikedPost",e)},function(t){return console.log(t)})}),_t),plugins:{}},Ot={state:{},getters:{},mutations:{},actions:M()({},c.G,function(t,e){var s=I.c.child(e.path).put(e.file);s.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+e+"% done"),t.state){case ot.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case ot.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(t){console.log("File available at",t),L.a.saveProfileImage(I.a,e.userId,t,e.type)})})}),plugins:{}},Rt=function t(e){rt()(this,t),this.owner=e.owner,this.ownerId=e.ownerId,this.groupId=Object(l.f)(),this.createdTime=Date.now(),this.groupName=e.groupName,this.img=e.img||"",this.membersId=[e.ownerId],this.inviteCode=Object(l.f)(),this.lastUserMessage=""},Pt={state:{newGroupId:"",createGroupStatus:"",joinedGroupList:[],groupUserList:[]},getters:{},mutations:{CREATE_GROUP_SUCCESS:function(t,e){t.newGroupId=e.groupId,t.createGroupStatus="success"},SET_ALL_JOINED_GROUP:function(t,e){t.joinedGroupList=e},SET_GROUP_MESSAGE:function(t,e){t.groupMessage=e},SET_GROUP_USER_LIST:function(t,e){t.groupUserList.push(e)},RESET_GROUP_USER:function(t){t.groupUserList=[]}},actions:{createGroup:function(t,e){if(console.log(e),e.owner&&e.ownerId&&e.groupName){var s=new Rt({owner:e.owner,ownerId:e.ownerId,groupName:e.groupName,img:e.img||""});L.a.createGroup(I.a,s,function(e){console.log(e),t.commit("CREATE_GROUP_SUCCESS",{doc:e,groupId:s.groupId})},function(t){return console.log(t)})}},getAllJoinedGroup:function(t,e){console.log(e),"_"==e[0]&&L.a.getAllJoinedGroup(I.a,e,function(e){console.log(e),t.commit("SET_ALL_JOINED_GROUP",e)})},getGroupMessage:function(t,e){e&&L.a.getGroupMessage(I.a,e,function(e){console.log(e),t.commit("SET_GROUP_MESSAGE",e)})},joinGroup:function(t,e){L.a.joinGroup(I.a,e.inviteCode,e.userId,function(){t.dispatch("getAllJoinedGroup",e.userId)})},getAllGroupUser:function(t,e){t.commit("RESET_GROUP_USER"),L.a.getAllGroupUser(I.a,e,function(e){t.commit("SET_GROUP_USER_LIST",e)})},removeFromGroup:function(t,e){L.a.removeFromGroup(I.a,e)}},plugins:{}};n.a.use(u.a);var $t=new u.a.Store({modules:{postView:nt,newPost:lt,postComment:pt,auth:xt,chat:Nt,userProfile:Dt,profile:Ot,group:Pt}}),Ft=s("pFYg"),At=s.n(Ft),Bt=s("KMaP"),Gt={results:[],string:"",getFromBetween:function(t,e){if(this.string.indexOf(t)<0||this.string.indexOf(e)<0)return!1;var s=this.string.indexOf(t)+t.length,n=this.string.substr(0,s),i=this.string.substr(s),o=n.length+i.indexOf(e);return this.string.substring(s,o)},removeFromBetween:function(t,e){if(this.string.indexOf(t)<0||this.string.indexOf(e)<0)return!1;var s=t+this.getFromBetween(t,e)+e;this.string=this.string.replace(s,"")},getAllResults:function(t,e){if(!(this.string.indexOf(t)<0||this.string.indexOf(e)<0)){var s=this.getFromBetween(t,e);this.results.push(s),this.removeFromBetween(t,e),this.string.indexOf(t)>-1&&this.string.indexOf(e)>-1&&this.getAllResults(t,e)}},get:function(t,e,s){if(this.results=[],this.string=t,null==t||""==t||null==t)return t;try{return this.getAllResults(e,s),this.results}catch(t){console.log(t)}}};function zt(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}n.a.directive("emoji",{bind:function(t,e){var s=/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D]|\s)/g,n=e.value,i=n.match(/:\w{2,}:/g),o=n.match(/(:\w+:|<[/\\]?3|[\\\D|*$][-^]?[:;=]|[:;=B8][-^]?[3DOPp@$*\\)(/|])(?=\s|[!.?]|$)/g),a=n.match(/:\W{1,}/g);null!=i&&i.forEach(function(t){Bt.emojiIndex.search(t.substr(1,t.length-2)).map(function(e){n=n.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),null!=o&&o.forEach(function(t){Bt.emojiIndex.search(t.trim()).map(function(e){n=n.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),null!=a&&a.forEach(function(t){Bt.emojiIndex.search(t.trim()).map(function(e){n=n.replace(t,twemoji.convert.fromCodePoint(e.unified))})}),function(t){return t.replace(new RegExp(s,"g"),"")}(n).length&&t.classList.add("message"),t.innerHTML=twemoji.parse(n,{folder:"svg",ext:".svg"})},update:function(t,e){t.getAttribute("contenteditable")&&console.log(e)}}),n.a.directive("post",{bind:function(t,e){var s=e.value,n=s.content,i=s.img;if(zt(i))t.innerHTML=n;else if(i){var o=Gt.get(n,"<<I",">>");if("object"==(void 0===o?"undefined":At()(o))){var a=!0,r=!1,c=void 0;try{for(var l,u=w()(o);!(a=(l=u.next()).done);a=!0){var d=l.value,m='<img src="'+i[d]+'" class="post-image" style="width:100%;">';n=n.replace("<<I"+d+">>",m)}}catch(t){r=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(r)throw c}}}t.innerHTML=n}},update:function(t,e){var s=e.value,n=s.content,i=s.img;if(zt(i))t.innerHTML=n;else if(i){var o=Gt.get(n,"<<I",">>");if("object"==(void 0===o?"undefined":At()(o))){var a=!0,r=!1,c=void 0;try{for(var l,u=w()(o);!(a=(l=u.next()).done);a=!0){var d=l.value,m='<img src="'+i[d]+'" class="post-image" style="width:100%;">';n=n.replace("<<I"+d+">>",m)}}catch(t){r=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(r)throw c}}}t.innerHTML=n}}}),n.a.directive("user",{inserted:function(t){var e=t.innerText;I.a.collection("users").where("id","==",e.trim()).get().then(function(e){console.log(e.docs[0].data());var s=e.docs[0].data();t.innerText=s.name+' <small class="text-muted">'+s.email+"</small>"})}}),n.a.filter("Emoji",function(t,e){if(!t)return"";var s=t.match(/:\w{2,}:/g),n=t.match(/(:\w+:|<[/\\]?3|[\\\D|*$][-^]?[:;=]|[:;=B8][-^]?[3DOPp@$*\\)(/|])(?=\s|[!.?]|$)/g);return null!=s&&s.forEach(function(e){Bt.emojiIndex.search(e.substr(1,e.length-2)).map(function(s){t=t.replace(e,s.native)})}),null!=n&&n.forEach(function(e){Bt.emojiIndex.search(e.trim()).map(function(s){t=t.replace(e,s.native)})}),t}),n.a.use(o.a,{dynamic:!0,injectModalsContainer:!0,dialog:!0}),n.a.config.productionTip=!1,Ct.beforeEach(function(t,e,s){if("post"==t.name)return console.log(t.name),void s();""==$t.state.auth.userInfo.name&&"login"==t.name&&s(),""==$t.state.auth.userInfo.name&&"login"!=t.name&&s({path:"/login"}),""!=$t.state.auth.userInfo.name&&"home"==t.name&&s({path:"/"}),s()}),new n.a({el:"#app",components:{App:K},router:Ct,store:$t,template:"<App/>"})},P9fp:function(t,e,s){"use strict";var n=s("Dd8w"),i=s.n(n),o=s("NYxO"),a=s("yp89"),r={name:"ImageModal",props:{image:String,images:Array},data:function(){return{active:""}},methods:{showImage:function(t){document.getElementById("imageShow").src!=t&&(document.getElementById("imageShow").src=t),this.active=t},nextimg:function(){var t=this.images.indexOf(this.active)+1;t<this.images.length?(document.getElementById("imageShow").src=this.images[t],this.active=this.images[t]):(document.getElementById("imageShow").src=this.images[0],this.active=this.images[0])},previmg:function(){var t=this.images.indexOf(this.active)-1;t>=0?(document.getElementById("imageShow").src=this.images[t],this.active=this.images[t]):(document.getElementById("imageShow").src=this.images[this.images.length-1],this.active=this.images[this.images.length-1])}},created:function(){this.active=this.image},mounted:function(){var t=this;document.getElementsByTagName("body")[0].style.overflow="hidden",Object(a.h)(document.getElementById("imageShow"),function(e){"down"==e&&t.$emit("close")})},destroyed:function(){document.getElementsByTagName("body")[0].style.overflow=""}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-dark",staticStyle:{"max-height":"100vh"}},[s("div",{staticStyle:{width:"auto",height:"calc(100vh - 112px)","white-space":"nowrap"}},[s("img",{staticClass:"d-flex mx-auto",staticStyle:{width:"auto","max-width":"100vw",position:"absolute",top:"calc(50% - 112px)",left:"50%",transform:"translate(-50%, calc(56px - 50%))","max-height":"calc(100vh - 112px)"},attrs:{id:"imageShow",src:t.image}}),t._v(" "),s("button",{staticClass:"close",staticStyle:{position:"absolute",right:"20px",top:"10px"},on:{click:function(e){return t.$emit("close")}}},[s("i",{staticClass:"fas fa-times-circle text-white"})]),t._v(" "),s("i",{staticClass:"previmg fas fa-angle-left fa-3x",on:{click:function(e){return t.previmg()}}}),t._v(" "),s("i",{staticClass:"nextimg fas fa-angle-right fa-3x",on:{click:function(e){return t.nextimg()}}})]),t._v(" "),s("div",{staticClass:"d-flex",staticStyle:{"background-color":"transparent",height:"112px",width:"100%",overflow:"auto hidden"}},t._l(t.images,function(e,n){return s("div",{key:n,staticClass:"m-2",class:{"activeimg border-dark":t.active==e},staticStyle:{height:"96px",width:"120px",filter:"blur(1.5px)"},style:{backgroundImage:"url("+e+")"},attrs:{id:"thumbnailImage"},on:{click:function(s){return t.showImage(e)}}})}),0)])},staticRenderFns:[]};var l=s("VU/8")(r,c,!1,function(t){s("RqwU")},null,null).exports,u=s("Hvsy"),d=(s("Qfbh"),{name:"ChatMessage",components:{ChatMessage:g},data:function(){return{isShow:!1,lastUserMessageId:"",lastMessageCreateTime:0,isMobile:a.e.any()}},computed:i()({},Object(o.c)({userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},pendingRequests:function(t){return t.auth.pendingRequests}})),props:{c:Object,next:Object,i:Number},methods:{calendarTime:a.b,lastMessage:function(t){this.lastUserMessageId=t},show:function(t,e){this.$modal.show(l,{image:t,images:e},{width:this.isMobile?"100%":"70%",height:"auto",style:{"z-index":9e3,"border-radius":"0.125rem !important"},classes:"all-modal"},{closed:this.hide})},hide:function(){this.$modal.hide("view-post")},deleteMessage:function(t){console.log(t);var e=this;this.$modal.show("dialog",{title:"DELETE MESSAGE",text:'Are you sure you want to delete this message?\n        <a  class="list-group-item px-4 py-0" style="border: none;"><div  class="mt-1" style="width: 100%;"><hr class="m-2"> <div class="message" style="margin-right: 2rem;"><div><div style="background-size: cover; background-position: center center; height: 40px; width: 40px; margin-bottom: -40px; background-image: url('+t.userImg+');"></div></div> <div class="ml-5"><div class="text-info">\n        '+t.owner+'\n        <span class="small text-secondary">'+Object(a.b)(t.createdTime)+'</span></div></div> <div class="chat-wrapper my-1"><p class="text d-inline message" style="margin-left: 50px;">'+(t.message||t.img.length+" image(s)")+'</p></div> <hr class="mb-0 ml-2"></div></div></a>\n        ',buttons:[{title:'<button class="btn">CLOSE</button>'},{title:'<button class="btn text-danger">DELETE</button>',handler:function(){u.a.collection("message").doc(t._id).delete().then(function(){console.log("Document successfully deleted!");$.snackbar({content:"<span class='text-success text-center'>Message deleted</span>",style:"snackbar",timeout:3e3}),e.$modal.hide("dialog")}).catch(function(t){console.error("Error removing document: ",t)})}}]})}}}),m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-1",staticStyle:{width:"100%"}},[t.next&&(t.next.ownerId!=t.c.ownerId||t.c.createdTime-t.next.createdTime>3e5)?s("hr",{staticClass:"m-2"}):t._e(),t._v(" "),t.userInfo.blockedUser.includes(t.c.ownerId)?s("div",{staticClass:"card text-warning p-3"},[s("code",[t._v("1 blocked message")])]):s("div",{staticClass:"message",staticStyle:{"margin-right":"2rem"}},[s("div",[!t.next||t.next.ownerId!=t.c.ownerId||t.c.createdTime-t.next.createdTime>3e5?s("div",{staticStyle:{"background-size":"cover","background-position":"center",height:"40px",width:"40px","margin-bottom":"-40px"},style:"background-image: url("+t.c.userImg+");"}):t._e()]),t._v(" "),s("div",{staticClass:"ml-5"},[!t.next||t.next.ownerId!=t.c.ownerId||t.c.createdTime-t.next.createdTime>3e5?s("div",{staticClass:"text-info"},[t._v("\n        "+t._s(t.c.owner)+"\n        "),s("span",{staticClass:"small text-secondary"},[t._v(t._s(t.calendarTime(t.c.createdTime)))])]):t._e()]),t._v(" "),s("div",{staticClass:"chat-wrapper my-1"},[t.c.message?s("p",{directives:[{name:"emoji",rawName:"v-emoji:message",value:t.c.message,expression:"c.message",arg:"message"}],staticClass:"text d-inline"}):t._e(),t._v(" "),t.c.ownerId==t.userInfo._id&&t.c.message?s("div",{staticClass:"float-right"},[s("i",{staticClass:"fas fa-ellipsis-v btn px-1 py-0 my-0",staticStyle:{cursor:"pointer",display:"none"},attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right small"},[s("button",{staticClass:"dropdown-item",attrs:{type:"button"}},[t._v("Edit")]),t._v(" "),s("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.deleteMessage(t.c)}}},[t._v("Delete")])])]):t._e(),t._v(" "),t.isMobile?t._e():s("div",[t.c.ownerId==t.userInfo._id&&t.c.img.length&&!t.c.message?s("div",{staticClass:"float-right"},[s("i",{staticClass:"fas fa-ellipsis-v btn px-1 py-0 my-0",staticStyle:{cursor:"pointer",display:"none"},attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right small"},[s("button",{staticClass:"dropdown-item",attrs:{type:"button"}},[t._v("Edit")]),t._v(" "),s("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.deleteMessage(t.c)}}},[t._v("Delete")])])]):t._e(),t._v(" "),t._l(t.c.img,function(e,n){return s("img",{key:n,staticClass:"img m-2 rounded",class:{"mobile-size":t.isMobile},attrs:{src:e,alt:""},on:{click:function(s){return t.show(e,t.c.img)}}})})],2),t._v(" "),t.isMobile&&t.c.img.length?s("div",{staticClass:"mb-1 image-thumb"},[t.c.ownerId==t.userInfo._id&&t.c.img.length&&!t.c.message?s("div",{staticClass:"float-right m-0"},[s("i",{staticClass:"fas fa-ellipsis-v btn px-1 py-0m-0",staticStyle:{cursor:"pointer",display:"none"},attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right small"},[s("button",{staticClass:"dropdown-item",attrs:{type:"button"}},[t._v("Edit")]),t._v(" "),s("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.deleteMessage(t.c)}}},[t._v("Delete")])])]):t._e(),t._v(" "),s("ul",{staticClass:"list-group"},t._l(t.c.img,function(e,n){return s("a",{key:n,staticClass:"list-group-item p-2"},[s("img",{attrs:{src:e,height:"auto",width:"50px"},on:{click:function(s){return t.show(e,t.c.img)}}}),t._v(" "),s("a",{attrs:{href:e}},[t._v("Image")])])}),0)]):t._e()]),t._v(" "),0==t.i?s("hr",{staticClass:"mb-0 ml-2"}):t._e()])])},staticRenderFns:[]};var h=s("VU/8")(d,m,!1,function(t){s("g5i7")},"data-v-c1160d32",null),g=e.a=h.exports},Qfbh:function(t,e,s){"use strict";var n=s("bOdI"),i=s.n(n),o=s("woOf"),a=s.n(o),r=s("Hvsy"),c=s("Zrlr"),l=s.n(c),u=s("yp89"),d=function t(e){l()(this,t),this.id=Object(u.f)(),this.name=e.name,this.email=e.email,this.postIDs=[],this.createdTime=Date.now(),this.personal={},this.friends=[],this.imgURL=e.imgURL,this.status=e.status,this.hideList=[],this.blockedUser=[]};var m={removeFromGroup:function(t,e){t.collection("groups").where("groupId","==",e.groupId).get().then(function(s){s.empty||t.collection("groups").doc(s.docs[0].id).update({membersId:r.b.FieldValue.arrayRemove(e.id)})})},getAllGroupUser:function(t,e,s){if(e)for(var n=0;n<e.length;n++)t.collection("users").where("id","==",e[n]).get().then(function(t){if(!t.empty){var e=t.docs[0].data();e._id=e.id,e.id=t.docs[0].id,s(e)}})},leaveConversation:function(t,e){t.collection("chat").where("groupId","==",e.groupId).get().then(function(e){console.log(e),e.empty||t.collection("chat").doc(e.docs[0].id).set({isLeave:!0},{merge:!0})})},joinGroup:function(t,e,s,n){t.collection("groups").where("inviteCode","==",e).get().then(function(e){if(1!=e.empty){console.log(e);var i=e.docs[0].id;t.collection("groups").doc(i).update({membersId:r.b.FieldValue.arrayUnion(s)}).then(function(){n()})}})},getAllJoinedGroup:function(t,e,s){t.collection("groups").where("membersId","array-contains",e).get().then(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),s(e)})},getNewMessage:function(t,e,s,n){t.collection("message").where("groupId","==",e).where("createdTime",">",s).orderBy("createdTime","desc").onSnapshot(function(t){var e=[];console.log(t),t.empty?n({empty:!0}):(t.forEach(function(t){console.log(t);var s=t.data();s._id=t.id,e.push(s)}),n(e))})},getOldMessage:function(t,e,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=arguments[4];t.collection("message").where("groupId","==",e).where("createdTime","<",s).orderBy("createdTime","desc").limit(n).onSnapshot(function(t){var e=[];t.empty||(t.forEach(function(t){console.log(t);var s=t.data();s._id=t.id,e.push(s)}),i(e))})},saveProfileImage:function(t,e,s,n){t.collection("users").doc(e).set(i()({},n,s),{merge:!0})},blockUser:function(t,e,s){t.collection(e).doc(s.id).update({blockedUser:r.b.FieldValue.arrayUnion(s.userId)})},unblockUser:function(t,e,s){t.collection(e).doc(s.id).update({blockedUser:r.b.FieldValue.arrayRemove(s.userId)})},undoHidePost:function(t,e,s,n){t.collection(e).doc(s).update({hideList:r.b.FieldValue.arrayRemove(n)})},hidePost:function(t,e,s,n){t.collection(e).doc(s).update({hideList:r.b.FieldValue.arrayUnion(n)})},searchQuery:function(t,e,s,n,i,o,a){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"id",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"asc";i.collection(t).where(e,s,n).orderBy(r,c).onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s._id=t.data().id,s.id=t.id,e.push(s)}),o(e,t)})},fetchPosts:function(t,e,s,n,i,o,a,r,c,l,u,d){if(r||(r="desc"),d);else var m=s.collection(t).orderBy(e,"desc").limit(u).onSnapshot(function(t){t.docChanges().forEach(function(t){if("modified"===t.type){var e=t.doc.data();e._id=e.id,e.id=t.doc.id,i(e,t.oldIndex)}"removed"===t.type&&o(t.oldIndex)});var e=[];t.forEach(function(t){var s=t.data();s._id=s.id,s.id=t.id,e.push(s)}),n(e,m,u)})},deletePost:function(t,e,s,n,i,o){i.collection(t).where(e,s,n).get().then(function(t){t.forEach(function(t){t.ref.delete()})}).catch(function(t){return o(t)})},createPost:function(t,e,s,n,i){s.collection(t).add(a()({},e)).then(function(t){n(t)}).catch(function(t){return i(t)})},addUser:function(t,e,s,n){var i=new d(e);t.collection("users").add(a()({},i)).then(function(e){s(e),function(t,e){t.collection("notify").doc(e).set({notify:[]},{merge:!0})}(t,i.id)}).catch(function(t){return n(t)})},postComment:function(t,e,s,n,i,o){var c=a()({},n);e.collection(t).doc(s).update({comment:r.b.FieldValue.arrayUnion(c),time:r.b.FieldValue.serverTimestamp()}).then(function(t){return i(t)}).catch(function(t){return o(t)})},likePost:function(t,e,s,n,i,o){var a=!1;e.collection(t).doc(s).get().then(function(c){c.data().like.forEach(function(t){t==n&&(a=!0)}),a?e.collection(t).doc(s).update({like:r.b.FieldValue.arrayRemove(n)}).then(function(t){i(t)}).catch(function(t){return o(t)}):e.collection(t).doc(s).update({like:r.b.FieldValue.arrayUnion(n)}).then(function(t){i(t)}).catch(function(t){return o(t)})})},getPostComment:function(t,e,s,n,i){e.collection(t).doc(s).onSnapshot(function(t){var e=t.data();e.comment.length?n(e):n("")})},userOffline:function(t,e,s){t.collection("users").where("email","==",e).get().then(function(e){var n=e.docs[0].id;t.collection("users").doc(n).update({status:!1}),s()})},userOnline:function(t,e){t.collection("users").where("email","==",e).get().then(function(e){if(e.docs.length){var s=e.docs[0].id;t.collection("users").doc(s).update({status:!0,lastLogedIn:Date.now()})}})},getUserList:function(t,e,s,n){t.collection("users").onSnapshot(function(t){var n=[];t.forEach(function(t){var s=t.data();s._id=s.id,s.id=t.id,e.email!=s.email&&n.push(s)}),s(n,e)})},createConversation:function(t,e,s,n){t.collection("chat").where("membersId","array-contains",e.membersId[0]).get().then(function(i){if(i.empty&&t.collection("chat").add(a()({},e)).then(function(t){s(t)}).catch(function(t){return n(t)}),1==i.docs[0].data().isLeave){var o=i.docs[0].id;t.collection("chat").doc(o).update({isLeave:!1})}})},sendMessage:function(t,e,s,n,i){t.collection("message").add(a()({},s)).then(function(t){return n(t)}).catch(function(t){return i})},getConversation:function(t,e,s,n){var i=t.collection("chat").where("membersId","array-contains",e).where("isLeave","==",!1).limit(1).onSnapshot(function(t){t.docChanges().forEach(function(t){if("modified"===t.type){var e=t.doc.data();e.id=t.doc.id,n(e,t.oldIndex)}});var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),s(e,i)})},getAllUserWithConversation:function(t,e,s){t.collection("chat").where("membersId","array-contains",e).where("isLeave","==",!1).onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),s(e)})},replyComment:function(t,e,s,n,o){var c=a()({},o),l="reply."+n;console.log(c),t.collection(e).doc(s).update(i()({},l,r.b.FieldValue.arrayUnion(c)))},likeComment:function(t,e,s,n,i,o,a){var r={};r["reply."+o+"."+a+".like"]=i,console.log(r),t.collection(e).doc(s).set(r,{merge:!0})},addFriend:function(t,e,s){console.log(s),t.collection(e).doc(s.userInfo.id).update({friends:r.b.FieldValue.arrayUnion(s.u.email)})},unFriend:function(t,e,s){console.log(s),t.collection(e).doc(s.userInfo.id).update({friends:r.b.FieldValue.arrayRemove(s.u.id)}),t.collection(e).doc(s.u.id).update({friends:r.b.FieldValue.arrayRemove(s.userInfo.id)})},notifyUser:function(t,e){t.collection("notify").add(a()({},e)).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})},getActiveNoti:function(t,e,s,n){t.collection("notify").where("ownerId","==",e).where("isActive","==",!0).orderBy("createdTime","desc").onSnapshot(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),s(e)})},getInactiveNoti:function(t,e,s,n){t.collection("notify").where("ownerId","==",e).where("isActive","==",!1).orderBy("createdTime","desc").limit(n).onSnapshot(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),s(e)})},notifyRead:function(t,e){t.collection("notify").where("ownerId","==",e).where("isActive","==",!0).get().then(function(e){e.forEach(function(e){t.collection("notify").doc(e.id).update({isActive:!1})})})},getPost:function(t,e,s,n){if("_"!=s[0])var i=t.collection(e).doc(s).onSnapshot(function(t){var e=t.data();e.id=t.id,n(e,i)});else var o=t.collection(e).where("id","==",s).onSnapshot(function(t){var e=t.docs[0].data();e.id=t.docs[0].id,n(e,o)})},getUserLikedPost:function(t,e,s,n){t.collection(e).where("like","array-contains",s).onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),n(e)})},getUserPost:function(t,e,s,n,i){t.collection(e).where("userId","==",s).onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),n(e)})},notifyChat:function(t,e,s){t.collection("chat").doc(e).update({isNotified:s,hasNew:!0,time:Date.now()})},notifyChatRead:function(t,e){t.collection("chat").where("membersId","array-contains",e).get().then(function(e){t.collection("chat").doc(e.docs[0].id).update({hasNew:!1,time:Date.now()})})},getChatList:function(t,e,s){t.collection("chat").where("owner","array-contains",e).where("isLeave","==",!1).orderBy("time","desc").onSnapshot(function(t){console.log(t);var e=[];t.forEach(function(t){e.push(t.data())}),s(e)})},getFriendPost:function(t,e,s,n){s.forEach(function(e){console.log(e),t.collection("POSTS").where("ownerEmail","==",e).get().then(function(t){var e=[];t.forEach(function(t){e.push(t.data())}),n(e)})}),console.log([])},acceptFriendRequest:function(t,e){t.collection("requests").doc(e.requester+e.target).delete(),t.collection("users").doc(e.requesterId).update({friends:r.b.FieldValue.arrayUnion(e.targetId)}),t.collection("users").doc(e.targetId).update({friends:r.b.FieldValue.arrayUnion(e.requesterId)})},createGroup:function(t,e,s,n){t.collection("groups").add(a()({},e)).then(function(t){s(t)}).catch(function(t){return n(t)})}};e.a=m},RqwU:function(t,e){},a1CX:function(t,e,s){"use strict";var n=s("Dd8w"),i=s.n(n),o=s("PJh5"),a=s.n(o),r=s("NYxO"),c=s("woOf"),l=s.n(c),u=s("Xxa5"),d=s.n(u),m=s("exGp"),h=s.n(m),g=s("KMaP"),f=s("Hvsy"),p=(s("Qfbh"),s("lHQJ")),v={name:"ChatForm",components:{Picker:g.Picker},props:{user:Object,index:Number,limit:Function,isMobile:Boolean},data:function(){return{chat:[],minimize:!1,isFocus:!0,notify:0,message:"",newMessages:[],oldMessages:{},emojiPicker:!1,emojiRegex:/(:[^\s]*(?:::[^:\s]*)*[^:\s]:)|(:[^\s]*(?:::[^:\s]*)*[^:\s])/g,emojiRegex2:/:\w{2,}:/g,matchesEmoji:[],emo:"",images:[],files:[],canSendMessage:!0,hasImage:!1,hasFile:!1,paths:[],filePaths:[],realImage:[],realFile:[],limitFiles:10,converlength:0,isScrollable:!1,now:0,limitMessage:10,unsub:null,style:{right:this.isMobile?0:302*(this.index>=this.limit()?this.index-this.limit():this.index)+250+"px",bottom:this.isMobile?33*(this.index>=this.limit()?this.index-this.limit():this.index)+"px":"0",width:this.isMobile?"100%":"300px",zIndex:2e3-this.index,height:this.minimize?"32px":"375px"}}},computed:i()({},Object(r.b)({userInfo:"userInfo",getConver:"getConver"})),watch:{newMessages:function(){this.scrollChat(),$('[data-toggle="tooltip"]').tooltip()},message:function(t){""==t&&(this.matchesEmoji=[])},matchesEmoji:function(){this.scrollChat()},paths:function(){this.scrollChat()}},methods:{cvDate:function(t){return a()(t).calendar()},onCLick:function(t){this.unsub(),this.$emit("closeChat",t),this.$store.dispatch("CLOSE_CHAT",t)},minimizeChat:function(t){this.minimize=!this.minimize,this.minimize||this.scrollChat()},selectEmoji:function(t){document.getElementById("chatInput__"+this.index).innerHTML+=twemoji.parse(twemoji.convert.fromCodePoint(t.unified)),this.emojiPicker=!1,this.setCaret()},searchEmoji:function(t){if(this.message=document.getElementById("chatInput__"+this.index).innerText,this.message.length>2&&32==t.keyCode||13==t.keyCode){this.emo=this.message.match(this.emojiRegex);var e=this.emo?this.emo[this.emo.length-1].substr(1):"";e.length>1&&(this.matchesEmoji=g.emojiIndex.search(e).map(function(t){return t}),this.replaceEmoji())}},replaceEmoji:function(t){var e=document.getElementById("chatInput__"+this.index);if(t){this.message=e.innerHTML;var s=twemoji.parse(twemoji.convert.fromCodePoint(t.unified));e.innerHTML=this.message.replace(this.emo,s+'<div style="display: none">'+t.colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}else if(this.matchesEmoji.length){this.message=e.innerHTML;var n=twemoji.parse(twemoji.convert.fromCodePoint(this.matchesEmoji[0].unified));e.innerHTML=this.message.replace(this.emo,n+'<div style="display: none">'+this.matchesEmoji[0].colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}},dropImage:function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.files;if(e.length){e.length>=this.limitFiles&&alert("Limit"+this.limitFiles+"files");for(var s=0;s<e.length;s++)if("image/jpeg"!=e[s].type&&"image/png"!=e[s].type){var n=this.getConver[this.index].groupId+"/"+Date.now()+"_"+e[s].name;this.canSendMessage=!1,this.hasFile=!0,this.filePaths.push(n),this.realFile.push(e[s])}else if("image/jpeg"==e[s].type||"image/png"==e[s].type){this.canSendMessage=!1,this.hasImage=!0;var i=this.getConver[this.index].groupId+"/"+Date.now()+"_"+e[s].name;this.paths.push(i),this.images.push(window.URL.createObjectURL(e[s])),this.realImage.push(e[s])}}this.dragLeave(t)},uploadFile:function(){var t=h()(d.a.mark(function t(e,s,n){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.dispatch(p.i,{file:e,path:s,id:n}),t.next=3,this.$store.state.chat.files[n];case 3:return this.files=t.sent,t.next=6,this.$store.state.chat.fileCount;case 6:t.sent,console.log(this.files);case 8:case"end":return t.stop()}},t,this)}));return function(e,s,n){return t.apply(this,arguments)}}(),pasteImage:function(t){this.getConver[this.index].id;var e=t.clipboardData.files;if(e.length&&!(this.images.length>7)){this.hasImage=!0;var s=this.getConver[this.index].groupId+"/"+Date.now()+e[0].name;this.paths.push(s),this.images.push(window.URL.createObjectURL(e[0])),this.realImage.push(e[0]),this.$forceUpdate(),t.preventDefault();var n=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,n)}},uploadImage:function(){var t=h()(d.a.mark(function t(e,s,n){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.dispatch(p.H,{file:e,path:s,id:n}),this.$store.state.chat.fileCount,t.next=4,this.$store.state.chat.images[n];case 4:this.images=t.sent,console.log(this.images);case 6:case"end":return t.stop()}},t,this)}));return function(e,s,n){return t.apply(this,arguments)}}(),removeImage:function(t){this.images.splice(t,1),this.paths.splice(t,1),0==this.images.length&&(this.hasImage=!1)},removeFile:function(t){this.filePaths.splice(t,1),this.realFile.splice(t,1),0==this.files.length&&(this.hasFile=!1)},show:function(t,e){this.$modal.show({template:'<div><div><img id="imageShow" src="'+t+'" style="width: 100%"/><button class="close" @click="$emit(\'close\')" style="position: absolute;right: 20px;top: 10px;">&times;</button></div>\n\t\t\t\t\t\t\t\t\t\t\t<div style="background-color: transparent;" class="d-flex justify-content-center mt-2">\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-for="image in images" :style="{backgroundImage: \'url(\'+image+\')\'}" @click="showImage(image)" :class="{active: active == image}" id="thumbnailImage" class="border border-dark"></div></div></div>',props:{images:Array},data:function(){return{active:t}},methods:{showImage:function(t){document.getElementById("imageShow").src!=t&&(document.getElementById("imageShow").src=t),this.active=t}},mounted:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},destroyed:function(){document.getElementsByTagName("body")[0].style.overflow=""}},{images:e},{width:"70%",height:"auto",style:{"z-index":9e3}},{closed:this.hide})},hide:function(){this.$modal.hide("view-post")},sendMessage:function(t){var e=this;t.preventDefault();var s=this.getConver[this.index].id;if(this.emo&&this.searchEmoji(t),this.hasFile)for(var n=this.filePaths.length-1,i=0;i<=n;i++)this.uploadFile(this.realFile[i],this.filePaths[i],s);if(this.hasImage)for(var o=this.paths.length-1,a=0;a<=o;a++)this.uploadImage(this.realImage[a],this.paths[a],s);this.message=document.getElementById("chatInput__"+this.index).textContent;var r=setInterval(function(){if((e.message.length||e.images.length||e.files.length)&&e.canSendMessage){var t={membersId:e.userInfo.id+e.user.id,message:e.message,owner:e.userInfo.name,ownerId:e.userInfo._id,_id:e.getConver[e.index].id,userImg:e.userInfo.imgURL,img:e.images,file:e.files,groupId:e.getConver[e.index].groupId};e.$store.dispatch(p.C,t).then(e.scrollChat()),document.getElementById("chatInput__"+e.index).innerHTML="",e.images=[],e.files=[],e.paths=[],e.filePaths=[],e.hasImage=!1,e.hasFile=!1,e.realFile=[],e.realImage=[],setTimeout(function(){console.log(e.$store.state.chat.newMessage[e.getConver[e.index].groupId]),e.$forceUpdate(),e.scrollChat()},10),e.newMessages=l()(e.newMessages,e.$store.state.chat.newMessage[e.getConver[e.index].groupId]),clearInterval(r)}else console.log("Cant send messsage")},100)},loadOldMessage:function(t){var e=t.target.scrollTop,s=this.getConver[this.index].groupId;e<100&&Date.now()-this.now>2e3&&this.isScrollable&&(this.now=Date.now(),this.isScrollable=!1,this.limitMessage+=10,this.getOldMessage(s))},scrollChat:function(){var t=this;this.isScrollable=!1,window.setTimeout(function(){var e=document.getElementById(t.user._id);e&&(e.scrollTop=e.scrollHeight),t.isScrollable=!0},100)},setCaret:function(){var t=this;setTimeout(function(){var e=document.getElementById("chatInput__"+t.index),s=document.createRange(),n=window.getSelection();e&&""!=e.innerHTML&&(s.setStart(e.childNodes[e.childNodes.length-1],e.childNodes[e.childNodes.length-1].length),s.collapse(!0),n.removeAllRanges(),n.addRange(s),e.focus())},200)},dragEnter:function(t){document.getElementById("dropzone").classList.add("border-primary")},dragLeave:function(t){document.getElementById("dropzone").classList.remove("border-primary")},checkImageLink:function(t){var e=t.indexOf(".jpg"),s=t.indexOf(".png"),n=t.indexOf(".jpeg");return e>-1||s>-1||n>-1},getOldMessage:function(t){var e=this;f.a.collection("message").where("groupId","==",t).where("createdTime","<",Date.now()).orderBy("createdTime","desc").limit(this.limitMessage).get().then(function(t){var s=[];console.log(t),t.empty?console.log({empty:!0}):(t.forEach(function(t){s.push(t.data())}),console.log(s),e.oldMessages=s)}),this.isScrollable=!0},getNewMessage:function(t){var e=this;this.unsub=f.a.collection("message").where("groupId","==",t).where("createdTime",">",Date.now()).orderBy("createdTime","desc").onSnapshot(function(t){var s=[];console.log(t),t.empty?console.log({empty:!0}):(t.forEach(function(t){s.push(t.data())}),console.log(s),e.newMessages=s,e.scrollChat())})}},created:function(){var t=h()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){var t=h()(d.a.mark(function t(){var e,s,n=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.getConver[this.index].groupId,this.getOldMessage(e),this.getNewMessage(e),s=this,setTimeout(function(){s.scrollChat()},100),document.addEventListener("click",function(t){var e=document.getElementById("chatbox__"+n.index),s=t.target;do{if(s==e)return void(n.isFocus=!0);s=s.parentNode}while(s);n.isFocus=!1});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-box ",attrs:{id:"chatbox__"+t.index}},[s("div",{staticClass:"card shadow",staticStyle:{position:"fixed",right:"0",bottom:"0",width:"300px",left:"''"},style:[t.style,{height:t.minimize?"32px":"375px"}],attrs:{id:"dropzone"},on:{drop:function(e){return e.preventDefault(),t.dropImage(e)},drageover:function(t){t.preventDefault()},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)}}},[s("div",{staticClass:"card-header p-1 text-center chat-header btn",class:t.isFocus?"bg-primary text-white":"bg-light text-dark",on:{click:function(e){return e.stopPropagation(),t.minimizeChat(t.index)}}},[s("i",{staticClass:"fas fa-circle fa-xs",class:{"text-success":t.user.status}}),t._v(" "+t._s(t.user.name.length>20?t.user.name.substr(0,20)+"...":t.user.name)+"\n\t\t\t"),t.notify>0?s("small",{staticClass:"notify-count bg-danger text-white"},[t._v(" "+t._s(t.notify)+" ")]):t._e(),t._v(" "),s("button",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.onCLick(t.index)}}},[t._v("×")])]),t._v(" "),t.minimize?t._e():s("div",{staticClass:"card-body",staticStyle:{"overflow-y":"auto"},attrs:{id:t.user._id},on:{scroll:function(e){return t.loadOldMessage(e)}}},[s("div",{staticClass:"chat-wrapper d-flex flex-column-reverse",on:{drop:function(e){return e.preventDefault(),t.dropImage(e)},drageover:function(t){t.preventDefault()},dragenter:function(e){return t.dragEnter(e)},dragleave:function(e){return t.dragLeave(e)}}},[t._l(t.newMessages,function(e){return t.newMessages?s("span",{key:e.createdTime,staticClass:"d-block border p-1 mb-1",class:[e.owner!=t.user.name?"my-chat bg-primary text-white float-right text-left ml-auto":"other-chat bg-secondary text-white mr-auto",t.user._id],attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.cvDate(e.createdTime)}},[s("div",{directives:[{name:"emoji",rawName:"v-emoji:message",value:e.message,expression:"m.message",arg:"message"}]}),t._v(" "),e.img?s("div",{staticClass:"image-holder d-flex flex-wrap justify-content-around"},t._l(e.img,function(n,i){return s("div",{key:i,staticClass:"image-message border border-white m-1",style:{backgroundImage:"url("+n+")",cursor:"pointer"},on:{click:function(s){return t.show(n,e.img)}}})}),0):t._e(),t._v(" "),s("div",{staticClass:"flex flex-column"},t._l(e.file,function(t,e){return s("a",{key:e,staticClass:"text-white",attrs:{href:t.url,target:"_blank"}})}),0)]):t._e()}),t._v(" "),t._l(t.oldMessages,function(e,n){return t.oldMessages?s("span",{key:n,staticClass:"d-block border p-1 mb-1",class:[e.owner!=t.user.name?"my-chat bg-primary text-white float-right text-left ml-auto":"other-chat bg-secondary text-white mr-auto",t.user._id],attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.cvDate(e.createdTime)}},[s("div",{directives:[{name:"emoji",rawName:"v-emoji:message",value:e.message,expression:"m.message",arg:"message"}]}),t._v(" "),e.img?s("div",{staticClass:"image-holder d-flex flex-wrap justify-content-around"},t._l(e.img,function(n,i){return s("div",{key:i,staticClass:"image-message border border-white m-1",style:{backgroundImage:"url("+n+")",cursor:"pointer"},on:{click:function(s){return t.show(n,e.img)}}})}),0):t._e(),t._v(" "),s("div",{staticClass:"flex flex-column"},t._l(e.file,function(t,e){return s("a",{key:e,staticClass:"text-white",attrs:{href:t.url,target:"_blank"}})}),0)]):t._e()}),t._v(" "),s("span",{staticClass:"d-block m-auto"},[t.isScrollable?t._e():s("i",{staticClass:"fas fa-spinner fa-spin fa-lg"})])],2)]),t._v(" "),t.emojiPicker?s("div",{staticClass:"emoji-picker"},[s("Picker",{style:{position:"absolute",bottom:"37px",left:"0px",width:"283px",zIndex:300},attrs:{set:"twitter",native:!1,emojiTooltip:!0,showPreview:!1},on:{select:function(e){return t.selectEmoji(e)}}})],1):t._e(),t._v(" "),t.minimize?t._e():s("div",{staticClass:"card-footer p-0"},[t.paths.length||t.filePaths.length?s("div",{staticClass:"upload-box d-flex flex-wrap bg-light",staticStyle:{"max-height":"50px","overflow-y":"auto"}},[t._l(t.paths,function(e,n){return t.images[n]?s("div",{key:n,staticClass:"uploaded-image border",staticStyle:{height:"40px",width:"50px"},style:{backgroundImage:"url("+t.images[n]+")"},on:{click:function(e){return e.stopPropagation(),t.show(t.images[n])}}},[t.images[n]?s("button",{staticClass:"close bg-white",on:{click:function(e){return e.stopPropagation(),t.removeImage(n)}}},[t._v("×")]):s("div",{staticClass:"m-auto",staticStyle:{"text-align":"center",width:"50%",height:"100%"}},[s("i",{staticClass:"m-auto fas fa-lg fa-spinner fa-spin",staticStyle:{"line-height":"60px"}})])]):t._e()}),t._v(" "),s("ul",{staticClass:"uploaded-file list-group list-group-flush d-flex flex-column"},t._l(t.filePaths,function(e,n){return s("li",{key:n,staticClass:"list-group-item p-1",staticStyle:{cursor:"'pointer'"},attrs:{"data-toggle":"tooltip",title:"Remove file"},on:{click:function(e){return t.removeFIle(n)}}},[t._v("\n\t\t\t\t\t\t"+t._s(e.split("/")[1])+"\n\t\t\t\t\t")])}),0)],2):t._e(),t._v(" "),s("div",{staticClass:"chat-box"},[s("div",{staticClass:"p-2 border-top message",class:{minimize:t.minimize},staticStyle:{"max-height":"70px","overflow-y":"auto"},attrs:{contenteditable:"true",id:"chatInput__"+t.index},on:{keyup:[function(e){return t.searchEmoji(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.sendMessage(e)}],paste:function(e){return t.pasteImage(e)}}}),t._v(" "),s("div",{staticClass:"d-flex flex-row justify-content-between"},[s("button",{staticClass:"btn btn-dark m-0",on:{click:function(e){t.emojiPicker=!t.emojiPicker}}},[s("img",{staticClass:"emoji",staticStyle:{height:"1.5em"},attrs:{src:"https://twemoji.maxcdn.com/2/72x72/1f600.png"}})]),t._v(" "),s("button",{staticClass:"btn btn-primary m-0",on:{click:function(e){return t.sendMessage()}}},[s("i",{staticClass:"fas fa-reply"})])])])])])])},staticRenderFns:[]};var w=s("VU/8")(v,y,!1,function(t){s("p2f7")},null,null).exports,I=s("yp89"),b={name:"SideMenu",components:{ChatForm:w},data:function(){return{userList:[],userIdList:[],isLoading:!0,isMobile:!!I.e.any(),limit:function(){return window.innerWidth>720&&window.innerWidth<970?2:window.innerWidth>970&&window.innerWidth<1220?3:window.innerWidth>=1220?4:1}}},computed:i()({},Object(r.b)(["getUserList","userInfo","isPending"])),watch:{isPending:function(t){console.log(t)},getUserList:function(){var t=this;this.getUserList.forEach(function(e){t.$store.dispatch("GET_PENDING_STATUS",{u:e,userInfo:t.userInfo})}),console.log(this.getUserList)}},methods:{cvDate:function(t){return Object(I.c)(t,!0)},openChat:function(t){if(this.userList.filter(function(e){return e.id==t.id}).length){for(var e=this.limit(),s=0;s<this.userList.length-e;s++)if(this.userList[s].id==t.id){var n=this.userList[this.userList.length-e];this.$set(this.userList,this.userList.length-1,t),this.$set(this.userList,s,n),this.$store.dispatch(p.D,{i:s,limit:e});break}}else this.userList.push(t);console.log(this.userList)},addFriend:function(t){this.$store.dispatch("FRIEND_REQUEST",{u:t,userInfo:this.userInfo})},unFriend:function(t){this.$store.dispatch(p.F,{u:t,userInfo:this.userInfo})},cancelRequest:function(t){var e=this;this.$store.dispatch("CANCEL_REQUEST",{u:t,userInfo:this.userInfo}),setTimeout(function(){e.$forceUpdate()},500)},declineRequest:function(t){this.$store.dispatch("DECLINE_REQUEST",{u:t,userInfo:this.userInfo})},removeChat:function(t){this.userList.splice(t,1)},getPending:function(t){var e=this;this.$store.dispatch(p.e,{u:t,userInfo:this.userInfo}),this.$store.dispatch("GET_CONVERSATION",this.userInfo.id+t.id),this.isLoading=!0,this.$store.dispatch("GET_PENDING_STATUS",{u:t,userInfo:this.userInfo}),setTimeout(function(){e.isLoading=!1},500)}},mounted:function(){Object(I.h)(document.getElementById("app"),function(t){"left"==t&&(document.getElementById("userMenu").style.right=0),"right"==t&&(document.getElementById("userMenu").style.right="-100vw")})}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.userInfo.email?s("div",{staticClass:"user-menu bg-light",style:{right:t.isMobile?"-100vw":0,width:t.isMobile?"100vw":"250px"},attrs:{id:"userMenu"}},[s("div",{},[s("div",{staticClass:"card shadow-sm",staticStyle:{"{position":"fixed",width:"20vw}"}},[s("div",{staticClass:"card-content"},[s("ul",{staticClass:"list-group list-group-flush"},t._l(t.getUserList,function(e){return s("li",{key:e.email,staticClass:"list-group-item dropdown list-group-item-action list-group-item-light",attrs:{role:"button"}},[s("div",{staticClass:"m-0",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},on:{click:function(s){return t.getPending(e)}}},[s("img",{staticClass:"rounded-circle m-0",staticStyle:{height:"2em"},attrs:{src:e.imgURL}}),t._v(" "),s("i",{staticClass:"fas fa-circle fa-xs border-white border rounded-circle",class:{"text-success":e.status},staticStyle:{transform:"translate(-100%, 90%)"}}),t._v(" "),s("a",{staticClass:"card-link",attrs:{href:"#"}},[t._v(" "+t._s(e.name)+" ")]),t._v(" "),s("small",[t._v(t._s(t.cvDate(e.lastLogedIn)))])]),t._v(" "),t.isLoading?s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[t._m(0,!0)]):s("div",{staticClass:"dropdown-menu"},[s("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.openChat(e)}}},[t._v("Chat")]),t._v(" "),e.isRequest?s("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.declineRequest(e)}}},[t._v("Decline request")]):e.isPending?s("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.cancelRequest(e)}}},[t._v("Cancel friend request")]):!e.isRequest&&!e.isPending&&t.userInfo.friends.indexOf(e.id)<0?s("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.addFriend(e)}}},[t._v("Add friend")]):s("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.unFriend(e)}}},[t._v("Unfriend")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/"+e._id+"/posts"}},[t._v("View posts")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/"+e._id+"/liked"}},[t._v("View liked post")])],1)])}),0)])])]),t._v(" "),t._l(t.userList,function(e,n){return t.userList.length-n<=t.limit()?s("div",{key:n},[s("ChatForm",{attrs:{user:e,index:n,limit:t.limit,isMobile:t.isMobile},on:{closeChat:t.removeChat}})],1):t._e()})],2):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fas fa-spinner fa-spin text-center p-5 mx-3"})])}]};var C=s("VU/8")(b,_,!1,function(t){s("0jdp")},"data-v-349ec6a3",null);e.a=C.exports},clFa:function(t,e){},dUFT:function(t,e){},g5i7:function(t,e){},hbac:function(t,e){},lHQJ:function(t,e,s){"use strict";s.d(e,"f",function(){return n}),s.d(e,"h",function(){return i}),s.d(e,"x",function(){return o}),s.d(e,"g",function(){return a}),s.d(e,"u",function(){return r}),s.d(e,"I",function(){return c}),s.d(e,"J",function(){return l}),s.d(e,"A",function(){return u}),s.d(e,"K",function(){return d}),s.d(e,"q",function(){return m}),s.d(e,"v",function(){return h}),s.d(e,"e",function(){return g}),s.d(e,"m",function(){return f}),s.d(e,"C",function(){return p}),s.d(e,"B",function(){return v}),s.d(e,"t",function(){return y}),s.d(e,"a",function(){return w}),s.d(e,"F",function(){return I}),s.d(e,"k",function(){return b}),s.d(e,"n",function(){return _}),s.d(e,"w",function(){return C}),s.d(e,"o",function(){return x}),s.d(e,"p",function(){return E}),s.d(e,"r",function(){return M}),s.d(e,"l",function(){return L}),s.d(e,"d",function(){return S}),s.d(e,"c",function(){return j}),s.d(e,"j",function(){return T}),s.d(e,"s",function(){return k}),s.d(e,"E",function(){return U}),s.d(e,"D",function(){return N}),s.d(e,"b",function(){return D}),s.d(e,"G",function(){return O}),s.d(e,"i",function(){return R}),s.d(e,"H",function(){return P}),s.d(e,"z",function(){return $}),s.d(e,"y",function(){return F});var n="CREATE_NEW_POST",i="FETCH_POST_LIST",o="POST_COMMENT",a="FETCH_COMMENT",r="LIKE_POST",c="USER_LOGIN_G_AUTH",l="USER_LOGOUT_G_AUTH",u="REMOVE_USER",d="USER_ONLINE",m="GET_USER_LIST",h="LOGIN_WITH_G",g="CREATE_CONVERSATION",f="GET_CONVERSATION",p="SEND_MESSAGE",v="REPLY_COMMENT",y="LIKE_COMMENT",w="ADD_FRIEND",I="UN_FRIEND",b="GET_ACTIVE_NOTIFICATION",_="GET_INACTIVE_NOTIFICATION",C="NOTIFY_READ",x="GET_POST",E="GET_USER_LIKED_POST",M="GET_USER_POST",L="GET_CHAT_LIST",S="CLOSE_CHAT",j="CHAT_NOTIFY_READ",T="FRIEND_REQUEST",k="HIDE_POST",U="UNDO_HIDE_POST",N="SWAP_CHATROOM",D="BLOCK_USER",O="UPLOAD_IMAGE",R="FILE_UPLOAD",P="UPLOAD_IMAGE_TO_CHAT",$="REMOVE_UPLOAD_IMAGE",F="REMOVE_UPLOAD_FILE"},m9Bh:function(t,e,s){"use strict";var n=s("lHQJ"),i={name:"Reply",props:{commentID:String,parentCmt:Object,parent2CmtID:String,user:Object,postId:String,index:Number},data:function(){return{cmtId:this.commentID,prCmt:this.parentCmt,isReplied:!1,reply:""}},methods:{replyComment:function(t){this.user?this.isReplied=!this.isReplied:(this.$emit("close"),this.$router.push("/login")),console.log(this.parentCmt)},onReply:function(){if(console.log(this.reply),this.user.email){var t={commentID:this.parentCmt.commentID,parentCmtID:this.parent2CmtID||this.postId,postId:this.postId,reply:this.reply,floor:this.parentCmt.floor,user:this.user.name,userId:this.user._id,userImg:this.user.imgURL,parentCmtOwnerId:this.parentCmt.ownerId};console.log(t),this.reply.length&&this.$store.dispatch(n.B,t),this.reply="",this.isReplied=!1}else this.$emit("close"),this.$router.push("/login")},likeComment:function(){this.user?this.$store.dispatch(n.t,{commentID:this.parentCmt.commentID,parentCmtID:this.parent2CmtID,index:this.index,id:this.postId,email:this.user.email}):(this.$emit("close"),this.$router.push("/login"))}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"list-inline mx-2"},[s("li",{staticClass:"list-inline-item",on:{click:function(e){return e.stopPropagation(),t.replyComment(e)}}},[t._m(0)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isReplied,expression:"isReplied"}]},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"}],staticClass:"form-control p-2 m-2",attrs:{cols:"30",rows:"1",autofocus:""},domProps:{value:t.reply},on:{input:function(e){e.target.composing||(t.reply=e.target.value)}}}),t._v(" "),s("ul",{staticClass:"list-inline mx-2"},[s("a",{staticClass:"list-inline-item text-secondary",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),t.replyComment(e)}}},[t._v("Cancel")]),t._v(" "),s("a",{staticClass:"list-inline-item",class:{"text-secondary":!t.reply},attrs:{href:"javascript:void(0)",disabled:!t.reply},on:{click:function(e){return e.stopPropagation(),t.onReply(e)}}},[t._v("Reply")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"text-secondary",attrs:{href:"javascript:void(0)"}},[e("small",[e("i",{staticClass:"fas fa-reply"}),this._v(" Reply ")])])}]};var a=s("VU/8")(i,o,!1,function(t){s("C6Co")},null,null);e.a=a.exports},mptq:function(t,e){},p2f7:function(t,e){},racV:function(t,e){},tJcZ:function(t,e){},uslO:function(t,e,s){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(o(t))}function o(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="uslO"},wsFT:function(t,e){},yA7U:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("lHQJ"),i={name:"Login",mounted:function(){this.$store.dispatch(n.v),this.isHome=this.$route.path,$(function(){$("#container").append("<style>#container, .acceptContainer:before, #logoContainer:before {background: "+function(){var t=["4","5","6","7","8","9","a","b","c","d","e"];function e(e){for(var s=0;s<6;s++){var n=Math.round(10*Math.random());e+=t[n]}return e}var s=e("#"),n=e("#");return"linear-gradient("+Math.round(360*Math.random())+"deg, "+s+", "+n+")"}()+"}"),setTimeout(function(){$(".logoContainer").transition({scale:1},700,"ease"),setTimeout(function(){$(".logoContainer .logo").addClass("loadIn"),setTimeout(function(){$(".logoContainer .text").addClass("loadIn"),setTimeout(function(){$(".acceptContainer").transition({height:"431.5px"}),setTimeout(function(){$(".acceptContainer").addClass("loadIn"),setTimeout(function(){$(".formDiv, form h1").addClass("loadIn")},500)},500)},500)},500)},1e3)},10)})}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"container"}},[e("div",{attrs:{id:"inviteContainer"}},[e("div",{staticClass:"logoContainer"},[e("img",{staticClass:"text",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-93c66.appspot.com/o/_2sh36q858c2%2F1556724342147_hunre.PNG?alt=media&token=6dcb8aa0-9c1a-4ed6-a9f7-d967594056c0"}})]),this._v(" "),e("div",{staticClass:"acceptContainer"},[e("form",[e("h1",[this._v("WELCOME!")]),this._v(" "),e("div",{staticClass:"formContainer"},[e("div",{staticClass:"m-2 d-flex justify-content-center",attrs:{id:"my-signin2"}})])])])])])])}]};var a=s("VU/8")(i,o,!1,function(t){s("3pr/")},"data-v-7ef3febc",null);e.default=a.exports},yJ2L:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("woOf");var n=s("Xxa5"),i=s.n(n),o=s("exGp"),a=s.n(o),r=s("BO1k"),c=s.n(r),l=s("Dd8w"),u=s.n(l),d=s("bOdI"),m=s.n(d),h=s("KMaP"),g=(s("PJh5"),s("Hvsy")),f=(s("Qfbh"),s("lHQJ")),p=s("NYxO"),v=s("yp89"),y=s("P9fp"),w={name:"Message",components:{Picker:h.Picker,ChatMessage:y.a},props:["id"],data:function(){var t;return t={isMobile:v.e.any(),lastUserMessageId:"",lastMessageCreateTime:0,messages:{},groupId:this.$route.params.id,chat:[],minimize:!1,isFocus:!0,message:"",newMessages:[],oldMessages:{},emojiPicker:!1,emojiRegex:/(:[^\s]*(?:::[^:\s]*)*[^:\s]:)|(:[^\s]*(?:::[^:\s]*)*[^:\s])/g,emojiRegex2:/:\w{2,}:/g,matchesEmoji:[],emo:"",images:[],files:[],canSendMessage:!0,hasImage:!1,hasFile:!1,paths:[],filePaths:[],realImage:[],realFile:[],imgURL:[],filelimit:6,converlength:0,isScrollable:!1,now:0,limitMessage:30,messageLimit:1e3,unsub:null},m()(t,"now",Date.now()),m()(t,"isDragging",!1),m()(t,"isLoading",!0),m()(t,"isEnd",!1),m()(t,"isUploading",!1),t},computed:u()({},Object(p.c)({userInfo:function(t){return t.auth.userInfo},getUserStatus:function(t){return t.auth.userInfo.status},getUsername:function(t){return t.auth.userInfo.name},notify:function(t){return t.auth.notify?t.auth.notify:[]},inactiveNotify:function(t){return t.auth.inactiveNoti?t.auth.inactiveNoti:[]},chatList:function(t){return t.chat.chatList},pendingRequests:function(t){return t.auth.pendingRequests},friendNotify:function(t){return t.auth.friendNotify},converList:function(t){return t.chat.converList},imgURLs:function(t){return t.chat.imgURL},imageProgress:function(t){return t.chat.imageProgress}})),created:function(){console.log(this.id)},watch:{id:function(){var t=this;this.messages=this.chatList.filter(function(e){return e.groupId==t.id})[0]||{},console.log(this.messages,this.chatList)},$route:function(t){var e=this.$route.params.id;this.isLoading=!0,this.getOldMessage(e),this.getNewMessage(e)},imgURLs:function(t,e){console.log(t,e),t.length==this.images.length&&this.send()}},beforeMount:function(){var t=this;this.messages=this.chatList.filter(function(e){return e.groupId==t.groupId})[0]||{},console.log(this.messages)},methods:{calendarTime:v.b,lastMessage:function(t){this.lastUserMessageId=t.ownerId,console.log(t)},selectEmoji:function(t){document.getElementById("comment").innerHTML+=twemoji.parse(twemoji.convert.fromCodePoint(t.unified))+'<div style="display: none">'+t.colons+"</div>",this.emojiPicker=!1,this.setCaret()},searchEmoji:function(t){if(this.message=document.getElementById("comment").innerText,this.message.length>2&&32==t.keyCode||13==t.keyCode){this.emo=this.message.match(this.emojiRegex);var e=this.emo?this.emo[this.emo.length-1].substr(1):"";e.length>1&&(this.matchesEmoji=h.emojiIndex.search(e).map(function(t){return t}),this.replaceEmoji())}},replaceEmoji:function(t){var e=document.getElementById("comment");if(t){this.message=e.innerHTML;var s=twemoji.parse(twemoji.convert.fromCodePoint(t.unified));e.innerHTML=this.message.replace(this.emo,s+'<div style="display: none">'+t.colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}else if(this.matchesEmoji.length){this.message=e.innerHTML;var n=twemoji.parse(twemoji.convert.fromCodePoint(this.matchesEmoji[0].unified));e.innerHTML=this.message.replace(this.emo,n+'<div style="display: none">'+this.matchesEmoji[0].colons+"</div>"),this.setCaret(),this.matchesEmoji=[],this.emo=[]}},onDragover:function(t){return t.preventDefault(),$("#dropzonebg").addClass("show"),!1},onDragend:function(t){return t.preventDefault(),$("#dropzonebg").removeClass("show"),!1},onDrop:function(t){t.stopPropagation(),t.preventDefault(),$("#dropzonebg").removeClass("show");var e=t.dataTransfer.files,s=[],n=[];if(console.log(e),e.length>this.filelimit||this.images.length+e.length>this.filelimit)this.oversize("LIMIT IMAGE IS "+this.filelimit,"Limit images per upload is "+this.filelimit);else{var i=!0,o=!1,a=void 0;try{for(var r,l=c()(e);!(i=(r=l.next()).done);i=!0){var u=r.value;if(u.size<5e6)if("image/png"==u.type||"image/jpeg"==u.type||"image/gif"==u.type){this.realImage.push(u),this.images.push(window.URL.createObjectURL(u));var d=this.messages.groupId+"/"+Date.now()+"_"+u.name;this.paths.push(d)}else n.push(u.name);else s.push(u.name)}}catch(t){o=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}s.length&&this.oversize("YOUR IMAGE IS TO BIG","Try other image or reduce image size.\n \n          <p>Images: <code>"+s+"</code></p>"),n.length&&this.oversize("YOUR FILES TYPE ARE NOT SUPPORTED","Supported file types: <code>.png .jpg .gif</code>\n <p>Files: <code>"+n+"</code></p>")}return!1},chooseImage:function(t){var e=$("#inputImage").get(0).files,s=[],n=[];if(e.length>this.filelimit||this.images.length+e.length>this.filelimit)this.oversize("LIMIT IMAGE IS "+this.filelimit,"Limit images per upload is "+this.filelimit);else{var i=!0,o=!1,a=void 0;try{for(var r,l=c()(e);!(i=(r=l.next()).done);i=!0){var u=r.value;if(u.size<5e6)if("image/png"==u.type||"image/jpeg"==u.type||"image/gif"==u.type){this.realImage.push(u),this.images.push(window.URL.createObjectURL(u));var d=this.messages.groupId+"/"+Date.now()+"_"+u.name;this.paths.push(d)}else n.push(u.name);else s.push(u.name)}}catch(t){o=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}s.length&&this.oversize("YOUR IMAGE IS TO BIG","Try other image or reduce image size.\n \n          <p>Images: <code>"+s+"</code></p>"),n.length&&this.oversize("YOUR FILES TYPE ARE NOT SUPPORTED","Supported file types: <code>.png .jpg .gif</code>\n <p>Files: <code>"+n+"</code></p>")}},dropImage:function(t){t.preventDefault(),t.stopPropagation(),console.log(t);var e=t.dataTransfer.files;if(e.length){e.length>=this.limitFiles&&alert("Limit"+this.limitFiles+"files");for(var s=0;s<e.length;s++)if("image/jpeg"!=e[s].type&&"image/png"!=e[s].type){var n=this.messages.groupId+"/"+Date.now()+"_"+e[s].name;this.canSendMessage=!1,this.hasFile=!0,this.filePaths.push(n),this.realFile.push(e[s])}else if("image/jpeg"==e[s].type||"image/png"==e[s].type){this.canSendMessage=!1,this.hasImage=!0;var i=this.messages.groupId+"/"+Date.now()+"_"+e[s].name;this.paths.push(i),this.images.push(window.URL.createObjectURL(e[s])),this.realImage.push(e[s])}}this.dragLeave(t)},uploadFile:function(){var t=a()(i.a.mark(function t(e,s,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.dispatch(f.i,{file:e,path:s,id:n}),t.next=3,this.$store.state.chat.files[n];case 3:return this.files=t.sent,t.next=6,this.$store.state.chat.fileCount;case 6:t.sent,console.log(this.files);case 8:case"end":return t.stop()}},t,this)}));return function(e,s,n){return t.apply(this,arguments)}}(),pasteImage:function(t){var e=this.messages.groupId;t.preventDefault();var s=t.clipboardData.files;if(s.length){var n=e+"/"+Date.now()+"_"+s[0].name;this.paths.push(n),this.images.push(window.URL.createObjectURL(s[0])),this.realImage.push(s[0])}var i=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,i)},uploadImage:function(){var t=a()(i.a.mark(function t(e,s,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.dispatch(f.H,{file:e,path:s,id:n}),this.$store.state.chat.fileCount,t.next=4,this.$store.state.chat.images[n];case 4:this.imgURL=t.sent,console.log(this.imgURL);case 6:case"end":return t.stop()}},t,this)}));return function(e,s,n){return t.apply(this,arguments)}}(),removeImage:function(t){this.images.splice(t,1),this.realImage.splice(t,1),window.URL.revokeObjectURL(this.realImage.splice(t,1)),this.paths.splice(t,1),0==this.images.length&&(this.hasImage=!1)},removeFile:function(t){this.filePaths.splice(t,1),this.realFile.splice(t,1),0==this.files.length&&(this.hasFile=!1)},oversize:function(t,e){this.$modal.show("dialog",{title:t,text:e,buttons:[{title:"CLOSE",default:!1}]})},send:function(){var t=this;if(this.message=document.getElementById("comment").textContent,this.message.length>this.messageLimit)vm.oversize("YOUR MESSAGE IS TOO LONG","Please make your message shorter. Limit is 1000 characters");else{if(0==this.message.length&&0==this.imgURL.length)return;var e={message:this.message,owner:this.userInfo.name,ownerId:this.userInfo._id,_id:this.messages.id,userImg:this.userInfo.imgURL,img:this.imgURLs,file:this.files,groupId:this.messages.groupId};this.$store.dispatch(f.C,e).then(function(){t.$store.dispatch("resetImage"),document.getElementById("comment").innerHTML="",t.images=[],t.files=[],t.paths=[],t.filePaths=[],t.hasImage=!1,t.hasFile=!1,t.realFile=[],t.realImage=[],t.imgURL=[],t.isUploading=!1})}},sendMessage:function(t){if(t.preventDefault(),1!=this.isUploading){this.$store.dispatch("resetImage");var e=this.messages.groupId;if(this.emo&&this.searchEmoji(t),this.message=document.getElementById("comment").textContent,(this.message.length||this.realImage.length)&&(this.isUploading=!0),this.realImage.length){var s=this.paths.length;console.log(this.realImage,this.paths);for(var n=0;n<s;n++)this.uploadImage(this.realImage[n],this.paths[n],e)}}},loadOldMessage:function(t){var e=t.target.scrollTop,s=this.messages.groupId;e<=1&&(this.isScrollable=!1,this.limitMessage+=20,this.getOldMessage(s))},scrollChat:function(){var t=this;this.isScrollable=!1,window.setTimeout(function(){var e=document.getElementById("main-messages");e&&(e.scrollTop=e.scrollHeight),t.isScrollable=!0},100)},setCaret:function(){setTimeout(function(){var t=document.getElementById("comment"),e=document.createRange(),s=window.getSelection();t&&""!=t.innerHTML&&(e.setStart(t.childNodes[t.childNodes.length-1],t.childNodes[t.childNodes.length-1].length),e.collapse(!0),s.removeAllRanges(),s.addRange(e),t.focus())},200)},dragEnter:function(t){document.getElementById("dropzone").classList.add("border-primary")},dragLeave:function(t){document.getElementById("dropzone").classList.remove("border-primary")},checkImageLink:function(t){var e=t.indexOf(".jpg"),s=t.indexOf(".png"),n=t.indexOf(".jpeg");return e>-1||s>-1||n>-1},getOldMessage:function(t){var e=this;g.a.collection("message").where("groupId","==",t).where("createdTime","<",this.now).orderBy("createdTime","desc").limit(this.limitMessage).onSnapshot(function(t){var s=[];console.log(t),t.empty?(console.log({empty:!0}),e.oldMessages=[]):(t.forEach(function(t){var e=t.data();e._id=t.id,s.push(e)}),console.log(s),e.oldMessages=s,s.length<e.limitMessage&&(e.isEnd=!0))}),this.isScrollable=!0},getNewMessage:function(t){var e=this;this.unsub=g.a.collection("message").where("groupId","==",t).where("createdTime",">",this.now).orderBy("createdTime","desc").onSnapshot(function(t){var s=[];console.log(t),t.empty?(console.log({empty:!0}),e.newMessages=[]):(t.forEach(function(t){var e=t.data();e._id=t.id,s.push(e)}),console.log(s),e.newMessages=s,e.scrollChat()),e.isLoading=!1})}},mounted:function(){var t=this,e=this.messages.groupId;this.getOldMessage(e),this.getNewMessage(e);var s=this;setTimeout(function(){s.scrollChat()},100),document.getElementById("comment").focus(),Object(v.h)(document.getElementById("main-messages"),function(t){"right"==t?"0px"!=document.getElementById("listChat").style.left&&(document.getElementById("listChat").style.left="0"):"left"==t&&document.getElementById("userList")&&"0px"!=$("#userList").css("right")&&(document.getElementById("userList").style.right="0")}),this.id=this.$route.params.id,this.messages=this.chatList.filter(function(e){return e.groupId==t.id})[0]||{}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid main p-0",class:{"full-size":t.isMobile}},[t.isLoading?s("div",{staticClass:"loader-wrapper d-flex",staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,.3)","z-index":"999"}},[t._m(0)]):t._e(),t._v(" "),s("div",{staticClass:"full-size",staticStyle:{top:"0",background:"rgba(0,0,0,.4)","z-index":"9999",display:"none"},attrs:{id:"dropzonebg"},on:{drop:function(e){return e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){return e.preventDefault(),t.onDragover(e)},dragend:function(e){return e.preventDefault(),t.onDragend(e)}}},[s("div",{staticClass:"rounded text-white text-center p-1",staticStyle:{border:"5px dashed",height:"200px",width:"300px",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto calc(50% - 150px)","z-index":"-1"},on:{dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){return e.preventDefault(),t.onDragover(e)},dragend:function(e){return e.preventDefault(),t.onDragend(e)}}},[s("i",{staticClass:"fas fa-plus fa-10x",staticStyle:{height:"140px",width:"140px",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto calc(50% - 70px)","z-index":"-1"}}),t._v("\n        Drop Image Here\n      ")])]),t._v(" "),s("div",{staticClass:"container-fluid d-flex align-items-end card border-0 p-0",staticStyle:{height:"calc(100% - 56px)"},attrs:{id:"dropzone"},on:{dragover:function(e){return e.preventDefault(),t.onDragover(e)}}},[s("div",{staticClass:"container-fluid card-body p-0",staticStyle:{height:"calc(100vh - 56px - 64px)"}},[s("ul",{staticClass:"list-group list-group-flush d-flex flex-column-reverse main-message",class:{"full-page":t.isMobile},staticStyle:{"overflow-x":"hidden","padding-bottom":"20px"},attrs:{id:"main-messages"},on:{scroll:function(e){return t.loadOldMessage(e)}}},[t._l(t.newMessages,function(e,n){return s("a",{key:e.createdTime,staticClass:"list-group-item px-4 py-0",class:{isMobile:t.isMobile},staticStyle:{border:"none"}},[s("ChatMessage",{attrs:{c:e,next:t.newMessages[n+1],i:n}})],1)}),t._v(" "),t._l(t.oldMessages,function(e,n){return s("a",{key:e.createdTime,staticClass:"list-group-item px-4 py-0",class:{isMobile:t.isMobile},staticStyle:{border:"none"}},[s("ChatMessage",{attrs:{c:e,next:t.oldMessages[n+1],i:n}})],1)}),t._v(" "),t.isEnd?s("a",{staticClass:"list-group-item px-4 py-0",class:{isMobile:t.isMobile},staticStyle:{border:"none"}},[s("h2",{staticClass:"m-3"},[t._v("Say Hi to your friend!")])]):t._e()],2)]),t._v(" "),s("div",{staticClass:"container-fluid card-footer",staticStyle:{position:"relative"}},[t.images.length?s("div",{staticClass:"images-preview d-flex bg-light p-2"},t._l(t.images,function(e,n){return s("div",{key:n,staticClass:"image_preview border mx-1",style:"background-image: url("+e+")"},[t.isUploading?s("div",{staticClass:"text-white",staticStyle:{position:"absolute",top:"0",left:"0",right:"0",background:"rgba(0,0,0,.5)",bottom:"0"}},[s("i",{staticClass:"fas fa-spin fa-spinner fa-2x",staticStyle:{position:"relative",top:"25px",left:"35px"}})]):t._e(),t._v(" "),s("i",{staticClass:"fas fa-lg fa-times-circle bg-white rounded-circle text-dark",staticStyle:{position:"absolute",top:"5px",right:"5px",cursor:"pointer",display:"none"},on:{click:function(e){return t.removeImage(n)}}})])}),0):t._e(),t._v(" "),s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend border"},[s("label",{staticClass:"btn btn-primary m-0"},[s("i",{staticClass:"far fa-plus-square fa-lg fa-2x",staticStyle:{"vertical-align":"top"}}),t._v(" "),s("input",{staticStyle:{visibility:"hidden",display:"none"},attrs:{type:"file",id:"inputImage",multiple:""},on:{change:function(e){return t.chooseImage(e)}}})])]),t._v(" "),s("div",{staticClass:"p-2 border-top message form-control",class:{minimize:t.minimize},staticStyle:{overflow:"hidden auto","max-height":"42px"},attrs:{contenteditable:"true",id:"comment"},on:{keyup:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.searchEmoji(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),e.target!==e.currentTarget?null:t.sendMessage(e))},paste:function(e){return t.pasteImage(e)}}}),t._v(" "),s("div",{staticClass:"input-group-append border"},[s("button",{staticClass:"btn btn-primary m-0",attrs:{type:"button"},on:{click:function(e){t.emojiPicker=!t.emojiPicker}}},[s("img",{staticClass:"emoji",staticStyle:{height:"1.5em"},attrs:{src:"https://twemoji.maxcdn.com/2/72x72/1f600.png"}})]),t._v(" "),s("button",{staticClass:"btn btn-danger m-0",attrs:{type:"button"},on:{click:function(e){return t.sendMessage(e)}}},[s("i",{staticClass:"fas fa-reply"})])])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.emojiPicker,expression:"emojiPicker"}],staticClass:"emoji-picker"},[s("Picker",{style:{position:"absolute",bottom:t.isMobile?"68px":"124px",right:"0",width:t.isMobile?"100vw":"50vw",zIndex:300},attrs:{set:"twitter",native:!1,emojiTooltip:!t.isMobile,showPreview:!t.isMobile},on:{select:function(e){return t.selectEmoji(e)}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{margin:"auto !important","margin-top":"40vh !important"}},[e("div",{staticClass:"loader rounded-circle"})])}]};var b=s("VU/8")(w,I,!1,function(t){s("8ipc")},"data-v-50b081d4",null);e.default=b.exports},yp89:function(t,e,s){"use strict";e.d=function(t,e){if("Notification"in window)if("granted"===Notification.permission){var s=new Notification(e,{body:t.body,icon:t.icon,image:t.image});setTimeout(s.close.bind(s),4e3),s.onclick=function(){var t=new URL("http://localhost:8080",self.location.origin).href,e=clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var s=null,n=0;n<e.length;n++){var i=e[n];if(i.url===t){s=i;break}}return s?s.focus():clients.openWindow(t)});event.waitUntil(e)}}else"denied"!==Notification.permission&&Notification.requestPermission();else alert("This browser does not support desktop notification")},e.b=function(t){return a.any()?i()(t).short():i()(t).fromNow()},e.c=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i()(t).short(e)},e.a=function(t){return i()(t).calendar()},e.f=function(){return"_"+(Math.random()*Date.now()).toString(36).replace(".","")},e.g=function(t,e){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.sort(function(t,n){return"like"==e?n.like.length-t.like.length:s?new Date(n[e])-new Date(t[e]):new Date(t[e])-new Date(n[e])})},s.d(e,"e",function(){return a}),e.h=function(t,e){var s,n,i,o,a,r,c=t,l=e||function(t){};c.addEventListener("touchstart",function(t){var e=t.changedTouches[0];s="none";n=e.pageX,i=e.pageY,r=(new Date).getTime()},!1),c.addEventListener("touchend",function(t){t.stopPropagation();var e=t.changedTouches[0];o=e.pageX-n,a=e.pageY-i,(new Date).getTime()-r<=300&&(Math.abs(o)>=100&&Math.abs(a)<=100?s=o<0?"left":"right":Math.abs(a)>=200&&Math.abs(o)<=100&&(s=a<0?"up":"down")),l(s)},!1)};var n=s("PJh5"),i=s.n(n),o=s("EErm");s.n(o);var a={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return!!navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}}}},["NHnr"]);
//# sourceMappingURL=app.63d1957456e6e495724a.js.map