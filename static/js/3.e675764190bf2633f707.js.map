{"version":3,"sources":["webpack:///src/components/UserList.vue","webpack:///./src/components/UserList.vue?40a4","webpack:///./src/components/UserList.vue","webpack:///src/components/GroupChat.vue","webpack:///./src/components/GroupChat.vue?c644","webpack:///./src/components/GroupChat.vue"],"names":["UserList","name","computed","extends_default","Object","vuex_esm","unsub","state","postView","unsubPost","post","userInfo","auth","getUserStatus","status","getUsername","notify","inactiveNotify","inactiveNoti","chatList","chat","pendingRequests","friendNotify","converList","joinedGroupList","group","groupUserList","data","groupId","groupChatId","route","isMobile","utilities","any","wh","window","innerHeight","props","userList","Array","watch","n","o","this","$store","dispatch","id","_id","$route","_this","params","filter","g","membersId","beforeMount","created","_this2","console","log","mounted","$","bootstrapMaterialDesign","document","getElementById","dir","style","right","methods","countNew","c","count","i","content","length","owner","openConversation","openMenu","classList","add","remove","createConversation","u","_this3","then","forEach","indexOf","click","$router","push","blockUser","userId","unblockUser","removeFromGroup","components_UserList","render","_vm","_h","$createElement","_c","_self","staticClass","class","hide-user col-8","attrs","_l","user","key","staticStyle","min-width","role","data-toggle","aria-haspopup","aria-expanded","height","width","src","imgURL","_v","_s","aria-labelledby","on","$event","_e","blockedUser","includes","data-content","data-html-allowed","data-timeout","to","ownerId","staticRenderFns","src_components_UserList","__webpack_require__","normalizeComponent","ssrContext","GroupChat","components","Picker","emoji_mart","ChatMessage","defineProperty_default","messages","minimize","isFocus","message","newMessages","oldMessages","emojiPicker","emojiRegex","emojiRegex2","matchesEmoji","emo","images","files","canSendMessage","hasImage","hasFile","paths","filePaths","realImage","realFile","filelimit","converlength","isScrollable","now","limitMessage","messageLimit","Date","groupMessage","e","getOldMessage","getNewMessage","calendarTime","selectEmoji","emoji","innerHTML","twemoji","parse","convert","fromCodePoint","unified","colons","setCaret","searchEmoji","innerText","keyCode","match","a","substr","search","map","replaceEmoji","input","replace","_a","onDragover","addClass","onDragend","removeClass","onDrop","preventDefault","file","originalEvent","dataTransfer","reader","FileReader","onload","event","target","result","readAsDataURL","chooseImage","get","oversize","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","f","value","size","type","URL","createObjectURL","path","err","return","dropImage","stopPropagation","limitFiles","alert","_path","dragLeave","uploadFile","_ref2","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","actions_type","sent","fileCount","stop","_x","_x2","_x3","apply","arguments","pasteImage","clipboardData","text","getData","execCommand","uploadImage","_ref3","_callee2","_context2","_x4","_x5","_x6","removeImage","k","splice","revokeObjectURL","removeFile","title","$modal","show","buttons","default","sendMessage","retry","fileLength","imageLength","_i","textContent","d","setInterval","m","userImg","img","scrollChat","setTimeout","newMessage","$forceUpdate","assign_default","clearInterval","loadOldMessage","scrollTop","el","scrollHeight","range","createRange","sel","getSelection","setStart","childNodes","collapse","removeAllRanges","addRange","focus","dragEnter","checkImageLink","link","b","_this4","firestore","collection","where","orderBy","limit","querySnapshot","empty","doc","_this5","onSnapshot","closeUserList","css","_this6","vm","left","components_GroupChat","overflow-x","padding-bottom","createdTime","border","position","index","top","cursor","display","vertical-align","visibility","multiple","change","max-height","overflow-y","contenteditable","keyup","ctrlKey","shiftKey","altKey","metaKey","_k","paste","directives","rawName","expression","bottom","zIndex","set","native","emojiTooltip","showPreview","select","GroupChat_Component","GroupChat_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.e675764190bf2633f707.js","sourcesContent":["<template>\r\n  <div id=\"userList\" class=\"chat-list bg-secondary p-0\" :style=\"`overflow:hidden auto`\" :class=\"{'hide-user col-8': isMobile}\">\r\n    <div class=\"container-fluid p-0\">\r\n      <div class=\"list-group p-0 dropdown\" style=\"min-width: 200px\" v-for=\"user in groupUserList\" :key=\"user.id\" >\r\n        <a class=\"list-group-item list-group-item-action p-1 m-1 rounded text-white\" \r\n            role=\"button\" :id=\"user._id\" data-toggle=\"dropdown\" aria-haspopup=\"false\" aria-expanded=\"false\">\r\n          <img :src=\"user.imgURL\" style=\"height: 30px;width: 30px\" class=\"rounded-circle\">\r\n          {{user.name}}\r\n        </a>\r\n        <div class=\"dropdown-menu\" :aria-labelledby=\"user._id\">\r\n          <a class=\"dropdown-item\" @click=\"createConversation(user)\" v-if=\"user._id != userInfo._id\">Message</a>\r\n          <a class=\"dropdown-item\" v-if=\"user._id != userInfo._id && !userInfo.blockedUser.includes(user._id)\" @click=\"blockUser(user._id)\" data-toggle=\"snackbar\" :data-content=\"`Blocked ${user.name}`\" data-html-allowed=\"true\" data-timeout=\"0\">Block</a>\r\n          <a class=\"dropdown-item\" v-if=\"user._id != userInfo._id && userInfo.blockedUser.includes(user._id)\" @click=\"unblockUser(user._id)\" data-toggle=\"snackbar\" :data-content=\"`Unblocked ${user.name}`\" data-html-allowed=\"true\" data-timeout=\"0\">Unblock</a>\r\n          <router-link to=\"/profile\" class=\"dropdown-item\" v-if=\"user._id == userInfo._id\">Profile</router-link>\r\n          <router-link :to=\"'/profile/' + user._id\" class=\"dropdown-item\" v-if=\"user._id != userInfo._id\">Profile</router-link>\r\n          <a class=\"dropdown-item\" v-if=\"userInfo._id == group[0].ownerId && user._id != userInfo._id\" @click=\"removeFromGroup(user._id)\">Remove from group</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { isMobile, swipedetect } from \"../utilities\";\r\n\r\nexport default {\r\n  name: \"UserList\",\r\n  computed: {\r\n    ...mapState({\r\n      unsub: state => state.postView.unsubPost,\r\n      post: state => state.postView.post,\r\n      userInfo: state => state.auth.userInfo,\r\n      getUserStatus: state => state.auth.userInfo.status,\r\n      getUsername: state => state.auth.userInfo.name,\r\n      notify: state => (state.auth.notify ? state.auth.notify : []),\r\n      inactiveNotify: state =>\r\n        state.auth.inactiveNoti ? state.auth.inactiveNoti : [],\r\n      chatList: state => state.chat.chatList,\r\n      pendingRequests: state => state.auth.pendingRequests,\r\n      friendNotify: state => state.auth.friendNotify,\r\n      converList: state => state.chat.converList,\r\n      joinedGroupList: state => state.group.joinedGroupList,\r\n      groupUserList: state => state.group.groupUserList\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      groupId: \"\",\r\n      groupChatId: \"\",\r\n      route: \"\",\r\n      isMobile: isMobile.any(),\r\n      wh: window.innerHeight + 'px',\r\n      group: ''\r\n    };\r\n  },\r\n  props: {\r\n    userList: Array\r\n  },\r\n  watch: {\r\n    userInfo(n, o) {\r\n      this.$store.dispatch(\"getAllUserWithConversation\", this.userInfo.id);\r\n      this.$store.dispatch(\"getAllJoinedGroup\", this.userInfo._id);\r\n    },\r\n    $route(n, o) {\r\n      this.groupId = n.params.id;\r\n      this.route = n.name;\r\n      this.group = this.joinedGroupList.filter(g => g.groupId == this.$route.params.id);\r\n      this.$store.dispatch('getAllGroupUser', this.group[0].membersId);\r\n    },\r\n    converList(n) {\r\n      // this.$store.dispatch(\"getAllUserWithConversation\", this.userInfo.id);\r\n    },\r\n    // joinedGroupList(n) {\r\n    //   if (this.$route.name == \"group\") {\r\n    //     this.$router.push(\"/group/\" + n[n.length - 1].groupId);\r\n    //   }\r\n    // }\r\n  },\r\n  beforeMount() {\r\n    // this.$store.dispatch(\"getAllUserWithConversation\", this.userInfo.id);\r\n  },\r\n  created() {\r\n    this.group = this.joinedGroupList.filter(g => g.groupId == this.$route.params.id);\r\n    this.$store.dispatch('getAllGroupUser', this.group[0].membersId);\r\n    console.log(this.group, this.groupUserList);\r\n  },\r\n  mounted() {\r\n    $(\"#listChat\").bootstrapMaterialDesign();\r\n    swipedetect(document.getElementById('userList'), dir => {\r\n      if (dir == \"right\") {\r\n        document.getElementById('userList').style.right = \"-100%\"\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    countNew: function(c) {\r\n      let isNew = true,\r\n        count = 0;\r\n      for (let i = c.content.length - 1; i >= 0; i--) {\r\n        if (c.content[i].owner != this.userInfo.name && isNew) {\r\n          count++;\r\n        }\r\n      }\r\n      return count;\r\n    },\r\n    openConversation: function(c) {},\r\n    openMenu: function() {\r\n      if (document.getElementById(\"userList\").style.right == \"-100%\") {\r\n        document.getElementById(\"menu-overlay\").classList.add('menu-overlay');\r\n        document.getElementById(\"userList\").style.right = \"0\";\r\n      } else {\r\n        document.getElementById(\"menu-overlay\").classList.remove('menu-overlay');\r\n        document.getElementById(\"userList\").style.right = \"-100%\";\r\n      }\r\n    },\r\n    createConversation: function(u) {\r\n      this.$store.dispatch(\"CREATE_CONVERSATION\", {\r\n        u,\r\n        userInfo: this.userInfo\r\n      }).then(() => {\r\n        this.chatList.forEach(c => {\r\n          let id = u.id + this.userInfo.id;\r\n          if (c.membersId.indexOf(id) >= 0) {\r\n            $('a[href=\"#/personal\"]').click();\r\n            this.$router.push('/personal/' + c.groupId)\r\n          }\r\n        })\r\n      });\r\n      // this.$store.dispatch(\"GET_CONVERSATION\", this.userInfo.id + u.id);\r\n    },\r\n    blockUser(id) {\r\n      this.$store.dispatch(\"BLOCK_USER\", {\r\n        id: this.userInfo.id,\r\n        userId: id\r\n      });\r\n    },\r\n    unblockUser(id) {\r\n      this.$store.dispatch(\"UNBLOCK_USER\", { id: this.userInfo.id, userId: id });\r\n    },\r\n    removeFromGroup(id) {\r\n      this.$store.dispatch(\"removeFromGroup\", { id: id, groupId: this.group[0].groupId});\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.list-group-item.d-flex.justify-content-between.align-items-center:hover {\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n  cursor: pointer;\r\n}\r\na {\r\n  text-decoration: none;\r\n}\r\n.bg-secondary.text-white {\r\n  border-left: 7px solid var(--primary);\r\n}\r\n.hide-user {\r\n  right: -100%;\r\n  position: fixed;\r\n  top: 0;\r\n  z-index: 9999;\r\n  top: 56px;\r\n  height: 100%;\r\n}\r\n.chat-list {\r\n  transition: all .4s ease-in-out;\r\n}\r\n.dropdown-item {\r\n  cursor: pointer;\r\n}\r\n.list-group-item-action:hover {\r\n  background-color: rgba(0, 0, 0, 0.2)\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/UserList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-list bg-secondary p-0\",class:{'hide-user col-8': _vm.isMobile},style:(\"overflow:hidden auto\"),attrs:{\"id\":\"userList\"}},[_c('div',{staticClass:\"container-fluid p-0\"},_vm._l((_vm.groupUserList),function(user){return _c('div',{key:user.id,staticClass:\"list-group p-0 dropdown\",staticStyle:{\"min-width\":\"200px\"}},[_c('a',{staticClass:\"list-group-item list-group-item-action p-1 m-1 rounded text-white\",attrs:{\"role\":\"button\",\"id\":user._id,\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"false\",\"aria-expanded\":\"false\"}},[_c('img',{staticClass:\"rounded-circle\",staticStyle:{\"height\":\"30px\",\"width\":\"30px\"},attrs:{\"src\":user.imgURL}}),_vm._v(\"\\n        \"+_vm._s(user.name)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"dropdown-menu\",attrs:{\"aria-labelledby\":user._id}},[(user._id != _vm.userInfo._id)?_c('a',{staticClass:\"dropdown-item\",on:{\"click\":function($event){return _vm.createConversation(user)}}},[_vm._v(\"Message\")]):_vm._e(),_vm._v(\" \"),(user._id != _vm.userInfo._id && !_vm.userInfo.blockedUser.includes(user._id))?_c('a',{staticClass:\"dropdown-item\",attrs:{\"data-toggle\":\"snackbar\",\"data-content\":(\"Blocked \" + (user.name)),\"data-html-allowed\":\"true\",\"data-timeout\":\"0\"},on:{\"click\":function($event){return _vm.blockUser(user._id)}}},[_vm._v(\"Block\")]):_vm._e(),_vm._v(\" \"),(user._id != _vm.userInfo._id && _vm.userInfo.blockedUser.includes(user._id))?_c('a',{staticClass:\"dropdown-item\",attrs:{\"data-toggle\":\"snackbar\",\"data-content\":(\"Unblocked \" + (user.name)),\"data-html-allowed\":\"true\",\"data-timeout\":\"0\"},on:{\"click\":function($event){return _vm.unblockUser(user._id)}}},[_vm._v(\"Unblock\")]):_vm._e(),_vm._v(\" \"),(user._id == _vm.userInfo._id)?_c('router-link',{staticClass:\"dropdown-item\",attrs:{\"to\":\"/profile\"}},[_vm._v(\"Profile\")]):_vm._e(),_vm._v(\" \"),(user._id != _vm.userInfo._id)?_c('router-link',{staticClass:\"dropdown-item\",attrs:{\"to\":'/profile/' + user._id}},[_vm._v(\"Profile\")]):_vm._e(),_vm._v(\" \"),(_vm.userInfo._id == _vm.group[0].ownerId && user._id != _vm.userInfo._id)?_c('a',{staticClass:\"dropdown-item\",on:{\"click\":function($event){return _vm.removeFromGroup(user._id)}}},[_vm._v(\"Remove from group\")]):_vm._e()],1)])}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4995cf85\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/UserList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4995cf85\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4995cf85\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4995cf85\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UserList.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"container-fluid main p-0\" :class=\"[isMobile ? 'full-size' : 'row m-0']\">\r\n    <div\r\n      class=\"d-flex align-items-end card border-0 p-0\"\r\n      style=\"height: 100%\"\r\n      :class=\"[isMobile ? '' : 'col-10']\"\r\n    >\r\n      <div class=\"container-fluid card-body p-0\" style=\"height: calc(100vh - 56px - 64px)\">\r\n        <ul\r\n          id=\"group-messages\"\r\n          class=\"list-group list-group-flush d-flex flex-column-reverse main-message\"\r\n          style=\"overflow-x:hidden;padding-bottom: 20px;\"\r\n          @click=\"closeUserList()\"\r\n        >\r\n          <a\r\n            class=\"list-group-item px-4 py-1\"\r\n            v-for=\"(c, i) in newMessages\"\r\n            :key=\"c.createdTime\"\r\n            style=\"border: none;\"\r\n          >\r\n            <ChatMessage :c=\"c\" :next=\"newMessages[i+1]\"/>\r\n          </a>\r\n          <hr class=\"m-1\" v-if=\"!oldMessages\">\r\n          <a\r\n            class=\"list-group-item px-4 py-1\"\r\n            v-for=\"(c, i) in oldMessages\"\r\n            :key=\"c.createdTime\"\r\n            style=\"border: none;\"\r\n          >\r\n            <ChatMessage :c=\"c\" :next=\"oldMessages[i+1]\"/>\r\n          </a>\r\n        </ul>\r\n      </div>\r\n      <div class=\"container-fluid card-footer\" style=\"position: relative\">\r\n        <div class=\"images-preview d-flex justify-content-center bg-light p-2\" v-if=\"images.length\">\r\n          <div\r\n            class=\"image_preview border mx-1\"\r\n            v-for=\"(i, index) in images\"\r\n            :key=\"index\"\r\n            :style=\"'background-image: url('+ i +')'\"\r\n          >\r\n            <i\r\n              class=\"fas fa-lg fa-times-circle bg-white rounded-circle text-dark\"\r\n              style=\"position: absolute; top: 5px;right: 5px;cursor: pointer;display:none\"\r\n              @click=\"removeImage(index)\"\r\n            ></i>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend border\">\r\n            <label class=\"btn btn-primary m-0\">\r\n              <i class=\"far fa-plus-square fa-lg fa-2x\" style=\"vertical-align: top;\"></i>\r\n              <input\r\n                type=\"file\"\r\n                id=\"inputImage\"\r\n                multiple\r\n                style=\"visibility: hidden;display: none\"\r\n                @change=\"chooseImage($event)\"\r\n              >\r\n            </label>\r\n          </div>\r\n\r\n          <div\r\n            contenteditable=\"true\"\r\n            class=\"p-2 border-top message form-control\"\r\n            style=\"max-height: 42px; overflow-y:auto\"\r\n            id=\"comment\"\r\n            :class=\"{ minimize: minimize }\"\r\n            @keyup.exact=\"searchEmoji($event)\"\r\n            @keyup.exact.enter=\"sendMessage($event)\"\r\n            @paste=\"pasteImage($event)\"\r\n          ></div>\r\n\r\n          <div class=\"input-group-append border\">\r\n            <button class=\"btn btn-primary m-0\" type=\"button\" @click=\"emojiPicker = !emojiPicker;\">\r\n              <img\r\n                src=\"https://twemoji.maxcdn.com/2/72x72/1f600.png\"\r\n                class=\"emoji\"\r\n                style=\"height: 1.5em\"\r\n              >\r\n            </button>\r\n            <button class=\"btn btn-danger m-0\" type=\"button\" @click=\"sendMessage($event);\">\r\n              <i class=\"fas fa-reply\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <UserList :class=\"[isMobile ? 'p-0' : 'col-2 p-0']\"/>\r\n    <div class=\"emoji-picker\" v-show=\"emojiPicker\">\r\n      <Picker\r\n        :set=\"'twitter'\"\r\n        :native=\"false\"\r\n        :emojiTooltip=\"!isMobile\"\r\n        :showPreview=\"!isMobile\"\r\n        :style=\"{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\tbottom: isMobile ? '68px' :'124px',\r\n\t\t\t\t\t\tright: isMobile ? '0' :'17%',\r\n\t\t\t\t\t\twidth: isMobile ? '100vw' : '50vw' ,\r\n\t\t\t\t\t\tzIndex: 300,\r\n\t\t\t\t\t}\"\r\n        @select=\"selectEmoji($event);\"\r\n      />\r\n    </div>\r\n    <!-- <v-dialog /> -->\r\n    <!-- <modal name=\"view-post\" :reset=\"true\" :adaptive=\"true\" :delay=\"100\"></modal> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Picker, emojiIndex } from \"emoji-mart-vue\";\r\nimport moment from \"moment\";\r\nimport db from \"../database/firestore\";\r\nimport query from \"../database/db.actions\";\r\nimport {\r\n  GET_CONVERSATION,\r\n  SEND_MESSAGE,\r\n  UPLOAD_IMAGE_TO_CHAT,\r\n  REMOVE_UPLOAD_IMAGE,\r\n  FILE_UPLOAD,\r\n  REMOVE_UPLOAD_FILE\r\n} from \"../store/actions.type\";\r\n\r\nimport { mapState } from \"vuex\";\r\nimport { convertDate, isMobile, swipedetect } from \"../utilities/index\";\r\n\r\nimport ChatMessage from \"./ChatMessage\";\r\nimport UserList from \"./UserList\";\r\n\r\nexport default {\r\n  name: \"Group\",\r\n  components: {\r\n    Picker,\r\n    ChatMessage,\r\n    UserList\r\n  },\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      isMobile: isMobile.any(),\r\n      messages: {},\r\n      groupId: this.$route.params.id,\r\n      chat: [],\r\n      minimize: false,\r\n      isFocus: true,\r\n      message: \"\",\r\n      newMessages: [],\r\n      oldMessages: [],\r\n      emojiPicker: false,\r\n      emojiRegex: /(:[^\\s]*(?:::[^:\\s]*)*[^:\\s]:)|(:[^\\s]*(?:::[^:\\s]*)*[^:\\s])/g,\r\n      emojiRegex2: /:\\w{2,}:/g,\r\n      matchesEmoji: [],\r\n      emo: \"\",\r\n      images: [], // url images\r\n      files: [], // url file\r\n      canSendMessage: true,\r\n      hasImage: false,\r\n      hasFile: false,\r\n      paths: [], // img path \"_id/time_image_name\"\r\n      filePaths: [], // file path\r\n      realImage: [], // image file object\r\n      realFile: [], // file object\r\n      imgURL: [],\r\n      filelimit: 20,\r\n      converlength: 0,\r\n      isScrollable: false,\r\n      now: 0,\r\n      limitMessage: 30,\r\n      messageLimit: 1000,\r\n      now: Date.now()\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      userInfo: state => state.auth.userInfo,\r\n      getUserStatus: state => state.auth.userInfo.status,\r\n      getUsername: state => state.auth.userInfo.name,\r\n      notify: state => (state.auth.notify ? state.auth.notify : []),\r\n      inactiveNotify: state =>\r\n        state.auth.inactiveNoti ? state.auth.inactiveNoti : [],\r\n      joinedGroupList: state => state.group.joinedGroupList,\r\n      pendingRequests: state => state.auth.pendingRequests,\r\n      friendNotify: state => state.auth.friendNotify,\r\n      groupMessage: state => state.group.groupMessage\r\n    })\r\n  },\r\n  watch: {\r\n    id() {\r\n      this.messages = this.joinedGroupList.filter(e => e.groupId == this.id)[0] || {};\r\n      console.log();\r\n    },\r\n    $route(n) {\r\n      let groupId = this.$route.params.id;\r\n      this.groupId = groupId;\r\n      this.getOldMessage(groupId);\r\n      this.getNewMessage(groupId);\r\n    }\r\n  },\r\n  methods: {\r\n    calendarTime: convertDate,\r\n    selectEmoji(emoji) {\r\n      document.getElementById(\"comment\").innerHTML +=\r\n        twemoji.parse(twemoji.convert.fromCodePoint(emoji.unified)) +\r\n        '<div style=\"display: none\">' +\r\n        emoji.colons +\r\n        \"</div>\";\r\n      this.emojiPicker = false;\r\n      this.setCaret();\r\n    },\r\n    searchEmoji(e) {\r\n      this.message = document.getElementById(\"comment\").innerText;\r\n      if ((this.message.length > 2 && e.keyCode == 32) || e.keyCode == 13) {\r\n        this.emo = this.message.match(this.emojiRegex);\r\n        let a = this.emo ? this.emo[this.emo.length - 1].substr(1) : \"\";\r\n        if (a.length > 1) {\r\n          this.matchesEmoji = emojiIndex.search(a).map(o => o);\r\n          this.replaceEmoji();\r\n        }\r\n      }\r\n    },\r\n    replaceEmoji(emoji) {\r\n      let input = document.getElementById(\"comment\");\r\n      if (emoji) {\r\n        this.message = input.innerHTML;\r\n        let a = twemoji.parse(twemoji.convert.fromCodePoint(emoji.unified));\r\n        input.innerHTML = this.message.replace(\r\n          this.emo,\r\n          a + '<div style=\"display: none\">' + emoji.colons + \"</div>\"\r\n        );\r\n        this.setCaret();\r\n        this.matchesEmoji = [];\r\n        this.emo = [];\r\n      } else if (this.matchesEmoji.length) {\r\n        this.message = input.innerHTML;\r\n        let a = twemoji.parse(\r\n          twemoji.convert.fromCodePoint(this.matchesEmoji[0].unified)\r\n        );\r\n        input.innerHTML = this.message.replace(\r\n          this.emo,\r\n          a +\r\n            '<div style=\"display: none\">' +\r\n            this.matchesEmoji[0].colons +\r\n            \"</div>\"\r\n        );\r\n        this.setCaret();\r\n        this.matchesEmoji = [];\r\n        this.emo = [];\r\n      }\r\n    },\r\n    onDragover() {\r\n      // this.isDragging = true;\r\n      $(\"#dropzonebg\").addClass(\"show\");\r\n      console.log(1);\r\n      return false;\r\n    },\r\n    onDragend() {\r\n      // this.isDragging = false;\r\n      $(\"#dropzonebg\").removeClass(\"show\");\r\n\r\n      console.log(2);\r\n\r\n      return false;\r\n    },\r\n    onDrop(e) {\r\n      // this.isDragging = false;\r\n      $(\"#dropzonebg\").removeClass(\"show\");\r\n      console.log(e);\r\n      e.preventDefault();\r\n\r\n      var file = e.originalEvent.dataTransfer.files[0],\r\n        reader = new FileReader();\r\n\r\n      reader.onload = function(event) {\r\n        // $dropimg.css(\"background-image\", \"url(\" + event.target.result + \")\");\r\n        console.log(event.target.result);\r\n      };\r\n\r\n      console.log(file);\r\n      reader.readAsDataURL(file);\r\n\r\n      return false;\r\n    },\r\n    chooseImage(e) {\r\n      let file = $(\"#inputImage\").get(0).files,\r\n        vm = this,\r\n        oversize = [];\r\n      // if (file.length >= this.filelimit || this.images.length >= this.filelimit) {\r\n      //   vm.oversize(\r\n      //     `LIMIT IMAGE IS ${filelimit}`,\r\n      //     `Limit images per upload is ${filelimit}`\r\n      //   );\r\n      // } else\r\n      for (let f of file) {\r\n        if (f.size < 5000000) {\r\n          if (\r\n            f.type == \"image/png\" ||\r\n            f.type == \"image/jpeg\" ||\r\n            f.type == \"image/gif\"\r\n          ) {\r\n            let reader = new FileReader();\r\n            this.realImage.push(f);\r\n            this.images.push(window.URL.createObjectURL(f));\r\n            let path =\r\n              this.messages.groupId + \"/\" + Date.now() + \"_\" + file[0].name;\r\n            this.paths.push(path);\r\n            // reader.onload = function(event) {\r\n            // vm.images.push(event.target.result);\r\n            // };\r\n            // reader.readAsDataURL(f);\r\n          } else {\r\n          }\r\n        } else {\r\n          oversize.push(f.name);\r\n        }\r\n      }\r\n      if (oversize.length) {\r\n        vm.oversize(\r\n          \"YOUR IMAGE IS TO BIG\",\r\n          `Try other image or reduce image size.\\n \r\n          <p>Images: <code>${oversize}</code></p>`\r\n        );\r\n      }\r\n    },\r\n    dropImage(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      let dt = e.dataTransfer;\r\n      let files = dt.files;\r\n      if (files.length) {\r\n        if (files.length >= this.limitFiles)\r\n          alert(\"Limit\" + this.limitFiles + \"files\");\r\n        for (let i = 0; i < files.length; i++) {\r\n          if (files[i].type != \"image/jpeg\" && files[i].type != \"image/png\") {\r\n            let path =\r\n              this.messages.groupId + \"/\" + Date.now() + \"_\" + files[i].name;\r\n            this.canSendMessage = false;\r\n            this.hasFile = true;\r\n            this.filePaths.push(path);\r\n            this.realFile.push(files[i]);\r\n            // this.uploadFile(files[i], path, id);\r\n          } else if (\r\n            files[i].type == \"image/jpeg\" ||\r\n            files[i].type == \"image/png\"\r\n          ) {\r\n            this.canSendMessage = false;\r\n            this.hasImage = true;\r\n            let path =\r\n              this.messages.groupId + \"/\" + Date.now() + \"_\" + files[i].name;\r\n            this.paths.push(path);\r\n            this.images.push(window.URL.createObjectURL(files[i]));\r\n            this.realImage.push(files[i]);\r\n            // this.uploadImage(files[i], path, id);\r\n          }\r\n        }\r\n      }\r\n      this.dragLeave(e);\r\n    },\r\n    uploadFile: async function(file, path, id) {\r\n      this.$store.dispatch(FILE_UPLOAD, {\r\n        file: file,\r\n        path: path,\r\n        id: id\r\n      });\r\n      // let interval = setInterval(() => {\r\n      this.files = await this.$store.state.chat.files[id];\r\n      let count = await this.$store.state.chat.fileCount;\r\n      // if (this.files.toString() == this.filePaths.toString() && count == this.filePaths.length) {\r\n      // \t// clearInterval(interval);\r\n      // \tthis.canSendMessage = true;\r\n      // }\r\n      console.log(this.files);\r\n      // }, 200);\r\n    },\r\n    pasteImage(e) {\r\n      let id = this.messages.groupId;\r\n      e.preventDefault();\r\n      let file = e.clipboardData.files;\r\n      if (file.length) {\r\n        let path = id + \"/\" + Date.now() + \"_\" + file[0].name;\r\n        this.paths.push(path);\r\n        this.images.push(window.URL.createObjectURL(file[0]));\r\n        this.realImage.push(file[0]);\r\n      }\r\n      let text = (e.originalEvent || e).clipboardData.getData(\"text/plain\");\r\n      document.execCommand(\"insertHTML\", false, text);\r\n\r\n      // let id = this.messages.id;\r\n      // let file = e.clipboardData.files;\r\n      // if (file.length) {\r\n      //   if (this.images.length > 7) {\r\n      //     return;\r\n      //   }\r\n      //   // this.canSendMessage = false;\r\n      //   this.hasImage = true;\r\n      //   let path = this.messages.groupId + \"/\" + Date.now() + file[0].name;\r\n      //   this.paths.push(path);\r\n      //   this.images.push(window.URL.createObjectURL(file[0]));\r\n      //   this.realImage.push(file[0]);\r\n      //   this.$forceUpdate();\r\n      //   // this.uploadImage(file[0], path, id);\r\n      // } else {\r\n      //   return;\r\n      // }\r\n      // e.preventDefault();\r\n      // let text = (e.originalEvent || e).clipboardData.getData(\"text/plain\");\r\n      // document.execCommand(\"insertHTML\", false, text);\r\n    },\r\n    uploadImage: async function(file, path, id) {\r\n      // this.canSendMessage = false;\r\n\r\n      this.$store.dispatch(UPLOAD_IMAGE_TO_CHAT, {\r\n        file: file,\r\n        path: path,\r\n        id: id\r\n      });\r\n      // let interval = setInterval(() => {\r\n      let count = this.$store.state.chat.fileCount;\r\n      this.imgURL = await this.$store.state.chat.images[id];\r\n      // if (this.images.toString() == this.paths.toString() && count == this.paths.length) {\r\n      // \t// clearInterval(interval);\r\n      // \tthis.canSendMessage = true;\r\n      // }\r\n      console.log(this.imgURL);\r\n      // }, 200);\r\n    },\r\n    removeImage(k) {\r\n      // this.$store.dispatch(REMOVE_UPLOAD_IMAGE, {\r\n      // \tamount: 1,\r\n      // \tindex: k,\r\n      // \tpath: this.paths[k],\r\n      // \tid: this.messages.id\r\n      // });\r\n      this.images.splice(k, 1);\r\n      this.realImage.splice(k, 1);\r\n      window.URL.revokeObjectURL(this.realImage.splice(k, 1));\r\n      this.paths.splice(k, 1);\r\n      if (this.images.length == 0) this.hasImage = false;\r\n    },\r\n    removeFile(k) {\r\n      // this.$store.dispatch(REMOVE_UPLOAD_FILE, {\r\n      // \tamount: 1,\r\n      // \tindex: k,\r\n      // \tpath: this.filePaths[k],\r\n      // \tid: this.messages.id\r\n      // });\r\n      // this.files.splice(k, 1);\r\n      this.filePaths.splice(k, 1);\r\n      this.realFile.splice(k, 1);\r\n      if (this.files.length == 0) this.hasFile = false;\r\n    },\r\n    oversize(title, text) {\r\n      this.$modal.show(\"dialog\", {\r\n        title,\r\n        text,\r\n        buttons: [\r\n          {\r\n            title: \"CLOSE\",\r\n            default: false\r\n          }\r\n        ]\r\n      });\r\n    },\r\n    sendMessage(e) {\r\n      this.$store.dispatch('resetImage')\r\n      let vm = this;\r\n      e.preventDefault();\r\n      let id = this.messages.groupId;\r\n      let retry = 0;\r\n      if (this.emo) this.searchEmoji(e);\r\n\r\n      if (this.hasFile) {\r\n        let fileLength = this.filePaths.length - 1;\r\n        for (let i = 0; i <= fileLength; i++) {\r\n          this.uploadFile(this.realFile[i], this.filePaths[i], id);\r\n        }\r\n      }\r\n\r\n      if (this.realImage.length) {\r\n        let imageLength = this.paths.length;\r\n        for (let i = 0; i < imageLength; i++) {\r\n          this.uploadImage(this.realImage[i], this.paths[i], id);\r\n        }\r\n      }\r\n\r\n      this.message = document.getElementById(\"comment\").textContent;\r\n      if (this.message.length > this.messageLimit) {\r\n        vm.oversize(\r\n          \"YOUR MESSAGE IS TOO LONG\",\r\n          \"Please make your message shorter. Limit is 1000 characters\"\r\n        );\r\n      } else {\r\n        let vm = this;\r\n        let d = setInterval(() => {\r\n          if (\r\n            (this.message.length ||\r\n              this.imgURL.length == this.images.length ||\r\n              this.files.length) &&\r\n            this.canSendMessage\r\n          ) {\r\n            let m = {\r\n              // membersId: this.messages.membersId[0],\r\n              message: this.message,\r\n              owner: this.userInfo.name,\r\n              ownerId: this.userInfo._id,\r\n              _id: this.messages.id,\r\n              userImg: this.userInfo.imgURL,\r\n              img: this.imgURL,\r\n              file: this.files,\r\n              groupId: this.messages.groupId\r\n            };\r\n            this.$store.dispatch(SEND_MESSAGE, m).then(this.scrollChat());\r\n            document.getElementById(\"comment\").innerHTML = \"\";\r\n            this.images = [];\r\n            this.files = [];\r\n            this.paths = [];\r\n            this.filePaths = [];\r\n            this.hasImage = false;\r\n            this.hasFile = false;\r\n            this.realFile = [];\r\n            this.realImage = [];\r\n            this.imgURL = [];\r\n            setTimeout(() => {\r\n              console.log(this.$store.state.chat.newMessage);\r\n              this.$forceUpdate();\r\n              this.scrollChat();\r\n            }, 10);\r\n            this.newMessages = Object.assign(\r\n              this.newMessages,\r\n              this.$store.state.chat.newMessage\r\n            );\r\n            clearInterval(d);\r\n            // if (!this.paths.length) {\r\n            // \tthis.$store.dispatch(REMOVE_UPLOAD_IMAGE, {\r\n            // \t\tamount: 0,\r\n            // \t\tid: this.messages.id\r\n            // \t});\r\n            // }\r\n            // if (!this.filePaths.length) {\r\n            // \tthis.$store.dispatch(REMOVE_UPLOAD_FILE, {\r\n            // \t\tamount: 0,\r\n            // \t\tid: this.messages.id\r\n            // \t});\r\n            // }\r\n            // clearInterval(interval);\r\n          } else {\r\n            console.log(\"Cant send messsage\");\r\n          }\r\n          retry++;\r\n          if (retry == 100) {\r\n            clearInterval(d);\r\n            console.log(\"Timeout\");\r\n          }\r\n        }, 1000);\r\n        // }, 200);\r\n      }\r\n    },\r\n    loadOldMessage(e) {\r\n      let scrollTop = e.target.scrollTop,\r\n        groupId = this.messages.groupId;\r\n\r\n      if (\r\n        scrollTop < 100 &&\r\n        Date.now() - this.now > 2000 &&\r\n        this.isScrollable\r\n      ) {\r\n        this.now = Date.now();\r\n        this.isScrollable = false;\r\n        this.limitMessage += 10;\r\n        this.getOldMessage(groupId);\r\n      }\r\n    },\r\n    scrollChat() {\r\n      this.isScrollable = false;\r\n      window.setTimeout(() => {\r\n        let el = document.getElementById(\"main-messages\");\r\n        if (el) el.scrollTop = el.scrollHeight;\r\n        this.isScrollable = true;\r\n      }, 100);\r\n    },\r\n    setCaret() {\r\n      setTimeout(() => {\r\n        var el = document.getElementById(\"comment\");\r\n        var range = document.createRange();\r\n        var sel = window.getSelection();\r\n        if (!el || el.innerHTML == \"\") return;\r\n        else\r\n          range.setStart(\r\n            el.childNodes[el.childNodes.length - 1],\r\n            el.childNodes[el.childNodes.length - 1].length\r\n          );\r\n        range.collapse(true);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n        el.focus();\r\n      }, 200);\r\n    },\r\n    dragEnter(e) {\r\n      document.getElementById(\"dropzone\").classList.add(\"border-primary\");\r\n    },\r\n    dragLeave(e) {\r\n      document.getElementById(\"dropzone\").classList.remove(\"border-primary\");\r\n    },\r\n    checkImageLink(link) {\r\n      let a = link.indexOf(\".jpg\");\r\n      let b = link.indexOf(\".png\");\r\n      let c = link.indexOf(\".jpeg\");\r\n      if (a > -1 || b > -1 || c > -1) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    getOldMessage(groupId) {\r\n      db.collection(\"message\")\r\n        .where(\"groupId\", \"==\", groupId)\r\n        .where(\"createdTime\", \"<\", this.now)\r\n        .orderBy(\"createdTime\", \"desc\")\r\n        .limit(this.limitMessage)\r\n        .get()\r\n        .then(querySnapshot => {\r\n          let a = [];\r\n          console.log(querySnapshot);\r\n          if (querySnapshot.empty) {\r\n            console.log({ empty: true });\r\n            this.oldMessages = [];\r\n          } else {\r\n            querySnapshot.forEach(doc => {\r\n              a.push(doc.data());\r\n            });\r\n            console.log(a);\r\n            this.oldMessages = a;\r\n          }\r\n        });\r\n      this.isScrollable = true;\r\n    },\r\n    getNewMessage(groupId) {\r\n      this.unsub = db\r\n        .collection(\"message\")\r\n        .where(\"groupId\", \"==\", groupId)\r\n        .where(\"createdTime\", \">\", this.now)\r\n        .orderBy(\"createdTime\", \"desc\")\r\n        .onSnapshot(querySnapshot => {\r\n          let a = [];\r\n          console.log(querySnapshot);\r\n          if (querySnapshot.empty) {\r\n            console.log({ empty: true });\r\n            this.newMessages = [];\r\n          } else {\r\n            querySnapshot.forEach(doc => {\r\n              a.push(doc.data());\r\n            });\r\n            console.log(a);\r\n            this.newMessages = a;\r\n            this.scrollChat();\r\n          }\r\n        });\r\n    },\r\n    closeUserList() {\r\n      if (this.isMobile && document.getElementById(\"userList\"))\r\n        if ($(\"#userList\").css(\"right\") == \"0px\")\r\n          document.getElementById(\"userList\").style.right = \"-100%\";\r\n    }\r\n  },\r\n  mounted: function() {\r\n    let groupId = this.$route.params.id;\r\n    console.log(groupId);\r\n    this.getOldMessage(groupId);\r\n    this.getNewMessage(groupId);\r\n    // this.$store.dispatch(\"GET_NEW_MESSAGE\", { groupId, time: Date.now() });\r\n    // this.$store.dispatch(\"GET_NEW_MESSAGE\", { groupId, time: Date.now(), limit: 50 });\r\n    let vm = this;\r\n    setTimeout(() => {\r\n      vm.scrollChat();\r\n    }, 100);\r\n    swipedetect(document.getElementById(\"group-messages\"), dir => {\r\n      if (dir == \"right\") {\r\n        if (\r\n          document.getElementById(\"listChat\").style.left != \"0px\" &&\r\n          document.getElementById(\"userList\") &&\r\n          $(\"#userList\").css(\"right\") != \"0px\"\r\n        ) {\r\n          document.getElementById(\"listChat\").style.left = \"0\";\r\n        } else if (document.getElementById(\"userList\").style.right == \"0px\")\r\n          document.getElementById(\"userList\").style.right = \"-100%\";\r\n      } else if (dir == \"left\") {\r\n        if (document.getElementById(\"userList\"))\r\n          if ($(\"#userList\").css(\"right\") != \"0px\")\r\n            document.getElementById(\"userList\").style.right = \"0\";\r\n      }\r\n    });\r\n    this.id = this.$route.params.id;\r\n    this.messages = this.joinedGroupList.filter(e => e.groupId == this.id)[0] || {};\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  width: 100%;\r\n}\r\n.show {\r\n  display: block !important;\r\n}\r\n.image_preview {\r\n  /* width: 100%; */\r\n  height: 100%;\r\n  background: no-repeat center;\r\n  background-size: cover;\r\n  position: relative;\r\n  z-index: 3;\r\n  min-width: 100px;\r\n}\r\n.images-preview {\r\n  position: absolute;\r\n  top: -100px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: -100px;\r\n  height: 100px;\r\n  z-index: 2;\r\n  overflow: auto hidden;\r\n}\r\n.image_preview:hover i {\r\n  display: block !important;\r\n}\r\n.user-image {\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\nhr {\r\n  width: 100%;\r\n}\r\n* {\r\n  margin-right: 0 !important;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GroupChat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid main p-0\",class:[_vm.isMobile ? 'full-size' : 'row m-0']},[_c('div',{staticClass:\"d-flex align-items-end card border-0 p-0\",class:[_vm.isMobile ? '' : 'col-10'],staticStyle:{\"height\":\"100%\"}},[_c('div',{staticClass:\"container-fluid card-body p-0\",staticStyle:{\"height\":\"calc(100vh - 56px - 64px)\"}},[_c('ul',{staticClass:\"list-group list-group-flush d-flex flex-column-reverse main-message\",staticStyle:{\"overflow-x\":\"hidden\",\"padding-bottom\":\"20px\"},attrs:{\"id\":\"group-messages\"},on:{\"click\":function($event){return _vm.closeUserList()}}},[_vm._l((_vm.newMessages),function(c,i){return _c('a',{key:c.createdTime,staticClass:\"list-group-item px-4 py-1\",staticStyle:{\"border\":\"none\"}},[_c('ChatMessage',{attrs:{\"c\":c,\"next\":_vm.newMessages[i+1]}})],1)}),_vm._v(\" \"),(!_vm.oldMessages)?_c('hr',{staticClass:\"m-1\"}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.oldMessages),function(c,i){return _c('a',{key:c.createdTime,staticClass:\"list-group-item px-4 py-1\",staticStyle:{\"border\":\"none\"}},[_c('ChatMessage',{attrs:{\"c\":c,\"next\":_vm.oldMessages[i+1]}})],1)})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"container-fluid card-footer\",staticStyle:{\"position\":\"relative\"}},[(_vm.images.length)?_c('div',{staticClass:\"images-preview d-flex justify-content-center bg-light p-2\"},_vm._l((_vm.images),function(i,index){return _c('div',{key:index,staticClass:\"image_preview border mx-1\",style:('background-image: url('+ i +')')},[_c('i',{staticClass:\"fas fa-lg fa-times-circle bg-white rounded-circle text-dark\",staticStyle:{\"position\":\"absolute\",\"top\":\"5px\",\"right\":\"5px\",\"cursor\":\"pointer\",\"display\":\"none\"},on:{\"click\":function($event){return _vm.removeImage(index)}}})])}),0):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-group-prepend border\"},[_c('label',{staticClass:\"btn btn-primary m-0\"},[_c('i',{staticClass:\"far fa-plus-square fa-lg fa-2x\",staticStyle:{\"vertical-align\":\"top\"}}),_vm._v(\" \"),_c('input',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"inputImage\",\"multiple\":\"\"},on:{\"change\":function($event){return _vm.chooseImage($event)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"p-2 border-top message form-control\",class:{ minimize: _vm.minimize },staticStyle:{\"max-height\":\"42px\",\"overflow-y\":\"auto\"},attrs:{\"contenteditable\":\"true\",\"id\":\"comment\"},on:{\"keyup\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }return _vm.searchEmoji($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }return _vm.sendMessage($event)}],\"paste\":function($event){return _vm.pasteImage($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"input-group-append border\"},[_c('button',{staticClass:\"btn btn-primary m-0\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.emojiPicker = !_vm.emojiPicker;}}},[_c('img',{staticClass:\"emoji\",staticStyle:{\"height\":\"1.5em\"},attrs:{\"src\":\"https://twemoji.maxcdn.com/2/72x72/1f600.png\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-danger m-0\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.sendMessage($event);}}},[_c('i',{staticClass:\"fas fa-reply\"})])])])])]),_vm._v(\" \"),_c('UserList',{class:[_vm.isMobile ? 'p-0' : 'col-2 p-0']}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.emojiPicker),expression:\"emojiPicker\"}],staticClass:\"emoji-picker\"},[_c('Picker',{style:({\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbottom: _vm.isMobile ? '68px' :'124px',\n\t\t\t\t\t\tright: _vm.isMobile ? '0' :'17%',\n\t\t\t\t\t\twidth: _vm.isMobile ? '100vw' : '50vw' ,\n\t\t\t\t\t\tzIndex: 300,\n\t\t\t\t\t}),attrs:{\"set\":'twitter',\"native\":false,\"emojiTooltip\":!_vm.isMobile,\"showPreview\":!_vm.isMobile},on:{\"select\":function($event){return _vm.selectEmoji($event);}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-83a8cf72\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GroupChat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83a8cf72\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GroupChat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GroupChat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GroupChat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83a8cf72\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GroupChat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-83a8cf72\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GroupChat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}