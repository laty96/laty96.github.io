webpackJsonp([4],{"6wEh":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("woOf"),o=s.n(n),a=s("Dd8w"),i=s.n(a),m=s("NYxO"),c=s("m9Bh"),r=s("lHQJ"),l=s("yp89"),d={name:"ViewPost",components:{Reply:c.a},data:function(){return{isLike:"",newComment:{content:""},sortType:2,commentList:[],isReplied:!0,isMobile:!!l.e.any(),loading:!0}},computed:i()({},Object(m.c)({i:function(t){return t.postView.post},comment:function(t){return t.postComment.comment},userInfo:function(t){return t.auth.userInfo}}),{sortTypeValue:function(){return 1==this.sortType?"Best":2==this.sortType?"New":3==this.sortType?"Old":void 0}}),watch:{comment:function(t){if(this.commentList=o()({},this.commentList,this.comment),this.commentList.comment)if(1==this.sortType){var e=Object(l.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==this.sortType){var s=Object(l.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=s}else if(3==this.sortType){var n=Object(l.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=n}this.$forceUpdate()},i:function(){document.title=this.i.title,this.loading=!1,this.$store.dispatch(r.g,this.i.id),this.isLike=this.checkLike(this.i.like)}},methods:{cvDate:l.b,postComment:function(){var t=this;if(this.newComment.content){var e={id:this.i.id,content:this.newComment.content,createdTime:Date.now(),owner:this.userInfo.name,ownerId:this.userInfo._id,postOwnerId:this.i.userId,postId:this.i.id,userImg:this.userInfo.imgURL};this.$store.dispatch(r.x,e),this.newComment.content="",window.setTimeout(function(){t.commentList=t.comment},1e3)}},sortComment:function(t){if(this.sortType=t,1==t){var e=Object(l.g)(this.commentList.comment,"like",!1);this.commentList.comment=e}else if(2==t){var s=Object(l.g)(this.commentList.comment,"createdTime",!0);this.commentList.comment=s}else if(3==t){var n=Object(l.g)(this.commentList.comment,"createdTime",!1);this.commentList.comment=n}},likePost:function(t){this.userInfo.email?(t.isLiked=!t.isLiked,this.$store.dispatch(r.u,{id:t.id,user:this.userInfo.email}),this.$forceUpdate()):this.$router.push("/login")},checkLike:function(t){if(console.log(this.i),t.length>0)return!(t.indexOf(this.userInfo.email)<0)}},created:function(){this.$store.dispatch(r.o,this.$route.params.postId)},destroyed:function(){document.title="Noname"}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-wrapper",style:{width:t.isMobile?"auto":"80%"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[t._v(t._s(t.i.title)+" \n\t\t\t\t"),s("router-link",{staticClass:"close float-right",attrs:{to:"/"}},[s("i",{staticClass:"fas fa-times"})])],1),t._v(" "),s("small",[t._v("Posted by ")]),s("small",{staticClass:"text-primary"},[t._v(t._s(t.i.owner))]),s("span",{staticClass:"badge badge-light text-secondary"},[t._v(t._s(t.cvDate(t.i.createdDate)))])]),t._v(" "),s("div",{staticClass:"card-body",class:{"p-1":t.isMobile}},[s("div",{staticClass:"card-text",class:{"p-2":t.isMobile}},[t._v(t._s(t.i.content)+" \n        ")]),t._v(" "),s("hr"),t._v(" "),t.userInfo.name?s("div",{staticClass:"form-group p-2"},[s("label",{attrs:{for:"comment-input"}},[t._v("Comment as "),s("small",[t._v(t._s(t.userInfo.name))])]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"form-control",attrs:{id:"comment-input",rows:"4"},domProps:{value:t.newComment.content},on:{input:function(e){e.target.composing||t.$set(t.newComment,"content",e.target.value)}}}),t._v(" "),s("button",{staticClass:"form-control btn btn-secondary my-2",class:{disabled:!t.newComment.content},on:{click:t.postComment}},[t._v("Comment")])]):t._e(),t._v(" "),s("div",{},[s("div",{staticClass:"d-flex dropdown custom-control-inline"},[s("button",{staticClass:"btn  btn-sm btn-light dropdown-toggle mr-auto",attrs:{type:"button","data-toggle":"dropdown"}},[s("code",[t._v("Sort by:")]),t._v(" "),s("span",{staticClass:"badge badge-secondary p-1"},[t._v(" "+t._s(t.sortTypeValue))])]),t._v(" "),s("div",{staticClass:"dropdown-menu"},[s("a",{staticClass:"dropdown-item",class:{active:1==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(1)}}},[t._v("Best")]),t._v(" "),s("a",{staticClass:"dropdown-item",class:{active:2==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(2)}}},[t._v("New")]),t._v(" "),s("a",{staticClass:"dropdown-item",class:{active:3==t.sortType},attrs:{href:"#"},on:{click:function(e){t.sortComment(3)}}},[t._v("Old")])]),t._v(" "),s("div",{staticClass:"btn-group btn-group-sm"},[s("button",{staticClass:"btn btn-light shadow-sm",class:{"text-primary":t.isLike},attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.likePost(t.i)}}},[s("i",{staticClass:"fas fa-thumbs-up"}),t._v(" Like")])])])]),t._v(" "),s("hr"),t._v(" "),t._l(t.commentList.comment,function(e,n){return s("div",{key:e.commentID},[t.loading?s("div",{staticClass:"align-content-center",staticStyle:{"text-align":"center"}},[t._m(0,!0)]):s("dl",{staticClass:"border-secondary border-left pl-1 ml-2"},[s("dt",[t.commentList.reply&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),s("dd",[t._v(t._s(e.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:n}}),t._v(" "),t._l(t.commentList.reply?t.commentList.reply[e.commentID]:[],function(n,o){return t.commentList.reply.length?t._e():s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2 collapse show",attrs:{id:""+e.commentID}},[s("dt",[t.commentList.reply[n.commentID]&&t.commentList.reply[n.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+n.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(" "+t._s(n.owner))])]),t._v(" "),s("dd",[t._v(t._s(n.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(n.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:o}}),t._v(" "),t._l(t.commentList.reply[n.commentID],function(e,o){return s("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+n.commentID}},[s("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),s("dd",[t._v(t._s(e.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:n.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:o}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(n,o){return s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+e.commentID}},[s("dt",[t.commentList.reply[n.commentID]&&t.commentList.reply[n.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+n.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(" "+t._s(n.owner))])]),t._v(" "),s("dd",[t._v(t._s(n.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(n.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:o}}),t._v(" "),t._l(t.commentList.reply[n.commentID],function(e,o){return s("dl",{key:e.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+n.commentID}},[s("dt",[t.commentList.reply[e.commentID]&&t.commentList.reply[e.commentID]?s("i",{staticClass:"fas fa-caret-down collapse-caret rounded px-1",attrs:{"data-toggle":"collapse","data-target":"#"+e.commentID}}):t._e(),t._v(" "),s("small",{staticClass:"text-primary"},[t._v(" "+t._s(e.owner))])]),t._v(" "),s("dd",[t._v(t._s(e.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:n.commentID,parentCmt:e,commentID:e.commentID,user:t.userInfo,postId:t.i.id,index:o}}),t._v(" "),t._l(t.commentList.reply[e.commentID],function(n,o){return s("dl",{key:n.commentID,staticClass:"border-secondary border-left pl-1 ml-2  collapse show",attrs:{id:""+e.commentID}},[s("dt",[s("small",{staticClass:"text-primary"},[t._v(" "+t._s(n.owner))])]),t._v(" "),s("dd",[n.mentioned?s("div",{domProps:{innerHTML:t._s(n.mentioned)}}):t._e(),t._v("   "+t._s(n.content)),s("small",{staticClass:"text-secondary"},[t._v("   -  "+t._s(t.cvDate(e.createdTime)))])]),t._v(" "),s("Reply",{attrs:{parent2CmtID:e.commentID,parentCmt:n,commentID:n.commentID,user:t.userInfo,postId:t.i.id,index:o}})],1)})],2)})],2)})],2)})],2)}),t._v(" "),s("hr")],2)])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"loader-7"}},[e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span"),e("span")])}]};var _=s("VU/8")(d,p,!1,function(t){s("FR8B")},null,null);e.default=_.exports},FR8B:function(t,e){}});
//# sourceMappingURL=4.f71b719ee02abd07debd.js.map