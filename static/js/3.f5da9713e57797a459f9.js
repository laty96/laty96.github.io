webpackJsonp([3],{VaM0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("woOf"),a=i.n(o),s=i("Dd8w"),n=i.n(s),c=i("r5kb"),r=n()({confirmItemTicket:function(t){this.firebaseDB.collection(this.collection).doc(t).update({confirmed:!0})},createBill:function(t,e){var i=a()({},t);return this.create(i,e),this},getReport:function(t,e){this.firebaseDB.collection(this.collection).where("type","==",t).get().then(function(t){if(!t.empty){var i=[];t.forEach(function(t){i.push(t.data())}),e(i)}})}},c.a),_=i("N+h9"),l=(i("9r0o"),i("kxiW"),{name:"Storage",data:function(){return{ticket:[],importTicket:[],order:""}},methods:{fetchOrder:function(t,e){var i=this;r.setCollection("orders").getWithCondition([{field:"id",op:"==",value:t}],function(t){i.order=t[0],console.log(t)})},fetchImportOrder:function(t,e){var i=this;r.setCollection("ImportOrder").getWithCondition([{field:"id",op:"==",value:t}],function(t){i.order=t[0],console.log(t)})},confirmTicket:function(t){r.setCollection("tickets").update(t._id,{is_confirmed:!0,completed_time:Date.now()}),r.setCollection("orders").getWithCondition([{field:"id",op:"==",value:t.order_id}],function(t){r.setCollection("orders").update(t[0]._id,{is_done:!0,completed_time:Date.now()})}),r.setCollection("bills").getWithCondition([{field:"ticketid",op:"==",value:t.id}],function(t){console.log(t)})},rejectTicket:function(t){r.setCollection("tickets").update(t._id,{is_confirmed:!1,completed_time:Date.now()}),r.setCollection("orders").getWithCondition([{field:"id",op:"==",value:t.order_id}],function(t){r.setCollection("orders").update(t[0]._id,{is_done:!1,completed_time:Date.now()})}),r.setCollection("bills").getWithCondition([{field:"ticketid",op:"==",value:t.id}],function(t){console.log(t)})},confirmImportTicket:function(t){r.setCollection("ImportTicket").update(t._id,{is_confirmed:!0,completed_time:Date.now()}),r.setCollection("ImportOrder").getWithCondition([{field:"id",op:"==",value:t.order_id}],function(t){r.setCollection("ImportOrder").update(t[0]._id,{is_done:!0,completed_time:Date.now()})}),r.setCollection("ImportBill").getWithCondition([{field:"ticketid",op:"==",value:t.id}],function(t){console.log(t)})},rejectImportTicket:function(t){r.setCollection("ImportTicket").update(t._id,{is_confirmed:!1,completed_time:Date.now()}),r.setCollection("ImportOrder").getWithCondition([{field:"id",op:"==",value:t.order_id}],function(t){r.setCollection("ImportOrder").update(t[0]._id,{is_done:!1,completed_time:Date.now()})}),r.setCollection("ImportBill").getWithCondition([{field:"ticketid",op:"==",value:t.id}],function(t){console.log(t)})}},created:function(){var t=this;r.setFirebaseDB(_.a),r.setCollection("tickets").getWithConditionRealTime([{field:"type",op:"==",value:"export"}],function(e){t.ticket=e,console.log(e)}),r.setCollection("ImportTicket").setOrderBy("created_time","desc").getAllRealTime(function(e){"None"!=e&&(t.importTicket=e,console.log(e))})}}),d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t._m(0),t._v(" "),i("div",{staticClass:"tab-content mt-1"},[i("div",{staticClass:"container tab-pane active",attrs:{id:"export"}},[i("table",{staticClass:"table"},[t._m(1),t._v(" "),i("tbody",t._l(t.ticket,function(e,o){return i("tr",{key:o,attrs:{role:"button"}},[i("th",{attrs:{scope:"row"}},[t._v(t._s(o+1))]),t._v(" "),i("td",[t._v(t._s(e.id))]),t._v(" "),i("td",[t._v(t._s(new Date(e.created_time).toLocaleDateString()))]),t._v(" "),i("td",[t._v(t._s(new Date(e.completed_time).toLocaleDateString())+"\n              ")]),t._v(" "),i("td",[t._v(t._s(e.is_confirmed))]),t._v(" "),i("td",[i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.fetchOrder(e.order_id,o)}}},[t._v("Detail")]),t._v(" "),e.is_confirmed?t._e():i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.confirmTicket(e)}}},[t._v("Confirm")]),t._v(" "),e.is_confirmed?i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.rejectTicket(e)}}},[t._v("Reject")]):t._e()])])}))]),t._v(" "),t.order?i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("h3",[t._v("Order ID: "+t._s(t.order.id))])]),t._v(" "),i("div",{staticClass:"card-body"},[i("p",[t._v("Name: "+t._s(t.order.name))]),t._v(" "),i("p",[t._v("Date: "+t._s(t.order.created_time))]),t._v(" "),i("p",[t._v("Employee: "+t._s(t.order.employee_id))]),t._v(" "),i("p",[t._v("Status: "+t._s(t.order.is_done?"Done":"Pending"))]),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"collapse",attrs:{id:"collapseExample"}},t._l(t.order.items,function(e,o){return i("div",{key:o,staticClass:"card card-body m-1"},[i("p",[t._v("ID: "+t._s(e.id))]),t._v(" "),i("p",[t._v("Name: "+t._s(e.name))]),t._v(" "),i("p",[t._v("Price: "+t._s(e.price))]),t._v(" "),i("p",[t._v("Discount percent: "+t._s(e.discount_percent)+"%")]),t._v(" "),i("p",[t._v("Discount value: "+t._s(e.discount_value))]),t._v(" "),i("p",[t._v("Quantity: "+t._s(e.quantity))]),t._v(" "),i("p",[t._v("Stock: "+t._s(e.stock))]),t._v(" "),i("p",[t._v("Added Time: "+t._s(e.created_time))]),t._v(" "),i("p",[t._v("Final price: "+t._s(e.final_price))]),t._v(" "),i("p",[t._v("Total: "+t._s(+e.final_price*+e.quantity))])])}))])]):t._e()]),t._v(" "),i("div",{staticClass:"container tab-pane",attrs:{id:"import"}},[i("table",{staticClass:"table"},[t._m(3),t._v(" "),i("tbody",t._l(t.importTicket,function(e,o){return i("tr",{key:o,attrs:{role:"button"}},[i("th",{attrs:{scope:"row"}},[t._v(t._s(o+1))]),t._v(" "),i("td",[t._v(t._s(e.id))]),t._v(" "),i("td",[t._v(t._s(new Date(e.created_time).toLocaleDateString()))]),t._v(" "),i("td",[t._v(t._s(new Date(e.completed_time).toLocaleDateString())+"\n              ")]),t._v(" "),i("td",[t._v(t._s(e.is_confirmed))]),t._v(" "),i("td",[i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.fetchImportOrder(e.order_id,o)}}},[t._v("Detail")]),t._v(" "),e.is_confirmed?t._e():i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.confirmImportTicket(e)}}},[t._v("Confirm")]),t._v(" "),e.is_confirmed?i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.rejectImportTicket(e)}}},[t._v("Reject")]):t._e()])])}))]),t._v(" "),t.order?i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("h3",[t._v("Order ID: "+t._s(t.order.id))])]),t._v(" "),i("div",{staticClass:"card-body"},[i("p",[t._v("Name: "+t._s(t.order.name))]),t._v(" "),i("p",[t._v("Date: "+t._s(t.order.created_time))]),t._v(" "),i("p",[t._v("Employee: "+t._s(t.order.employee_id))]),t._v(" "),i("p",[t._v("Status: "+t._s(t.order.is_done?"Done":"Pending"))]),t._v(" "),t._m(4),t._v(" "),i("div",{staticClass:"collapse",attrs:{id:"collapseExample"}},t._l(t.order.items,function(e,o){return i("div",{key:o,staticClass:"card card-body m-1"},[i("p",[t._v("ID: "+t._s(e.id))]),t._v(" "),i("p",[t._v("Name: "+t._s(e.name))]),t._v(" "),i("p",[t._v("Price: "+t._s(e.price))]),t._v(" "),i("p",[t._v("Discount percent: "+t._s(e.discount_percent)+"%")]),t._v(" "),i("p",[t._v("Discount value: "+t._s(e.discount_value))]),t._v(" "),i("p",[t._v("Quantity: "+t._s(e.quantity))]),t._v(" "),i("p",[t._v("Stock: "+t._s(e.stock))]),t._v(" "),i("p",[t._v("Added Time: "+t._s(e.created_time))]),t._v(" "),i("p",[t._v("Final price: "+t._s(e.final_price))]),t._v(" "),i("p",[t._v("Total: "+t._s(+e.final_price*+e.quantity))])])}))])]):t._e()]),t._v(" "),i("div",{staticClass:"container tab-pane",attrs:{id:"item-info"}},[i("table",{staticClass:"table"},[t._m(5),t._v(" "),i("tbody",t._l(t.ticket,function(e,o){return i("tr",{key:o,attrs:{role:"button"}},[i("th",{attrs:{scope:"row"}},[t._v(t._s(o+1))]),t._v(" "),i("td",[t._v(t._s(e.id))]),t._v(" "),i("td",[t._v(t._s(new Date(e.created_time).toLocaleDateString()))]),t._v(" "),i("td",[t._v(t._s(new Date(e.completed_time).toLocaleDateString())+"\n              ")]),t._v(" "),i("td",[t._v(t._s(e.is_confirmed))]),t._v(" "),i("td",[i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.fetchOrder(e.order_id,o)}}},[t._v("Detail")]),t._v(" "),e.is_confirmed?t._e():i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.confirmTicket(e)}}},[t._v("Confirm")]),t._v(" "),e.is_confirmed?i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.rejectTicket(e)}}},[t._v("Reject")]):t._e()])])}))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#export"}},[this._v("Export")])]),this._v(" "),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#import"}},[this._v("Import")])]),this._v(" "),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#item-info"}},[this._v("Info")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",{staticClass:"thead-dark"},[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("ID")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Created Date")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Completed Date")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),i("th",{attrs:{scope:"col"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{staticClass:"btn btn-primary",attrs:{"data-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[this._v("\n                Items\n              ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",{staticClass:"thead-dark"},[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("ID")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Created Date")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Completed Date")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),i("th",{attrs:{scope:"col"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{staticClass:"btn btn-primary",attrs:{"data-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[this._v("\n                Items\n              ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",{staticClass:"thead-dark"},[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("ID")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Completed Date")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),i("th",{attrs:{scope:"col"}})])])}]};var v=i("VU/8")(l,d,!1,function(t){i("YHuE")},null,null);e.default=v.exports},YHuE:function(t,e){}});
//# sourceMappingURL=3.f5da9713e57797a459f9.js.map